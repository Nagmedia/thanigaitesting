import{g as MI,i as OI}from"https://app.framerstatic.com/chunk-7SYQ36VB.mjs";import{$ as ON,$a as Ax,$b as Rn,A as mN,Aa as cx,Ab as Bx,Ac as yV,B as fN,Ba as dx,Bb as Hx,Bc as CV,C as hN,Ca as px,Cb as Gx,Cc as SV,D as Pn,Da as ux,Db as $x,Dc as vV,E as gN,Ea as mx,Eb as _x,Ec as TV,F as Lm,Fa as fx,Fb as jx,Fc as Ws,G as Fm,Ga as hx,Gb as Ux,Gc as bV,H as yN,Ha as gx,Hb as Jx,Hc as $i,I as CN,Ia as yx,Ib as Xx,J as SN,Ja as Cx,Jb as Zx,K as vN,Ka as Sx,Kb as Kx,L as TN,La as vx,Lb as Yx,M as bN,Ma as Tx,Mb as qx,N as IN,Na as bx,Nb as Qx,O as NN,Oa as Ix,Ob as eV,P as xN,Pa as Nx,Pb as tV,Q as VN,Qa as xx,Qb as oV,R as PN,Ra as Vx,Rb as rV,S as wN,Sa as Px,Sb as iV,T as kN,Ta as wx,Tb as nV,U as RN,Ua as kx,Ub as aV,V as DN,Va as Rx,Vb as sV,W as LN,Wa as Dx,Wb as lV,X as FN,Xa as Lx,Xb as cV,Y as EN,Ya as Fx,Yb as dV,Z as AN,Za as Ex,Zb as kn,_ as MN,_a as wn,_b as Or,a as QI,aa as zN,ab as Mx,ac as Ko,b as X,ba as WN,bb as Em,bc as pV,c as Rm,ca as BN,cb as Yc,cc as uV,d as eN,da as HN,db as Am,dc as mV,e as Gi,ea as GN,eb as Mm,ec as fV,f as Dm,fa as $N,fb as Om,fc as wa,g as As,ga as _N,gb as zm,gc as Ms,h as we,ha as jN,hb as qc,hc as ka,i as tN,ia as UN,ib as Wm,ic as Qc,j as Zc,ja as JN,jb as Bm,jc as Os,k as Kc,ka as XN,kb as Hm,kc as Dn,l as oN,la as ZN,lb as Gm,lc as zs,m as rN,ma as KN,mb as $m,mc as ed,n as iN,na as YN,nb as _m,nc as td,oa as qN,ob as jm,oc as od,p as nN,pa as QN,pb as Um,pc as rd,qa as ex,qb as Jm,qc as id,r as aN,ra as tx,rb as Xm,rc as nd,sb as Zm,sc as hV,t as sN,ta as ox,tb as Km,tc as ad,ua as rx,ub as Ym,uc as sd,v as lN,va as ix,vb as qm,vc as ld,w as cN,wa as nx,wb as Qm,wc as cd,x as dN,xa as ax,xb as Ox,xc as dd,y as pN,ya as sx,yb as zx,yc as pd,z as uN,za as lx,zb as Wx,zc as gV}from"https://app.framerstatic.com/chunk-YFWH4SQP.mjs";import{b as zI,c as WI}from"https://app.framerstatic.com/chunk-XCL4UJVK.mjs";import{j as BI}from"https://app.framerstatic.com/chunk-BOGFRFUT.mjs";import{e as AI,g as Vm}from"https://app.framerstatic.com/chunk-26DGUZEL.mjs";import{b as km,c as jI,e as ef}from"https://app.framerstatic.com/chunk-ZQVVSJSJ.mjs";import{a as Pa,c as HI,d as Pm,e as GI,h as wm,j as $I,m as _I,n as Jc,o as Xc,p as ZI,q as KI,r as YI,s as qI,t as IV}from"https://app.framerstatic.com/chunk-PAMPEZRR.mjs";import{$ as bv,$c as xa,A as ha,Bc as jb,C as dv,Cb as Rb,Cf as II,D as pv,Dc as Ub,Df as NI,Dg as Uc,Eb as Hc,Ef as xI,Eg as RI,Fc as $c,Ff as VI,G as Ju,Gb as ho,Gc as _c,Gf as PI,H as mv,Ha as Rv,Hb as Gc,I as Sc,Ib as Db,If as wI,J as BF,Ja as Bc,Jb as Lb,Jc as Jb,K as hv,Kb as Fb,Ke as Va,Kf as bm,L as gv,Lb as Eb,Lc as Xb,Le as lI,Lf as jc,Ma as ci,Mb as Ab,Mc as Zb,Me as cI,Mg as DI,Nb as hm,Ne as ui,Ng as LI,O as Tc,Oe as dI,Og as Es,P as Zu,Pa as gb,Pb as Mb,Pe as pI,Qa as yb,Qb as Ob,Qg as FI,Rc as Kb,Sa as fm,Sb as zb,Sc as Yb,Sd as tI,Se as uI,Sg as EI,Ta as Cb,Tb as di,Tc as qb,Td as oI,Ua as Sb,Uc as Na,Ud as rI,Ue as Sm,Vc as ym,Vd as Cm,Wf as Im,Xf as kI,Yf as Fs,Zf as Nm,_ as Tv,_a as vb,_e as xn,a as hc,aa as bc,b as av,ba as Iv,de as iI,df as vm,dg as xm,eb as bb,ec as Wb,f as Wu,fa as Vv,fc as Bb,fd as Qb,fe as nI,ff as mI,ga as Pv,gb as Ib,gc as Hb,gf as fI,hc as gm,hd as Ls,hf as hI,ib as Nb,jb as ks,jd as Mr,kb as xb,kc as Gb,lb as Vb,nb as Pb,nf as gI,ob as wb,od as eI,of as yI,pf as CI,qa as kv,r as Hu,ra as Ss,s as Gu,sf as Tm,t as Cn,ta as vs,u as $u,ua as Ic,ue as aI,v as _u,ve as sI,vf as SI,w as ys,we as Nn,wf as Vn,x as ju,xb as Rs,xe as pr,xf as vI,y as Uu,yb as Ds,yc as $b,yf as TI,z as Cs,zc as _b,zf as bI}from"https://app.framerstatic.com/chunk-2GTAWJRW.mjs";import{e as Dr,g as Ou,h as zu,q as Tb,u as kb,v as pi}from"https://app.framerstatic.com/chunk-R3BNJ7YD.mjs";import{a as HF,f as Ct}from"https://app.framerstatic.com/chunk-RZLQRIKM.mjs";import{a as UI,b as JI,c as XI,f as tf}from"https://app.framerstatic.com/chunk-OOKYJP4H.mjs";import{j as Hi}from"https://app.framerstatic.com/chunk-OCARRMQ2.mjs";import{$d as bs,$e as lT,$f as yT,$g as wT,$h as jT,Ad as om,Ae as am,Ah as AT,Ai as ws,Bd as rm,Bf as sm,Bi as ub,C as Xo,Cg as te,Ci as mb,De as Ta,Dg as Wt,Dh as Wc,E as qe,Eb as Nc,Ee as Dc,Eh as MT,F as vc,Fd as Rc,Fe as Lc,Fi as fb,Gb as Dv,Gd as qv,Ge as oT,Gg as NT,Gh as OT,He as Fc,Id as Qv,If as eo,Ig as Tn,Ii as In,Jf as Ns,K as Xu,Kd as Ts,Kg as xT,Lc as Vc,Lg as bn,Li as hb,Mg as VT,Mh as pm,Na as Lr,Nc as Mv,Ni as Ia,Oa as Ku,Ob as Lv,Oe as rT,Of as lm,Oh as zT,Pe as iT,Pg as Zo,Qb as xc,Qe as wt,Qh as WT,Sc as Ov,Se as nT,Sf as Oc,Tc as Er,Te as aT,Th as um,U as fv,Ua as yv,Uc as Pc,Uf as hT,Ug as PT,Uh as BT,Va as de,Vc as ai,Ve as sT,Vh as HT,Wa as Cv,Wc as si,We as li,Wh as mm,Xc as zv,Xh as GT,Ya as Q,Yf as gT,Yh as $T,Za as Nt,Zc as Wv,_a as Sn,_b as Ev,_e as Ec,_h as _T,ac as Qu,ag as CT,ai as UT,b as sv,bf as Wi,bh as kT,bi as JT,c as lv,cb as Sv,cc as em,cf as Jt,dd as Bv,dg as ST,dh as RT,e as gs,eb as vv,ed as Hv,eh as DT,ei as XT,f as cv,fa as fo,fb as Nv,fe as im,ff as Is,fg as xs,fi as ZT,g as Bu,gd as _v,ge as nm,gf as cT,gg as cm,gi as KT,hb as xv,hd as kc,he as eT,hg as vT,id as jv,ih as dr,ii as YT,jd as zi,jf as uT,jg as dm,ji as qT,k as yt,kc as Fr,ki as QT,l as ga,lf as mT,lg as Vs,li as eb,mb as Yu,md as Uv,mf as fT,mh as LT,mi as tb,n as gc,nd as Jv,ni as ob,o as io,oe as va,og as cr,oi as rb,p as lr,pb as qu,pd as Sa,pe as tT,pg as ba,ph as FT,pi as ib,qi as nb,r as Oi,rd as Xv,ri as ab,s as yc,sd as Zv,si as sb,t as Cc,td as Kv,tf as Mc,tg as TT,ti as lb,u as uv,v as ya,vb as wv,vd as Yv,vf as vn,vg as bT,vi as cb,wa as ii,wb as Me,wf as Ar,wh as ET,wi as db,xh as zc,xi as pb,y as Jo,yh as Ps,zd as tm,zg as IT}from"https://app.framerstatic.com/chunk-FGH3BHNH.mjs";import{$d as Vt,$e as We,$i as Tu,$n as xe,$t as Uo,A as lu,Ac as My,Ad as jy,Af as oC,Ah as Qt,Aj as bu,Am as ar,Ao as nS,B as ge,Bd as El,Bh as ns,Bk as un,Bs as DS,Bv as Mu,Cb as vy,Cc as ts,Cf as rC,Cm as Yl,Ct as ac,Cv as YS,Cw as Ac,Dd as Uy,Dg as hC,Dl as Ut,Dv as qS,Dw as Bi,Ec as Jr,Ef as iC,Eh as SC,Ek as qr,Et as fs,Eu as dc,Ev as QS,Ew as dT,Fb as Ty,Ff as nC,Fi as Li,Fk as Iu,Fo as mn,Fs as nc,Ft as hs,Fu as Eu,Fv as Rr,Fw as pT,Gp as uS,Gq as Ft,Gt as sc,Gv as ev,H as ay,Hb as Ur,Hc as aa,He as br,Hf as aC,Hi as Xl,Hl as Vu,Hq as IS,Ht as _e,Hu as HS,I as oe,Ib as j,Ic as Oy,Ie as Zr,If as sC,Ik as MC,Iq as NS,It as FS,Iu as GS,J as cu,Jb as Mt,Jc as _t,Je as Pe,Jf as hu,Jt as ES,Ju as $S,Kb as Iy,Kc as os,Ke as nr,Kf as lC,Kg as gu,Kk as Nu,Ko as oi,Ku as _S,Kv as ot,Lc as Lt,Le as qy,Lf as Nr,Lh as Jl,Ln as QC,Lu as US,M as du,Mb as Ny,Md as Al,Me as Wl,Mf as Yr,Mi as ss,Mj as cs,Mk as OC,Mn as xo,Mq as oc,Mu as pc,Ne as Ir,Ng as gC,Ni as bC,Nk as zC,Nq as xS,Nt as lc,Oa as pu,Oe as Bl,Of as xr,Og as yC,Ot as Fu,Ou as ua,Pe as bt,Pf as cC,Ph as yu,Pk as WC,Pn as ti,Pu as uc,Pv as mc,Qa as my,Qb as xy,Qe as le,Qg as CC,Qu as JS,Rb as Vy,Rc as zy,Re as ze,Rf as dC,Rk as xu,Rt as AS,Ru as XS,Rv as fc,Se as bo,Sf as pC,Si as IC,Sj as kC,Sk as BC,Sn as ku,Tb as Py,Tc as Wy,Te as J,Tf as uC,Tu as ma,Tv as tv,U as oo,Ud as Ml,Ue as Qy,Uj as pn,Up as mS,Uu as Ye,Uv as ov,Va as gy,Vc as Fl,Vd as ir,Ve as It,Vj as RC,Vn as ms,Vp as fS,Vu as ZS,Wa as na,Wd as Vi,We as ct,Wn as eS,Wp as hS,Wr as ic,Wu as KS,Wv as rv,Xa as Qa,Xc as By,Xd as mu,Xe as wi,Xm as KC,Xp as gS,Xu as Ai,Ya as yy,Yb as wy,Yd as Jy,Ye as is,Yi as vu,Yl as UC,Ym as Fi,Yp as yS,Z as ia,Za as es,Zd as uo,Ze as De,Zf as Di,Zh as cn,Zj as ds,Zn as tS,Zp as CS,_c as Hy,_e as $,_f as mC,_i as dt,_k as HC,_m as Pu,_p as SS,_q as VS,ae as ht,af as ki,ai as Cu,al as GC,ao as Pr,be as Xy,bf as mo,bo as ec,bu as MS,ce as Zy,cf as Kr,co as sr,cu as OS,d as Ni,dd as xi,de as Ky,df as Ee,dl as $C,dn as YC,dp as aS,dq as vS,du as zS,ef as fu,ek as DC,ep as sS,fc as ky,ff as Hl,fg as fC,fk as LC,fl as _C,fm as Qr,fp as ca,fu as gn,fw as iv,ga as Sr,ge as sa,gl as ue,gm as ei,go as Ru,gv as Mi,gw as nv,h as Yg,he as Tt,hi as Ao,hk as Vr,hl as V,hn as wu,ho as jo,hp as da,hr as pa,id as Gy,il as No,in as qC,io as ro,iq as TS,iu as Le,iw as fa,j as iu,jd as rs,ji as vC,jl as Y,jw as ri,k as qg,kd as $y,kj as NC,kl as ps,km as Ae,ko as ve,kp as lS,kv as kr,l as M,la as sy,lf as Gl,lj as Pt,ll as at,lp as tc,lr as rc,m as Re,mc as Ry,mf as eC,mj as Zl,ml as m,mm as ye,mo as la,mr as fn,nb as sn,nc as $t,ni as TC,nk as FC,nl as Je,nm as JC,no as Du,nr as wS,nu as Vo,nv as yn,oc as Dy,od as Xr,oe as Yy,or as kS,pc as vr,pe as Ol,ph as ln,pl as tt,pr as wr,pu as cc,qb as jr,qc as Ly,qe as Eo,qf as $l,qj as Io,qk as EC,qo as oS,qu as WS,r as qa,rn as ql,rq as bS,rw as ni,s as nu,sc as Fy,se as zl,sj as xC,sl as Mo,sm as XC,sn as Ql,so as Lu,sw as Gv,ta as ly,tc as Ey,td as _y,te as qt,ti as as,tl as _o,to as rS,tw as wc,ua as cy,uc as Ay,ue as jt,uf as _l,uj as VC,um as ZC,uu as BS,uw as $v,va as dy,vc as z,ve as Ot,vf as tC,vj as ls,vk as AC,vv as Au,w as Qg,wa as py,wb as Cy,we as Pi,wf as jl,wj as PC,wp as cS,wt as Ei,xf as Ul,xj as dn,xp as dS,xt as LS,xu as zt,xw as Ca,y as Yt,yb as Sy,yc as To,yj as wC,yl as jC,ym as us,yp as pS,yr as RS,za as uy,zb as Ll,zc as Tr,zf as Ri,zi as Su,zk as Kl,zo as iS,zt as hn}from"https://app.framerstatic.com/chunk-6VUXP4YL.mjs";import{d as Fv}from"https://app.framerstatic.com/chunk-R3NZHMAQ.mjs";import{K as ny,P as by,d as ey,e as Rl,g as Dl,h as au,i as ty,o as su,s as oy,u as ry,v as iy}from"https://app.framerstatic.com/chunk-QIXHNEYN.mjs";import{b as PS}from"https://app.framerstatic.com/chunk-GO7WVIKP.mjs";import{a as Av}from"https://app.framerstatic.com/chunk-4I3XDWXC.mjs";import{a as to,b as At}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import{b as Go}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{p as Xe}from"https://app.framerstatic.com/chunk-GEQ3K66E.mjs";import{a as rr,b as R,d as K,e as Fe,f as ft,g as fy,h as hy,i as E,j as $o,l as nt,n as uu,o as Fo}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{a as WF,ce as jS}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{g as Cr}from"https://app.framerstatic.com/chunk-GBQDPQKG.mjs";import{A as nn,D as Ii,E as Ho,F as Ge,H as Xg,J as _r,L as an,M as ce,N as Zg,O as Kg,Z as $e,aa as yr,e as ru,i as oa,l as ra,p as Gt,v as Ke,z as Jg}from"https://app.framerstatic.com/chunk-L6RIH4MY.mjs";import{a as C,b as _}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as kl}from"https://app.framerstatic.com/chunk-LQILWJHN.mjs";import{d as ou,e as Ya,j as k,k as F,l as ie,m as ee,n as gt}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var xV=Ya(HF());var VV=Ya(WF());var dG=VV.default.createContext("not-defined");var NV={store_internal:2,store_browse:2,store_use_installed:2},of={},ud=new xV.FramerTracking({sourceName:"framer-x",trackingURL:kl().events+"/track",verbose:window.localStorage&&window.localStorage.getItem("debug-metrics")==="active",addContext:e=>{let t;for(t in of)e[t]===void 0&&(e[t]=of[t])}}),GF;(r=>(r.init=function(i){let{appVersion:n,projectId:a}=i;Object.assign(of,{appVersion:n,projectId:a}),ud.setUserId(i.userId)},r.push=function(i){let{name:n,type:a,...l}=i;i.type==="store_internal"?(delete l.action,ud.track({type:"track",event:n,version:2,...l})):ud.track({type:"track",event:a,version:NV[a],name:n,...l})},r.pushEvent=function(i){let{event:n,...a}=i;ud.track({...a,type:"track",event:n,version:NV[n]})}))(GF||={});var $F=new Set(Ty({fillImageLocalized:!0,formInputPlaceholderLocalized:!0,htmlLocalized:!0,altAttributeLocalized:!0,titleLocalized:!0,descriptionLocalized:!0,linkLocalized:!0}));function rf(e){return $F.has(e)}function md(e){return e.map(t=>Fe(t)?fd(t):ft(t)?md(t):t)}function _F(e){return e.endsWith("Localized")}function fd(e){let t={};for(let o in e){if(_F(o))continue;let r=e[o];Fe(r)?t[o]=fd(r):ft(r)?t[o]=md(r):t[o]=r}return t}function yG(e){let t={},o;for(o in e){if(rf(o))continue;if(!vu(o)){t[o]=e[o];continue}let r=e[o];Fe(r)?t[o]=fd(r):ft(r)?t[o]=md(r):t[o]=r}return t}function PV(e){let t={};for(let o in e){if(rf(o))continue;if(!vu(o)){t[o]=e[o];continue}let r=e[o];Fe(r)?t[o]=fd(r):ft(r)?t[o]=md(r):t[o]=r}return t}var jF={track:!0};function wV(e){let t={...e,event:"canvas_page_add"};Go(t,jF)}var UF={track:!0};function kV(e){let t={...e,event:"component_canvas_enter"};Go(t,UF)}var JF={track:!0};function RV(e){let t={...e,event:"component_canvas_variant_create"};Go(t,JF)}var XF={track:!0};function nf(e){let t={...e,event:"component_design_instance"};Go(t,XF)}var ZF={track:!0};function DV(e){let t={...e,event:"property_layout_update"};Go(t,ZF)}var KF={track:!0};function LV(e){let t={...e,event:"variable_reference_create"};Go(t,KF)}function FV(e,t){return rr(t)?t:ye(e)?e.constraintsLocked:!1}function ZG(e,t,o,r){let i=e.tree,n={x:Math.round(o.x-r.width/2),y:Math.round(o.y-r.height/2)},a=i.getNode(t);if(!t||!a)return{left:n.x,top:n.y};let l=qS(e.tree,t),s=l?e.tree.getViewportRect(l):null,c=i.getRect(a),d=i.convertPointToNode(a,n),u={x:d.x,y:d.y,width:r.width,height:r.height},f=u.width/u.height,y=Qu(u,{sizing:c,positioning:c,viewport:s,layout:br(a)},null,{aspectRatio:f,shouldGuessPinToBottom:Nn(i,null,a),shouldGuessPinToRight:pr(i,null,a)});return y.aspectRatio=f,y}var af=(e,t,o,r)=>{let i=t.getGroundNodes().map(n=>e.getRect(n));return r!==void 0&&i.push(...r),i.find(n=>oe.intersects(o,n))===void 0},YF=(e,t,o,r,i)=>{let n=t.getGroundNodes().map(s=>e.getRect(s));r!==void 0&&n.push(...r);let l=n.sort((s,c)=>oe.maxX(s)>oe.maxX(c)?-1:1)[0];return l!==void 0?cf(l,o,i):null},qF=(e,t,o,r,i)=>{let n=t.getGroundNodes().map(c=>e.getRect(c));r!==void 0&&n.push(...r);let s=n.filter(c=>c.width===o.width&&c.height===o.height||c.height===o.width&&c.width===o.height).sort((c,d)=>oe.maxX(c)>oe.maxX(d)?-1:1)[0];return s!==void 0?cf(s,o,i):null},QF=(e,t,o)=>t.map(r=>e.getNode(r)).filter(r=>Jl.equals(r.rect(null),o));function lf({tree:e,activeScope:t,node:o,size:r,filledRects:i,offsetDistance:n}){let a={...e.getRect(o),...r},l=t.getGroundNodes().map(d=>d.rect());i&&l.push(...i);let s=a,c=0;for(;s;){if(E(n.x)||(a.x=sf("x",s,n.x)),E(n.y)||(a.y=sf("y",s,n.y)),s=l.find(d=>oe.intersects(d,a)),c>l.length)return a;c++}return a}var AV=(e,t,o,r,i={x:100,y:void 0},n)=>lf({tree:e,activeScope:t,node:o,size:r,filledRects:n,offsetDistance:i}),Bs=(e,t,o,r,i=100,n)=>lf({tree:e,activeScope:t,node:o,size:r,filledRects:n,offsetDistance:{x:i}}),KG=(e,t,o,r,i=100,n)=>lf({tree:e,activeScope:t,node:o,size:r,filledRects:n,offsetDistance:{y:i}});function sf(e,t,o){return(e==="x"?oe.maxX:oe.maxY)(t)+o}function cf(e,t,o=100){return{...e,x:sf("x",e,o),...t}}var eE=(e,t,o,r,i,n,a)=>{if(n){let c=e.getNode(n);if(c)return Bs(e,t,c,o,a,i)}if(r){let c=QF(e,r,o);if(c.length){let u=c.map(y=>cf(y.rect(),o,a)).find(y=>af(e,t,y,i));if(u)return u;let f=c[0];return C(f,"Equal frame must be defined"),Bs(e,t,f,o,a,i)}}let l=qF(e,t,o,i,a);if(l!==null&&af(e,t,l,i))return l;let s=YF(e,t,o,i,a);return s!==null&&af(e,t,s,i)?s:{...o,x:0,y:0}},YG=(e,t,o,r,i)=>{let n=e.getRect(o),a=e.getParent(o.id),l;Ee(o)&&(l=Math.min(n.width,100));let s=eE(e,t,n,r,i,o.id,l);return i.push(s),Qu(s,null,ma(o)?Ai(o):null,{shouldGuessPinToBottom:!0,shouldGuessPinToRight:pr(e,o,a)})},qG=(e,t,o,r)=>{if(o.length>0){let i=o[o.length-1],n=e.getGroundFrameAncestor(i,!0);if(n)return n.id}for(let i of e.sortVisually(e.getNodesAtPoint(t,r)).reverse())if(i instanceof di&&e.getParent(i.id)===_t){if(ht(i))continue;return i.id}return _t},QG=(e,t,o)=>{let i=e.tree.newId(),n={top:t.y,left:t.x,width:t.width,height:t.height,overflow:"clip",isScreen:!0};return n.framePreset=o,e.createFrame(_t,{id:i,...n}),i},e$=(e,t)=>{let o=e.tree,r=o.newId(),i={top:t.y,left:t.x,width:t.width,height:t.height,overflow:"clip",isScreen:!0};return e.createFrame(_t,{id:r,...i}),e.stores.scopeStore.active.getGroundNodes(a=>{let l=o.getRect(a);return a.id!==r&&oe.containsRect(t,l)}).forEach(a=>{let l=o.getParent(a.id),s=o.getRect(a),c=oe.offset(s,ge.reverse(t));e.moveNode(a.id,r),e.tree.current(a)?.set(a.updateForRect({rect:c,parentSizeInfo:{sizing:t,positioning:t,viewport:null,layout:br(l)},constraintsLocked:FV(a),shouldGuessPinToBottom:!0,shouldGuessPinToRight:pr(e.tree,a,l)}))}),r},EV=["#9ef","#4cf","#3af","#38f","#26f"],t$=(()=>{let e=-1,t=EV.length;return()=>(e++,EV[e%t])})();function a$(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);if(!eC(r)&&!Gl(r)&&!(!r&&o.added==="RedirectRouteNode"))return!1}return!0}function MV(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);return!r||!qr(r)?!1:"variables"in o.from}return!0}function OV(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);if(!Zr(r))return!1;let i="locales";return!!(i in o.from||o.from._deleted?.includes(i))}return!0}var zV=class extends Fr{constructor(){super(...arguments);k(this,"active",0)}};var tE=Ke("EngineChanges");var WV=class{constructor(){k(this,"changes",new Set);k(this,"addChanges",(...t)=>{for(let o of t)this.changes.add(o)});k(this,"changeObserverFlags",[]);k(this,"changeObservers",[]);k(this,"inSignalAllObservers",!1);k(this,"observersToRemove",[])}get flags(){return this.changes}has(...t){for(let o of t)if(this.changes.has(o))return!0;return!1}observe(...t){let o=t.pop(),r=t;return Cr.isDebugBuild&&r.some(i=>i===void 0)&&tE.warn("changes.observe was called with undefined as one of the flags. It might be caused by observing a store that hasn't been instantiated yet."),this.changeObserverFlags.push(r),this.changeObservers.push(o),o}observeWithComponent(t,o,r){this.changeObserverFlags.push(t);let i=()=>{Cr.benchmarkSkipRendering||o.setState(r())};return this.changeObservers.push(i),i}removeObserver(t){if(this.inSignalAllObservers){this.observersToRemove.push(t);return}let o=this.changeObservers.indexOf(t);o!==-1&&(this.changeObserverFlags.splice(o,1),this.changeObservers.splice(o,1))}signalAllObservers(){if(!this.changes)return;let t=this.changes,o=this.changeObserverFlags,r=this.changeObservers;this.inSignalAllObservers=!0;for(let i=0;i<o.length;i++){let n=o[i];for(let a of n)if(t.has(a)){r[i]();break}}if(this.inSignalAllObservers=!1,this.observersToRemove.length>0){for(let i of this.observersToRemove)this.removeObserver(i);this.observersToRemove.length=0}this.changes.clear()}signalObserversFor(...t){let o=new Set(t),r=this.changeObserverFlags,i=this.changeObservers;for(let n=0;n<r.length;n++){let a=r[n];for(let l of a)if(o.has(l)){i[n]();break}}o.forEach(n=>this.changes.delete(n))}};function pf(e){return e.userIsViewer?Vm:Cr.isAutomation||Cr.isTest?AI:e.acl.find(o=>o.user.id===e.userId)?.permissions??Vm}var Hs=class{constructor(t){this.aclPermissions=t}get canDesign(){return this.aclPermissions.canDesign==="on"}get canEditContent(){return this.aclPermissions.canEditContent==="on"}get canPublish(){return this.aclPermissions.canPublish==="on"}get canEditSiteSettings(){return this.canDesign&&this.canEditContent&&this.canPublish}get canPublishToStaging(){return this.canDesign||this.canEditContent||this.canPublish}get canInviteCollaborators(){return this.canDesign||this.canEditContent||this.canPublish}get canEditVariables(){return this.canDesign}get canAddCollections(){return this.canDesign}get canEditAnalytics(){return this.canDesign||this.canEditContent}get canEditLocales(){return this.canDesign}get canEditLocalizedValues(){return this.canEditContent}get canSendDiffs(){return this.canDesign||this.canEditContent}},T$=Hy({canDesign:"Design",canEditContent:"Content",canPublish:"Deploy",canEditSiteSettings:"Design and Content and Deploy",canPublishToStaging:"Design or Content or Deploy",canInviteCollaborators:"Design or Content or Deploy",canEditVariables:"Design",canAddCollections:"Design",canEditAnalytics:"Design or Content",canEditLocales:"Design",canEditLocalizedValues:"Content",canSendDiffs:"Design or Content"});function b$(e){let t=pf(e);return new Hs(t)}var uf=e=>[e.chromeStore,e.projectStore,e.sessionStore],hd=([e,t,o])=>({userIsViewer:e.userIsViewer,acl:t.acl,userId:o.user.id});function I$(e,t,o,{signal:r}){let i=uf(e),n=hd(i),a=t.changes.observe(...i,()=>{let l=hd(i);jr(n,l)||(n=l,o(l))});r.addEventListener("abort",()=>{t.changes.removeObserver(a)},{once:!0})}function P$(){let e=PS();return C(mf(e),"Expected OnPageEngine"),e}function mf(e){return e.name==="OnPageEngine"}var BV=e=>[e.loadingStore,...uf(e)],ff=([e,...t])=>({isReady:e.isReady,...hd(t)});function oE(e,t){if(!e.isReady||e.userIsViewer)return!0;let o=pf(e);return!new Hs(o)[t]}function Gs(e,t){return pa(e)?oE(ff(BV(e.stores)),t):!mf(e)}function F$(e,t,o,{signal:r}){let i=BV(e),n=ff(i),a=t.changes.observe(...i,()=>{let l=ff(i);jr(n,l)||(n=l,o(l))});r.addEventListener("abort",()=>{t.changes.removeObserver(a)},{once:!0})}var HV=class extends Fr{constructor(o,r){super();this.addChanges=o;this.effectsStore=r;k(this,"update",0);k(this,"tooltip");k(this,"shapeToolActive",!1);k(this,"feedbackModeActive",!1);k(this,"handle",null);k(this,"straightLineAnchorIndex",0);k(this,"proseMirrorView",null);k(this,"proseMirrorState",null);k(this,"textLink",null);k(this,"editedTextLink");k(this,"stackInsertionIndicator",null);k(this,"replaceableFloatingPositionNode",null);k(this,"activeTool",0);k(this,"nodeInTextEditorId",_t);k(this,"nodeInPathEditorOffset",null);k(this,"dragAndDropPlaceholders",null);k(this,"codeComponentInProgressInsertionIndicatorNodeIDs",new Set)}get tool(){return this.activeTool}postProcess(o){this.update=o}get isDefaultToolActive(){return this.tool===0||this.tool===1}updateDragAndDropPlaceholder(o){if(o){let r=o.cache.placeholders,i=r?{id:o.id,placeholders:r}:null;if(Sr(i,this.dragAndDropPlaceholders))return;this.dragAndDropPlaceholders=i}else this.dragAndDropPlaceholders=null}setTool(o){vc.canEditTree(o)&&o!==6&&this.effectsStore.exitPreview(),this.shapeToolActive=nE(o),aE(o)||(this.feedbackModeActive=!1),this.tool===6&&o!==6&&this.addChanges("ExitMove"),this.tool!==o&&this.addChanges("Tool"),this.activeTool=o}};function iE(e){switch(e){case 32:case 21:case 10:case 22:case 24:case 23:case 25:case 12:case 11:case 20:case 13:case 19:case 14:case 48:case 30:case 31:case 42:case 47:case 28:case 41:case 29:case 26:return!1;case 43:case 44:case 15:case 17:case 16:case 18:case 1:case 39:case 35:case 45:case 0:case 46:case 9:case 40:case 6:case 33:case 3:case 36:case 38:case 7:case 27:case 8:case 37:case 49:case 2:case 50:case 34:case 4:case 5:return!0;default:_(e)}}function nE(e){switch(e){case 32:case 43:case 44:case 21:case 10:case 22:case 24:case 23:case 25:case 12:case 11:case 20:case 13:case 19:case 14:case 48:case 1:case 39:case 35:case 45:case 0:case 46:case 42:case 47:case 40:case 6:case 33:case 3:case 38:case 7:case 27:case 28:case 29:case 30:case 31:case 8:case 37:case 49:case 2:case 41:case 26:case 50:case 34:case 4:case 5:return!1;case 15:case 17:case 16:case 18:case 9:case 36:return!0;default:_(e)}}function aE(e){switch(e){case 43:case 44:case 3:case 4:case 5:return!0;case 0:case 1:case 2:case 6:case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 45:case 50:case 34:case 46:case 47:return!1;default:_(e)}}function $$(e){switch(e){case 4:case 5:return!0;case 0:case 1:case 2:case 3:case 6:case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 50:case 34:case 46:case 47:return!1;default:_(e)}}function GV(e){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 43:case 44:case 50:case 47:return!0;case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 45:case 34:case 46:return!1;default:_(e)}}function _$(e){switch(e){case 3:case 4:case 47:return!0;case 5:case 6:case 0:case 1:case 2:case 43:case 44:case 50:case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 45:case 34:case 46:return!1;default:_(e)}}function $V(e){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 50:return!0;case 43:case 44:case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 45:case 34:case 46:case 47:return!1;default:_(e)}}function j$(e,t){return e.stores.historyStore.isLoadingDocument?t===47:Gs(e,"canDesign")?GV(t):e.stores.chromeStore.isPreviewingFeaturedTemplate?$V(t):!0}function U$(e,t){return t==="VectorSet"?iE(e):!(t==="WebPage"&&e===42)}function J$(e,t){if(Gs(e,"canDesign")&&!GV(t))throw Error("Viewer mode: Tool "+t+" is a forbidden action.");if(e.stores.chromeStore.isPreviewingFeaturedTemplate&&!$V(t))throw Error("Previwing template mode: Tool "+t+" is a forbidden action.")}var X$=e=>e===20||e===21||e===22||e===24||e===23||e===25||e===19;function Z$(e){return e===8||e===7||e===49||e===33||e===35}var sE={0:!0,1:!0,2:!0,3:!0,4:!0,6:!0,5:!0};function Q$(e){return K(e)&&sE[e]===!0}var hf=new Map;function t_(e,t){hf.set(e,t)}function o_(e){hf.delete(e)}function _V(e){hf.get(e)?.()}var lE="__page_input";function cE(e){return`${lE}_${e}`}function gd(e){let t=cE(e);_V(t)}function jV(e){return le(e)||J(e)}function dE(e){if(e.length>=255)throw new TypeError("Alphabet too long");let t=new Uint8Array(256);for(let c=0;c<t.length;c++)t[c]=255;for(let c=0;c<e.length;c++){let d=e.charAt(c),u=d.charCodeAt(0);if(t[u]!==255)throw new TypeError(d+" is ambiguous");t[u]=c}let o=e.length,r=e.charAt(0),i=Math.log(o)/Math.log(256),n=Math.log(256)/Math.log(o);function a(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let d=0,u=0,f=0,y=c.length;for(;f!==y&&c[f]===0;)f++,d++;let v=(y-f)*n+1>>>0,b=new Uint8Array(v);for(;f!==y;){let B=c[f],H=0;for(let A=v-1;(B!==0||H<u)&&A!==-1;A--,H++)B+=256*b[A]>>>0,b[A]=B%o>>>0,B=B/o>>>0;if(B!==0)throw new Error("Non-zero carry");u=H,f++}let x=v-u;for(;x!==v&&b[x]===0;)x++;let D=r.repeat(d);for(;x<v;++x)D+=e.charAt(b[x]);return D}function l(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let d=0,u=0,f=0;for(;c[d]===r;)u++,d++;let y=(c.length-d)*i+1>>>0,v=new Uint8Array(y);for(;d<c.length;){let B=c.charCodeAt(d);if(B>255)return;let H=t[B];if(H===255)return;let A=0;for(let Z=y-1;(H!==0||A<f)&&Z!==-1;Z--,A++)H+=o*v[Z]>>>0,v[Z]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");f=A,d++}let b=y-f;for(;b!==y&&v[b]===0;)b++;let x=new Uint8Array(u+(y-b)),D=u;for(;b!==y;)x[D++]=v[b++];return x}function s(c){let d=l(c);if(d)return d;throw new Error("Non-base"+o+" character")}return{encode:a,decodeUnsafe:l,decode:s}}var UV=dE;var gf="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",pE=UV(gf),uE=8/Math.log2(62),d_=e=>pE.encode(e).padStart(Math.ceil(e.length*uE),"0"),yd=(e=20)=>Array(e).fill(0).map(()=>gf[Math.floor(Math.random()*gf.length)]).join("");var mE=Ke("update-tree-cache-for-vekter");function fE(e,t){return t?hy(t)?t.has(e):t===e:!0}var yf=[];Object.freeze(yf);var Cf=[];Object.freeze(Cf);function hE(e,t,o,r){return ot(e)?We(e)?r??o??qe.identity():!o||!t?qe.identity():qe.boundingRectMatrix(o,t):o??qe.identity()}function gE(e,t,o,r,i,n,a,l){let s=e.root,c=s.cache,d=s.getLocale(n);c.visible=!0,c.lockedByParent=!1,c.renderId=s.id,Sd(c);let u=s.children;for(let f of u)if(!(l&&!fE(f.id,l))){if(Dr(f)){if(!f.isLoaded())continue;yE(e,f,s,t,o,r,i,d,a)}else Sf(e,f,s,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,null,yf,Cf,void 0,void 0,t,o,r,i,d,void 0,void 0,!1,a,void 0);Ra(s,f)}return e}function B_(e,t){return gE(e.treeStore.tree,e.layoutCache,e.treeStore.sandboxCollectionData,e.treeStore.sandboxVisibility,M.activeBundleHash,e.chromeStore.canvasLocaleId,e.effectStore.getState(),t)}function yE(e,t,o,r,i,n,a,l,s){let c=t.cache;c.visible=!0,c.lockedByParent=!1,c.renderId=t.id,c.parentRenderId=o.id,Sd(c);let d=t.children,{combinedVariableValueMap:u,combinedVariableControlMap:f}=t.combineVariableValueAndControlMaps(e,void 0,void 0,M,i,a,l),y=J(t);for(let v of d)Sf(e,v,t,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,null,yf,Cf,u,f,r,i,n,a,l,void 0,void 0,!1,s,y),Ra(t,v)}function Sf(e,t,o,r,i,n,a,l,s,c,d,u,f,y,v,b,x,D,B,H,A,Z,re,Ie,se,ke,ne,lt,pt){let U=t.cache,it=U.activeVekterLocale;U.activeVekterLocale=Ie;let{combinedVariableValueMap:ao,combinedVariableControlMap:so,combinedVariableMapsAreEqual:Ci}=t.combineVariableValueAndControlMaps(e,D,B,M,A,re,Ie),tr=bt(t),Hr=tr?A.isEmpty(t.id):!1,[Qe,he]=bE(e,t,o,a,l,H,A,Z);U.groundNodeAncestorId=se?.groundNodeId,U.masterAncestorId=c,U.replicaAncestorId=d,U.overlayAncestorId=u,U.formContainerAncestorId=y,U.tickerAncestorId=v;let Xt=i&&!!Qe,Gr=!se||qe.equals(U.groundNodeMatrix,se.groundNodeMatrix),or=!Eo(t)||U.layout===t.layout,Si=it===U.activeVekterLocale,So=Mu(t,se),Rt=!!lt?.nodes.has(t.id),vi=Rt===U.isEffectPreview&&Sr(lt?.effectIds??null,U.effectIds)&&(lt?.type??null)===U.effectType&&U.webPageEffect===pt,Xa=Au(t)||oe.equals(U.viewportRect,So);r||=xe(t);let Yn=or&&Si&&Xa&&vi&&Ci&&U.insideVariant===r&&U.visible===Xt&&U.collectionIsEmpty===Hr&&U.lockedByParent===n&&U.lastUpdate===t.update&&U.parentDirected===ke&&U.parentDirectedRowHeightFitContent===ne&&YV(t.cache.getRenderInstance(t.id),Qe)&&TE(t.cache.secondaryRenderInstances,he)&&lS(e,t)===U.usesLayoutTemplateRectForModuleIdentifier;if(Yn&&Gr)return;U.isEffectPreview=Rt,U.effectIds=lt?.effectIds??null,U.effectType=lt?.type??null,U.webPageEffect=pt,U.ancestorRepeaterIds=b,U.repeatedAncestorRepeaterIds=x;let Zt=!1;Zt&&Zt.cacheUpdated(),Yn?U.canvasRect=void 0:(Zt&&Zt.cacheReset(),U.reset(),U.groundNodeAncestorId=se?.groundNodeId,U.masterAncestorId=c,U.replicaAncestorId=d,U.overlayAncestorId=u,U.slotPropertyAncestorId=f,U.formContainerAncestorId=y,U.tickerAncestorId=v,U.activeVekterLocale=Ie,U.visible=Xt,U.collectionIsEmpty=Hr,U.insideVariant=r,U.lockedByParent=n,U.lastUpdate=t.update,U.parentDirected=ke,U.parentDirectedRowHeightFitContent=ne,U.viewportRect=So,U.layout=Eo(t)?t.layout:void 0,U.ancestorRepeaterIds=b,U.repeatedAncestorRepeaterIds=x,U.usesLayoutTemplateRectForModuleIdentifier=da(t)?t.usesLayoutTemplateRectForModuleIdentifier():void 0,Qe&&(U.renderId=t.id,Object.assign(U,Qe)),U.secondaryRenderInstances=he);let{parentRectByRenderIdForChildren:qn,parentMatrixByRenderIdForChildren:Il,parentUsesDOMRectForChildren:kg,groundNodeContextForChildren:Rg}=KV(e,t,s,se,H),Nl=t.children;if(!Nl)return;let xl=qt(t)?t.layout:void 0,Dg=Ot(t)&&t.gridRowHeightType==="fit",Vl=c;!Vl&&ir(t)&&(Vl=t.id);let Pl=d;!Pl&&uo(t)&&(Pl=t.id);let Lg=Cd(t,b);for(let Qn of Nl){if(!or)for(let[,wl]of Qn.cache.iterateRenderInstances())wl.parentRect=void 0;let on=tr&&Ca(e,Qn,t),Fg=on&&Hr,Ti=tr&&!on,Eg=Xe.isOn("visibilityFromSandbox")?Xt:on?!Fg&&Xt:Xt;Sf(e,Qn,t,r,Eg,Ar(t),qn,Il,kg,Vl,Pl,ot(t)?t.id:u,Yr(t)?t.id:f,Vo(t)?t.id:y,Li(t)?t.id:v,Lg,on?Cd(t,x):x,Ti?D:ao,Ti?B:so,H,A,Z,re,Ie,Rg,xl,Dg,lt,pt),Ra(t,Qn)}}function H_(e,t,o){let r=CE(e,o),i=e.root,n=i.cache;n.visible=!0,n.renderId=i.id,Sd(n);let a=i.children;for(let l of a){if(Dr(l)){if(!l.isLoaded())continue;SE(e,l,i,t,r)}else vf(e,l,i,new Map,new Map,!1,t,r,void 0,!1,void 0);Ra(i,l)}return r}function CE(e,t){let o=new Set,r=new Set;function i(a){r.has(a.id)||(o.add(a.id),r.add(a.id),a.children&&a.children.forEach(i))}function n(a){let l=a.id;for(;l&&!o.has(l);)o.add(l),l=e.getNode(l)?.parentid}for(let a of t){let l=e.getNode(a);l&&(n(l),l.children&&l.children.forEach(i))}return o}function Cd(e,t){return bt(e)?t.length===0?[e.id]:[...t,e.id]:t}function SE(e,t,o,r,i){let n=t.cache;n.visible=!0,n.renderId=t.id,n.parentRenderId=o.id,Sd(n);let a=t.children;for(let l of a)vf(e,l,t,new Map,new Map,!1,r,i,void 0,!1,void 0),Ra(t,l)}function vf(e,t,o,r,i,n,a,l,s,c,d){if(!l.has(t.id))return;let u=t.cache;if(u.parentDirected=s,u.parentDirectedRowHeightFitContent=c,u.viewportRect=Mu(t,d),!u.visible)return;for(let[H,A]of u.iterateRenderInstances()){let Z=A.parentRenderId;C(Z,"Missing `parentRenderId`"),A.parentRect=r.get(Z),A.parentMatrix=i.get(Z),A.parentDirectedRect=qV(t,H,o,a)}let{parentRectByRenderIdForChildren:f,parentMatrixByRenderIdForChildren:y,parentUsesDOMRectForChildren:v,groundNodeContextForChildren:b}=KV(e,t,n,d,a),x=t.children;if(!x)return;let D=qt(t)?t.layout:void 0,B=Ot(t)&&t.gridRowHeightType==="fit";for(let H of x)vf(e,H,t,f,y,v,a,l,D,B,b),Ra(t,H)}function vE(e,t){if(!t||!ye(e)||!ve(e))return;let o=new Map;for(let[r,i]of t){let n=i.originX??lm*i.width,a=i.originY??lm*i.height,l=qe.identity();Fv||(l=l.translate(e.left??0,e.top??0));let s=l.translate(n,a).multiplySelf(qe.identity().translate(i.x,i.y).multiplySelf(i.matrix)).translateSelf(-n,-a),c=qe.convertPointsWithClipping(s,oe.pointsAtOrigin({width:i.width,height:i.height}));o.set(r,{domRect:i,canvasCorners:c,canvasRect:oe.boundingRectFromPoints(c)})}return o}function KV(e,t,o,r,i){let n=t.cache,a=i.getRects(t.id);a&&(n.domRects=new Map(a));let l=da(t)&&!!n.usesLayoutTemplateRectForModuleIdentifier;l&&(n.layoutTemplateRects=vE(t,i.getLayoutTemplateRects(t.id))),n.groundNodeMatrix=r?.groundNodeMatrix??null;let s=da(t)&&t.usesDOMRectCached(),c=!(s||o),d=!!n.viewportRect||!Au(t),u,f=new Map,y=new Map;for(let[v,b]of n.iterateRenderInstances()){let{parentRect:x,parentMatrix:D,parentDirectedRect:B}=b,H=e.getParentSizeInfo(t,void 0,c,d,v),A=B??t.rect(H,c,void 0,v);f.set(v,A);let Z=t.originAdjustedMatrix(H,A,v),re=hE(t,x,D,r?.groundNodeMatrix),Ie;try{Ie=re.multiply(Z)}catch(lt){mE.reportErrorOncePerMinute(lt,{parentRect:x,frame:A,parentMatrix:re,transformMatrix:Z}),Ie=new DOMMatrix}let se=Ns(t)?Ie:qe.flatProjectionMatrix(Ie);y.set(v,se),b.matrix=Ie;let ke=e.convertCornerPointsToCanvas(t,!1,void 0,v);b.cornerPoints=ke;let ne=oe.boundingRectFromPoints(ke);if(b.canvasRect=ne,Xo(t)&&Zo(t)&&t.strokeEnabled){let lt=t.resolveValue("strokeWidth")??0;ne=oe.inflate(ne,lt/2)}l?ZV(b,n.getLayoutTemplateContainerRect()?.canvasRect??ne):ZV(b,ne),HI(v)&&(u=r??YS(t,A,{groundNodeId:t.id,groundNodeMatrix:se}))}return{parentRectByRenderIdForChildren:f,parentMatrixByRenderIdForChildren:y,parentUsesDOMRectForChildren:s,groundNodeContextForChildren:u}}function JV(e,t,o){if(Xe.isOn("visibilityFromSandbox"))return o.getVisible(t);let r=ot(e)&&!e.cache.overlayVisible;return e.isVisible()&&!Vi(e)&&!r}function YV(e,t){return!e&&!t?!0:!e||!t?!1:oe.equals(e.parentRect??null,t.parentRect??null)&&qe.equals(e.parentMatrix??null,t.parentMatrix??null)&&oe.equals(e.parentDirectedRect??null,t.parentDirectedRect??null)&&jr(e.collectionItemIds,t.collectionItemIds)&&e.collectionItemId===t.collectionItemId}function TE(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;for(let[o,r]of t){let i=e.get(o);if(!YV(r,i))return!1}return!0}function XV(e,t,o,r,i,n,a,l,s){return{parentRenderId:r,parentRect:n.get(r),parentMatrix:a.get(r),parentDirectedRect:qV(e,t,o,l),matrix:void 0,canvasRect:void 0,cornerPoints:void 0,collectionItemIds:s.getItemIds(t),collectionItemId:i,minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}}function bE(e,t,o,r,i,n,a,l){let s=new Map;if(bt(o)&&Ca(e,t,o))for(let[u,f]of o.cache.iterateRenderInstances()){let y=f.collectionItemIds;if(y)for(let v=0;v<y.length;v++){let b=y[v];if(!b)continue;let x=GI(u,o.id,b,v),D=Pm(x,t.id);JV(t,D,l)&&s.set(D,XV(t,D,o,u,b??f.collectionItemId,r,i,n,a))}}else for(let[u,f]of o.cache.iterateRenderInstances()){let y=Pm(u,t.id);JV(t,y,l)&&s.set(y,XV(t,y,o,u,f.collectionItemId,r,i,n,a))}let c=s.get(t.id);s.delete(t.id);let d=s.size>0?s:void 0;return[c,d]}function Sd(e){e.minX=1/0,e.maxX=-1/0,e.minY=1/0,e.maxY=-1/0}function ZV(e,t){e.minX=t.x,e.maxX=t.x+t.width,e.minY=t.y,e.maxY=t.y+t.height}function IE(e,t){e.minX>t.minX&&(e.minX=t.minX),e.maxX<t.maxX&&(e.maxX=t.maxX),e.minY>t.minY&&(e.minY=t.minY),e.maxY<t.maxY&&(e.maxY=t.maxY)}function Ra(e,t){for(let[,o]of t.cache.iterateRenderInstances()){let r=o.parentRenderId;C(r,"Missing `parentRenderId`");let i=e.cache.getRenderInstance(r);i&&IE(i,o)}}function qV(e,t,o,r){if(qt(o)&&Oi(e,o))return r.getRect(t)}function $s(e,t){if(E(e))return e;let o=[];for(let r of e)o.push(t.get(r)??r);return o.length>0?o:void 0}function zr(e,t){if(!ro(t))return null;let o=e.getNode(t.originalid);return C(o,"The original variant node should exist"),o}function NE(e,t,o){let r=Le.inheritedReplicaNode(e,t.replicaInfo.inheritsFrom),i=gn(t.replicaInfo.overrides,r?.replicaInfo.overrides);for(let n of o.walk()){let a=i[n.id];if(!a)continue;let{_deleted:l,itemsOrder:s,...c}=a;l?.forEach(d=>c[d]=void 0),e.current(n)?.set(c)}}function QV(e,t){let o=e.getNode(t.originalid),r=Le.getReplicaForTemplateNode(e,t);if(!o||!r||!xe(r))return[];if(!r.replicaInfo.inheritsFrom)return[o];let i=e.getNode(r.replicaInfo.inheritsFrom);if(!i)return[o];let n=Uo(i.id,o.id),a=e.getNode(n);return a?[o,a]:[o]}function ej(e,t,o,r){let i=Le.getReplicaForTemplateNode(e.tree,t);C(i,"replica should exist when moving node out of replica"),C(xe(i),"replica must be a variant"),NE(e.tree,i,o),t.isVisible()&&!o.isVisible()&&e.tree.current(o)?.set({visible:!0}),r.delete(t.id),r.add(o.id)}function Tf(e,t,o,r,i){if(!o||!r)return t.id;C(ht(o),"Fail to update variant nodes: parent must be a replica");let n=Le.getReplicaForTemplateNode(e.tree,o);if(C(n,"Fail to update variant nodes: replica should exist"),C(xe(n),"Fail to update variant nodes: replica must be an variant"),fc(e.tree,o)){e.tree.current(t)?.set({visible:!1});let l={visible:!0};ri(t)&&i&&(l.itemsOrder=$s(t.itemsOrder,i)),Es(e.tree,n,t.id,l)}return Uo(n.id,t.id)}function bf(e,t,o,r,i,n){let a=Tf(e,t,o,r,n);return i.delete(t.id),i.add(a),a}function tj(e,t,o){let r=QV(e.tree,t),i=QV(e.tree,o),n=r.find((a,l)=>!a.isVisible()||a.cache.visible===!0?!1:i[l]?.cache.visible??!1);n&&(e.tree.get(n.id)?.set({visible:!1}),t.set({visible:!0},e.tree,!0))}function eP(e,t,o){mc(e.tree,t).forEach(({replicaRoot:r})=>{if(Object.keys(r.replicaInfo.overrides).every(s=>!o.has(s)))return;let a={...r.replicaInfo},l={...a.overrides};a.overrides=l,o.forEach((s,c)=>{if(c in l){let d={...l[c]},u=d.itemsOrder;"itemsOrder"in d&&Array.isArray(u)&&(d.itemsOrder=$s(u,o)),l[s]=PV(d)}}),e.tree.get(r.id)?.set({replicaInfo:a})})}var xE={type:{type:qa.type,value:nu.type},variantId:{type:qa.variantId,value:void 0},pauseOffscreen:{type:qa.pauseOffscreen,value:nu.pauseOffscreen}},dj={type:"type",variantId:"variantId",pauseOffscreen:"pauseOffscreen"},VE={cycle:!0,set:!0};function tP(e){return R(e)&&e in VE}function mr(e){return aa(e)&&e.actionIdentifier==="framer/useSetVariant"}function oP(e){return e.controls.type?.value!=="set"?null:e.controls.variantId?.value??null}function pj(e){return Array.isArray(e)&&e.some(t=>mr(t)&&t.controls.type?.value==="set"&&!t.controls.variantId?.value)}function uj(e,t){return _S(e,mr,t)}function mj(e,t,o){let r=$S(t,mr,o),i=[];return r.forEach(n=>{switch(n.controls.type?.value){case"set":{let l=n.controls.variantId?.value;l&&i.push(l);break}case"cycle":{let l=e.getScopeNodeFor(t);if(!le(l))return;let s=l.getTopLevelVariants();if(s.length<=1)return;let c=e.getGroundNodeFor(t),d=s.findIndex(v=>v.id===c.id);if(d===-1)return;let u=d+1,f=u>=s.length?0:u,y=s[f];y&&i.push(y.id);break}}}),i}function fj(e){let t={};return Object.entries(e).forEach(([o,r])=>{t[o]=r?.value}),t}function PE(e,t){return!(e?.inputValue!==t?.inputValue||e?.delay!==t?.delay||e?.key!==t?.key)}function hj(e,t,o){let r=Array.isArray(e)?[...e]:[],i=r.findIndex(mr),n=r[i];if(mr(n)&&PE(n.meta,o)){let a={...n.controls,...rP(t)},l={...n,controls:a,meta:{...n.meta,...o}};r[i]=l}else{let a=wE(t,void 0,o);r.push(a)}return r}function rP(e){let t={};return Object.entries(e).forEach(([o,r])=>{t[o]={type:qa[o],value:r}}),t}function wE(e,t,o){let r=rP({...e}),i={identifier:t||jS(),actionIdentifier:"framer/useSetVariant",controls:{...xE,...r}};return o&&Object.assign(i,{meta:o}),i}function gj(e,t){let o={...e.controls,...t};return{...e,controls:o}}function iP(e,t){let o=t.get(e);return $l(o)?o:null}function If(e,t,o="transparent"){if(E(e))return o;if(!pn(e))return e;let r=kC(e);return(r?iP(r,t):null)?.light??o}function Ln(e,t,o,r=!1){if(pv(t)){e.has(t)||e.ensureEntityTypeRootNode(t);return}let i=r?Ic(o):vs(o);if(e.has(i))return;let n=new Ss({id:i});e.insertNode(n,t)}function kE(e,t){let o=e.tree.get(t);if(nt(o))return;let r=e.tree.get(o.parentid);if(!nt(r))return r.children?.findIndex(i=>i.id===t)}function wj(e,t,o){let r=e.tree.getEntityReferenceNode(t);if(nt(r))return;let i=vs(o),n=new Ss({id:i}),a=kE(e,r.id),l=$o(a)?a+1:void 0;e.tree.insertNode(n,r.parentid,l)}function kj(e,t){let o=e.tree.get(t);nt(o)||(e.tree.removeNode(o),RE(e,t))}function RE(e,t,o){let{isCodeFile:r=!1}=o??{},i=r?Ic(t):vs(t);e.tree.remove(i)}function vd(e,t){return e===Cn?Ic(t):vs(t)}function DE(e){return t=>xr(t)&&t.name===e}function nP(e,t){return e.children.find(DE(t))??null}function Wj(e,t){return e.children.find(o=>xr(o)&&o.getName()===t)??null}function Bj(e,t){let r=EE(e.tree,t).map(a=>e.tree.get(a));C(r.length>0,"unreferenced nodes parent node must exist");let i=r.flatMap(a=>a?.children??[]);if(!i||i.length===0)return;let n=LE[t];e.tree.beginAllowPartialScopeAccess();for(let a of i){if(!n(a))continue;let l=vd(t,a.id);if(e.tree.get(l))continue;let s=new Ss({id:l});e.tree.insertNode(s,t)}e.tree.endAllowPartialScopeAccess()}function aP(e){return Rc(e)&&e.save.type==="codeFile"}var LE={[Hu]:e=>nC(e),[$u]:e=>sC(e),[ju]:e=>rC(e),[Uu]:e=>oC(e),[Gu]:e=>aC(e)||iC(e)||Ul(e),[Cn]:e=>aP(e),[ys]:e=>le(e)||aP(e),[_u]:e=>$l(e),[Cs]:e=>ze(e),[ha]:e=>bo(e)},FE={[Hu]:Na,[$u]:Na,[ju]:Na,[Uu]:Na,[Gu]:Na,[Cn]:rm,[_u]:yb};function EE(e,t){return t===Cs||t===ha?[e.root.id]:t===ys?[e.root.id,rm]:[FE[t]]}var AE="__entity_input";function Hj(e,t){return`${AE}_${e}_${t?"popout":"panel"}`}function Nf(e){return dv(e)||xr(e)}function Gj(e,t,o){let r=o;for(let[i,n]of t.entries()){let a=i===t.length-1,l=e.getNode(r);if(!l||!Nf(l))return!1;let s=!1;for(let c of l.children){if(cC(c)&&n===c.getName())return!0;if(xr(c)&&n===c.getName()){if(a)return!0;s=!0,r=c.id;break}}if(!s)return!1}return!1}function xf(e){if(kv(e))return om(e.getName());let t=e.resolveValue("name");return Nc(e)&&t?om(t):"Unknown"}function Td(e,t,o){let r=ft(t)?t:OE(t);if(r.length===0)return o;let i=e.get(o);C(i&&Nf(i),"A reference must be in a folder.");for(let n of r){let a=nP(i,n);if(a){i=a;continue}i=e.insertNode(new Sb({name:n}),i.id)}return i.id}function iU(e,t){let o=e.tree.get(t);if(!xr(o))return"";let r=[o.name];for(let i of o.ancestors()){if(!xr(i))break;r.unshift(i.name)}return`/${r.join("/")}`}function ME(e,t,o){let r=e.tree.get(t);C(r,"Node must exist");let i=vd(o,t),n=e.tree.get(i),a=[xf(r)];if(n)for(let l of n.ancestors()){if(!xr(l))break;a.unshift(xf(l))}return a}function nU(e,t,o){return`/${ME(e,t,o).join("/")}`}function OE(e){return tm(e).slice(0,-1)}function aU(e,t,o,r){let i=tm(o);if(i.length===0)return;let n=i.pop(),a=Td(e.tree,o,r),l=r===Cn;return Ln(e.tree,a,t.id,l),t.set({name:n}),a}function Da(e){return ns(e)}function sP(e,t){if(!Io(t))return!1;let o=Bu(t.codeComponentIdentifier);if(!o)return!1;let r=e.getNode(o);return!!(r&&J(r))}function fU(e,t){let o=Bu(t.codeComponentIdentifier);C(o,"WebPageInstance should have a local canvas component id");let r=e.getNode(o);return C(r,"SmartComponentInstance should have a local WebPageNode"),C(J(r),"WebPageInstance its WebPageNode should be a web page"),r}var _s=(e,t)=>e.length===0?[]:typeof e[0]=="string"?t.withoutDescendants(t.getNodes(e)):e;function bd(e,t){let o=t.reactComponentForIdentifier(e.codeComponentIdentifier);return o?Kv(o.properties,e.getControlProps(o.properties)):{}}var zE={type:"None",source:"undefined"},lP=class extends Fr{constructor(){super(...arguments);k(this,"_stack",[]);k(this,"dismiss",()=>{this._stack=yr.pop(this._stack)});k(this,"isVisible",()=>this.active.type!=="None");k(this,"shouldBlockUndoRedo",(o,r)=>{switch(this.active.type){case"None":return!1;case"Variables":return!MV(o,r);case"LocaleSettings":return!OV(o,r);default:return!0}})}get stack(){return this._stack}get active(){return this._stack[this._stack.length-1]??zE}trackModalOpen({type:o,source:r}){Ct("modal_open",{modalType:o,source:r})}push(o){this._stack=yr.push(this._stack,o),this.trackModalOpen(o)}set(o){this._stack=[o],this.trackModalOpen(o)}dismissAll(){this._stack.length!==0&&(this._stack=[])}dismissModal(o){this._stack=yr.filter(this._stack,r=>r.type!==o)}displayComponentIsolationModal({source:o}){let r="componentIsolationModal",i="1";Cr.isAutomation||Cr.isE2E||Cr.isTest||localStorage.getItem(r)!==i&&(localStorage.setItem(r,i),setTimeout(()=>{this.scheduler.processWhenReady(()=>{this.set({type:"ComponentIsolationModal",source:o})})},0))}};function dP(e){if(R(e))return[e];if("id"in e)return[e.id];let t=[];for(let o of e)R(o)?t.push(o):t.push(o.id);return t}function js(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;let o=new Set(e);for(let r of t)if(!o.has(r))return!1;return!0}var pP=class extends Fr{constructor(o,r,i){super();this.guides=o;this.chromeStore=r;this.overlayStore=i;k(this,"_previousIds",[]);k(this,"_ids",[]);k(this,"_nodes",[]);k(this,"_isSticky",!1);k(this,"_commonGroundNode");k(this,"gradientStopId")}get ids(){return this._ids}get nodes(){return this._nodes}get isSticky(){return this._isSticky}get commonGroundNode(){return this._commonGroundNode}get commonGroundNodeId(){return this._commonGroundNode?.id??null}get previousIds(){return this._previousIds}set(o,r={}){let i=dP(o);if(js(this._ids,i))return;this._previousIds=this._ids,this._ids=i,this._isSticky=r.sticky??i.length>1,i.length>0&&this.guides.clearSelected();let{switchToLayers:a=!1,tree:l}=r;this.chromeStore.onCanvasSelectionChange(i,a),this.overlayStore.onCanvasSelectionChange(i,{tree:l})}toggle(o,{switchToLayers:r=!1}={}){let i=dP(o),n=new Set(this.ids);for(let a of i)n.has(a)?n.delete(a):n.add(a);this._ids=Array.from(n),this.chromeStore.onCanvasSelectionChange(this.ids,r),this.overlayStore.onCanvasSelectionChange(n,{toggle:!0})}clear(){this.set([])}updateNodes(o){let r=o.getNodes(this.ids),i=!sn(this.nodes,r);i&&(this._nodes=r),(i||this.commonGroundNode&&!o.isGroundNode(this.commonGroundNode))&&this.updateCommonGroundNode(o)}updateCommonGroundNode(o){let r;for(let i of this.nodes){let n=o.getGroundNodeFor(i);if(!r)r=n;else if(r!==n){r=void 0;break}}this._commonGroundNode=r}postProcess(o,r,i,n=this.gradientStopId,a=this._ids){this.gradientStopId=n;let l=[];for(let s of a){let c=o.getNode(s);if(c){o.isAncestorOfNode(c,r.id)&&l.push(s);continue}let d=i.getNode(s);if(!Kr(d))continue;let u=o.getNode(d.parentid);if(mo(u)){l.splice(0,l.length,u.id);break}}this.set(l,{tree:o}),this.updateNodes(o)}};function WE(e){let t=M.componentForIdentifier(e.codeComponentIdentifier);if(!t?.properties)return null;let o=Object.entries(t.properties).find(([,a])=>a&&a.title==="Variant"&&a.type==="enum");if(!o)return null;let[r,i]=o;if(i.options.length<=1)return null;let n=i.defaultValue??i.options[0];return R(n)?{key:r,control:i,defaultVariant:n}:null}function BE(e,{control:t}){let o=e.toLowerCase().trim(),i=(t.optionTitles??t.options).findIndex(a=>R(a)&&a.toLowerCase()===o);if(i===-1)return null;let n=t.options[i];return R(n)?n:null}function uP(e,t,o){let r={};for(let i of o.walk()){if(!$(i))continue;let n=WE(i);if(!n)continue;let a=BE(t,n);if(!a)continue;let l=i;if(Vt(i)&&(l=e.tree.getNode(i.originalid)),!l||(l.getRawControlProp(n.key)??n.defaultVariant)===a)continue;let c={type:"enum",value:a};r[l.id]={[dt(n.key)]:c}}return Object.keys(r).length>0?r:null}var mP=["blur","backgroundBlur","brightness","contrast","grayscale","hueRotate","invert","saturate","sepia"];var Id={left:"position",right:"position",top:"position",bottom:"position",centerAnchorX:"position",centerAnchorY:"position",constraintsLocked:"position",x:"position",y:"position",width:"size",widthType:"size",height:"size",heightType:"size",aspectRatio:"size",itemsOrder:"itemsOrder",layout:"layout",gap:"layout",gridAlignment:"layout",gridColumnCount:"layout",gridColumnWidthType:"layout",gridColumnWidth:"layout",gridColumnMinWidth:"layout",gridRowHeightType:"layout",gridRowHeight:"layout",gridRowCount:"layout",stackDirection:"layout",stackDistribution:"layout",stackAlignment:"layout",stackWrapEnabled:"layout",gridType:"layout",gridItemFillCellWidth:"size",gridItemFillCellHeight:"size",gridItemHorizontalAlignment:"position",gridItemVerticalAlignment:"position",gridItemColumnSpan:"size",gridItemRowSpan:"size",minHeight:"sizeConstraints",minWidth:"sizeConstraints",maxHeight:"sizeConstraints",maxWidth:"sizeConstraints",paragraphSpacing:"paragraphSpacing",position:"positionType",positionStickyTop:"positionType",positionStickyRight:"positionType",positionStickyBottom:"positionType",positionStickyLeft:"positionType",intrinsicWidth:"intrinsicSize",intrinsicHeight:"intrinsicSize",fillColor:"fill",fillEnabled:"fill",fillImage:"fill",fillImageOriginalName:"fill",fillImagePixelHeight:"fill",fillImagePixelWidth:"fill",fillImageResize:"fill",fillImagePositionX:"fill",fillImagePositionY:"fill",fillImageTileSize:"fill",fillType:"fill",fillRadialGradient:"fill",fillLinearGradient:"fill",fillConicGradient:"fill",tapHighlightColor:"tapHighlight",textSelection:"textSelection",masks:"mask",radius:"radius",radiusBottomLeft:"radius",radiusBottomRight:"radius",radiusIsRelative:"radius",radiusPerCorner:"radius",radiusTopLeft:"radius",radiusTopRight:"radius",borderTop:"border",borderBottom:"border",borderLeft:"border",borderRight:"border",borderEnabled:"border",borderWidth:"border",borderStyle:"border",borderColor:"border",borderPerSide:"border",rotation:"rotation",rotate3d:"rotation",rotateX:"rotation",rotateY:"rotation",blendingMode:"blending",opacity:"opacity",backgroundBlur:"backgroundBlur",overflow:"overflow",overflowY:"overflowY",overflowX:"overflowX",overscrollBehavior:"overscroll",visible:"visibility",brightness:"brightness",contrast:"contrast",grayscale:"grayscale",hueRotate:"hueRotate",invert:"invert",saturate:"saturate",sepia:"sepia",blur:"blur",boxShadows:"shadows",shadows:"shadows",guidesX:"canvasSettings",guidesY:"canvasSettings",exportOptions:"canvasSettings",overlayGrid:"canvasSettings",gesture:"canvasSettings",sizeToFit:"canvasSettings",framePreset:"canvasSettings",isVariant:"canvasSettings",onTap:"action",onTapStart:"action",onClick:"action",onMouseUp:"action",onMouseDown:"action",onMouseEnter:"action",onMouseLeave:"action",onAppear:"action",onKeyDown:"action",padding:"padding",paddingPerSide:"padding",paddingTop:"padding",paddingRight:"padding",paddingBottom:"padding",paddingLeft:"padding",name:"name",strokeEnabled:"stroke",strokeAlignment:"stroke",strokeWidth:"stroke",strokeColor:"stroke",lineJoin:"stroke",lineCap:"stroke",strokeMiterLimit:"stroke",strokeDashArray:"stroke",strokeDashOffset:"stroke",html:"richText",htmlLocalized:"richText",htmlContent:"richText",textFitScale:"richText",textFitViewBoxSize:"richText",textFitViewBoxSizeLocalized:"richText",stylePresetHeading1:"stylePresets",stylePresetHeading2:"stylePresets",stylePresetHeading3:"stylePresets",stylePresetHeading4:"stylePresets",stylePresetHeading5:"stylePresets",stylePresetHeading6:"stylePresets",stylePresetParagraph:"stylePresets",stylePresetLink:"stylePresets",stylePresetAnchorLink:"stylePresets",stylePresetBlockquote:"stylePresets",stylePresetTable:"stylePresets",stylePresetInlineCode:"stylePresets",stylePresetImage:"stylePresets",anchorLinkOffsetY:"anchorLinkOffsetY",styledText:"styledText",getStyledText:"styledText",font:"font",rootFontSize:"rootFontSize",textColor:"textColor",textBackgroundColor:"textBackgroundColor",textBackgroundRadius:"textBackgroundRadius",textBackgroundPadding:"textBackgroundPadding",fontSize:"fontSize",letterSpacing:"letterSpacing",textTransform:"textTransform",textDecoration:"textDecoration",textDecorationColor:"textDecoration",textDecorationThickness:"textDecoration",textDecorationStyle:"textDecoration",textDecorationSkipInk:"textDecoration",textDecorationOffset:"textDecoration",lineHeight:"lineHeight",textAlignment:"textAlignment",textStrokeWidth:"textStroke",textStrokeColor:"textStroke",textWrapBalance:"textWrapBalance",openTypeFontFeatures:"openTypeFontFeatures",link:"link",linkOpenInNewTab:"link",linkSmoothScroll:"link",linkClickTrackingId:"link",linkLocalized:"link",linkRelValues:"link",linkPreserveParams:"link",getLink:"link",linkFont:"linkStyle",linkTextColor:"linkStyle",linkFontSize:"linkStyle",linkTextTransform:"linkStyle",linkTextDecoration:"linkStyle",linkTextDecorationColor:"linkStyle",linkTextDecorationThickness:"linkStyle",linkTextDecorationStyle:"linkStyle",linkTextDecorationSkipInk:"linkStyle",linkTextDecorationOffset:"linkStyle",linkTextBackgroundColor:"linkStyle",linkTextBackgroundRadius:"linkStyle",linkTextBackgroundPadding:"linkStyle",linkHoverFont:"linkStyle",linkHoverTextColor:"linkStyle",linkHoverFontSize:"linkStyle",linkHoverTextTransform:"linkStyle",linkHoverTextDecoration:"linkStyle",linkHoverTextDecorationColor:"linkStyle",linkHoverTextDecorationThickness:"linkStyle",linkHoverTextDecorationStyle:"linkStyle",linkHoverTextDecorationSkipInk:"linkStyle",linkHoverTextDecorationOffset:"linkStyle",linkHoverTextBackgroundColor:"linkStyle",linkHoverTextBackgroundRadius:"linkStyle",linkHoverTextBackgroundPadding:"linkStyle",linkCurrentFont:"linkStyle",linkCurrentTextColor:"linkStyle",linkCurrentFontSize:"linkStyle",linkCurrentTextTransform:"linkStyle",linkCurrentTextDecoration:"linkStyle",linkCurrentTextDecorationColor:"linkStyle",linkCurrentTextDecorationThickness:"linkStyle",linkCurrentTextDecorationStyle:"linkStyle",linkCurrentTextDecorationSkipInk:"linkStyle",linkCurrentTextDecorationOffset:"linkStyle",linkCurrentTextBackgroundColor:"linkStyle",linkCurrentTextBackgroundRadius:"linkStyle",linkCurrentTextBackgroundPadding:"linkStyle",textContent:"textContent",textVerticalAlignment:"textVerticalAlignment",variantTransition:"transition",pathSegments:"vectorPath",pathClosed:"vectorPath",spikeCount:"vectorPath",spikeDepth:"vectorPath",polygonSides:"vectorPath",elementId:"scrollTarget",scrollMarginTop:"scrollTarget",scrollTargetEnabled:"scrollTarget",altAttribute:"accessibility",altAttributeLocalized:"accessibility",cursor:"cursor",customCursorSmartComponentId:"customCursor",customCursorFollow:"customCursor",customCursorOffsetX:"customCursor",customCursorOffsetY:"customCursor",customCursorVariant:"customCursor",customCursorType:"customCursor",customCursorTransitionEnabled:"customCursor",customCursorTransition:"customCursor",customCursorPlacement:"customCursor",customCursorAlignment:"customCursor",pointerEvents:"pointerEvents",userSelect:"userSelect",zIndex:"zIndex",draggable:"draggable",imageRendering:"imageRendering",viewportHeight:"canvasSettings",isBreakpoint:"canvasSettings",backdropFill:"overlay",backdropFillEnabled:"overlay",backdropDismissible:"overlay",blockDocumentScrolling:"overlay",backdropExitTransition:"overlayTransition",backdropEnterTransition:"overlayTransition",backdropTransitionLocked:"overlayTransition",hideScrollbars:"scrollbars",customizations:"customizations",customizationsDescription:"customizations",customizationsSectionId:"customizations",customizationsCategory:"customizations",customizationsRules:"customizations",isApplyingCustomizations:"customizations",translateZ:"translateZ",scale:"scale",skewX:"skew",skewY:"skew",backfaceVisibility:"backfaceVisibility",perspective:"perspective",transformStylePreserve3d:"transformStylePreserve3d",transformOriginX:"transformOrigin",transformOriginY:"transformOrigin",transition:"transition",formInputFontSize:"formInputFont",formInputFontFamily:"formInputFont",formInputFontSelector:"formInputFont",formInputFontWeight:"formInputFont",formInputFontStyle:"formInputFont",formInputPlaceholderColor:"formPlaceholderColor",formInputFontColor:"formInputColor",formInputFontLetterSpacing:"formInputFont",formInputFontLetterSpacingUnit:"formInputFont",formInputFontLineHeight:"formInputFont",formInputFontLineHeightUnit:"formInputFont",formInputFontTextAlignment:"formInputFont",formInputOpenTypeFontFeatures:"formInputFont",formTextInputType:"formTextInputType",formTextAreaResizable:"formInputTextAreaResize",formTextInputMinNumber:"formTextInputTypeMin",formTextInputMaxNumber:"formTextInputTypeMax",formInputMaxLength:"formInputMaxLength",formInputStep:"formInputStep",formBooleanInputType:"formBooleanInputType",formBooleanInputValue:"formBooleanInputValue",formBooleanInputCheckedBorderColor:"formBooleanInputCheckedEffect",formBooleanInputCheckedBorderWidth:"formBooleanInputCheckedEffect",formBooleanInputCheckedBorderStyle:"formBooleanInputCheckedEffect",formBooleanInputCheckedBoxShadow:"formBooleanInputCheckedEffect",formBooleanInputCheckedFillColor:"formBooleanInputCheckedEffect",formBooleanInputCheckedTransition:"formBooleanInputCheckedEffect",formInputFocusedBackgroundColor:"formInputFocusedFill",formInputFocusedBorderColor:"formInputFocusedBorder",formInputFocusedBorderStyle:"formInputFocusedBorder",formInputFocusedBorderWidth:"formInputFocusedBorder",formInputFocusedBoxShadow:"formInputFocusedBoxShadow",formInputFocusedTransition:"formInputFocusedTransition",formInputInvalidTextColor:"formInputInvalidTextColor",formInputIconImage:"formInputIcon",formInputIconColor:"formInputIcon",viewTransitionNone:"viewTransitionNone"};function $U(e){let t=[],o;for(o in Id){let r=Id[o];e.includes(r)&&t.push(o)}return t}function fP(e,t){let o=M.componentForIdentifier(t.codeComponentIdentifier);if(!o?.properties)return{};let r={};return Object.entries(o.properties).forEach(([i,n])=>{if(!n||jo(t)&&n.type==="slot")return;let a=dt(i),l=e[a];El(l)&&l.type&&pS(n.type,l.type)&&(n.type==="enum"&&!Uy(n,l.value)||(r[a]=l))}),r}function q(e,t){return t?new Set(ft(t)?t:[t]).has(e):!0}function Nd(e,t,o,r,i,n){let a=e.getScopeNodeFor(o);function l(c){return!j(c)||a&&qr(a)&&a.hasVariable(c.id)?c:i?.[c.id]??c}let s={};if(QS(e,o)||_e(t)&&(t.widthType===4&&(s.widthType=1),t.heightType===4&&(s.heightType=1)),q("visibility",n)&&cr(t)&&cr(o)&&(s.visible=l(t.visible)),q("border",n)&&ii(t)&&ii(o)&&(s.borderEnabled=t.borderEnabled,s.borderWidth=t.borderWidth,s.borderColor=t.borderColor,s.borderStyle=t.borderStyle,s.borderPerSide=t.borderPerSide,s.borderLeft=t.borderLeft,s.borderTop=t.borderTop,s.borderRight=t.borderRight,s.borderBottom=t.borderBottom),q("border",n)&&ii(t)&&Zo(o))if(z(t.borderEnabled)){let c=t.resolveValue("borderEnabled");_y(c)?(s.strokeEnabled=!0,s.strokeWidth=c.borderWidth,s.strokeColor=c.borderColor):s.strokeEnabled=!1}else s.strokeEnabled=t.borderEnabled,s.strokeWidth=t.borderWidth,s.strokeColor=t.borderColor;if(q("stroke",n)&&Zo(t)&&Zo(o)&&(s.strokeEnabled=t.strokeEnabled,s.strokeColor=t.strokeColor,s.strokeWidth=t.strokeWidth,s.strokeAlignment=t.strokeAlignment,s.lineJoin=t.lineJoin,s.lineCap=t.lineCap,s.strokeMiterLimit=t.strokeMiterLimit,s.strokeDashArray=t.strokeDashArray,s.strokeDashOffset=t.strokeDashOffset),q("stroke",n)&&Zo(t)&&ii(o)&&(s.borderEnabled=t.strokeEnabled,s.borderWidth=t.resolveValue("strokeWidth"),s.borderColor=t.resolveValue("strokeColor")),q("formInputTextAreaResize",n)&&IC(t)&&(s.formTextAreaResizable=t.formTextAreaResizable),q("formInputFocusedFill",n)&&oi(t)&&oi(o)&&(s.formInputFocusedBackgroundColor=t.formInputFocusedBackgroundColor),q("formInputFocusedBorder",n)&&oi(t)&&oi(o)&&(s.formInputFocusedBorderColor=t.formInputFocusedBorderColor,s.formInputFocusedBorderWidth=t.formInputFocusedBorderWidth,s.formInputFocusedBorderStyle=t.formInputFocusedBorderStyle),q("formInputFocusedBoxShadow",n)&&oi(t)&&oi(o)&&(s.formInputFocusedBoxShadow=t.formInputFocusedBoxShadow?[...t.formInputFocusedBoxShadow]:void 0),q("formInputFocusedTransition",n)&&oi(t)&&oi(o)&&(s.formInputFocusedTransition=t.formInputFocusedTransition),q("formInputColor",n)&&Vn(t)&&Vn(o)&&(s.formInputFontColor=t.formInputFontColor),q("formPlaceholderColor",n)&&Tm(t)&&Tm(o)&&(s.formInputPlaceholderColor=t.formInputPlaceholderColor),q("formInputPadding",n)&&xo(t)&&xo(o)&&(s.padding=t.padding,s.paddingPerSide=t.paddingPerSide,s.paddingTop=t.paddingTop,s.paddingRight=t.paddingRight,s.paddingBottom=t.paddingBottom,s.paddingLeft=t.paddingLeft),q("shadows",n)&&dn(t)&&dn(o)){let c=l(t.boxShadows);PC(o)?s.boxShadows=c:z(c)||(s.boxShadows=c?.filter(d=>d.type!=="realistic"))}if(q("shadows",n)&&bu(t)&&bu(o)&&(s.shadows=t.shadows),q("rotation",n)&&Jo(t)&&Jo(o)&&(s.rotation=t.rotation,eo(o)&&eo(t)&&(s.rotate3d=t.rotate3d,s.rotateX=t.rotateX,s.rotateY=t.rotateY)),q("overflow",n)&&Ao(t)&&Ao(o)&&(s.overflow=l(t.overflow)),q("overscroll",n)&&as(t)&&as(o)&&(s.overscrollBehavior=l(t.overscrollBehavior)),q("cursor",n)&&mn(t)&&mn(o)&&(s.cursor=l(t.cursor)),q("customCursor",n)&&mn(t)&&mn(o)&&(s.customCursorType=t.customCursorType,s.customCursorSmartComponentId=t.customCursorSmartComponentId,s.customCursorVariant=t.customCursorVariant,s.customCursorFollow=t.customCursorFollow,s.customCursorOffsetX=t.customCursorOffsetX,s.customCursorOffsetY=t.customCursorOffsetY,s.customCursorTransitionEnabled=t.customCursorTransitionEnabled,s.customCursorTransition=t.customCursorTransition,s.customCursorPlacement=t.customCursorPlacement,s.customCursorAlignment=t.customCursorAlignment),bs(t)&&bs(o))for(let c of mP){let d=Id[c];q(d,n)&&(s[c]=l(t[c]))}if(q("blending",n)&&yu(t)&&yu(o)&&(s.blendingMode=l(t.blendingMode)),q("transition",n)&&xs(t)&&xs(o)){let c=xe(t)?t.variantTransition:t.transition;xe(o)?s.variantTransition=c:s.transition=c}if(q("fill",n)&&Mo(t)&&Mo(o)){s.fillColor=l(t.fillColor),s.fillType=t.fillType,s.fillLinearGradient=t.fillLinearGradient,s.fillRadialGradient=t.fillRadialGradient,s.fillConicGradient=t.fillConicGradient,s.fillType==="conic-gradient"&&!jC(o)&&(s.fillType=o.fillType??"color");let c=l(t.fillImage);z(c)?z(c)&&o.supportsDynamicValues()&&(s.fillImage=c):s.fillImage=c,s.fillImageResize=t.fillImageResize,s.fillImagePixelWidth=t.fillImagePixelWidth,s.fillImagePixelHeight=t.fillImagePixelHeight,s.fillImagePositionX=t.fillImagePositionX,s.fillImagePositionY=t.fillImagePositionY,s.fillImageTileSize=t.fillImageTileSize}if(q("fill",n)&&_o(t)&&_o(o)&&(s.fillEnabled=t.fillEnabled),(q("size",n)||q("fill",n))&&_e(t)&&_e(o)){let c=s.fillType??(Mo(o)?o.fillType:void 0),d=s.heightType??o.heightType;(s.widthType??o.widthType)===5&&c!=="image"&&(s.width=o.rect().width,s.widthType=0),d===5&&c!=="image"&&(s.height=o.rect().height,s.heightType=0)}if(q("opacity",n)&&sm(t)&&sm(o)&&(s.opacity=l(t.opacity)),q("radius",n)&&Lr(t)&&Lr(o)&&(s.radius=l(t.radius),Ku(t)&&Ku(o)&&(s.radiusIsRelative=t.radiusIsRelative),ti(t)&&ti(o)&&(s.radiusPerCorner=t.radiusPerCorner,s.radiusBottomLeft=t.radiusBottomLeft,s.radiusBottomRight=t.radiusBottomRight,s.radiusTopLeft=t.radiusTopLeft,s.radiusTopRight=t.radiusTopRight)),q("pointerEvents",n)&&Su(t)&&Su(o)&&!ct(a)&&(s.pointerEvents=l(t.pointerEvents)),q("draggable",n)&&Is(t)&&Is(o)&&(s.draggable=l(t.draggable)),q("userSelect",n)&&ss(t)&&ss(o)&&(s.userSelect=l(t.userSelect)),q("imageRendering",n)&&Cu(t)&&Cu(o)&&(s.imageRendering=l(t.imageRendering)),q("overflowX",n)&&Ao(t)&&Ao(o)&&(s.overflowX=l(t.overflowX)),q("overflowY",n)&&Ao(t)&&Ao(o)&&(s.overflowY=l(t.overflowY)),q("zIndex",n)&&Lu(t)&&Lu(o)&&(s.zIndex=l(t.zIndex)),q("scrollbars",n)&&Ds(t)&&Ds(o)&&(s.hideScrollbars=l(t.hideScrollbars)),q("textVerticalAlignment",n)&&Ls(t)&&Ls(o)&&(s.textVerticalAlignment=t.textVerticalAlignment),q("textWrapBalance",n)&&qu(t)&&qu(o)&&(s.textWrapBalance=t.textWrapBalance),q("styledText",n)&&Me(t)&&lc(o)){s.font=t.getFonts(!1)[0],s.textColor=t.getTextColors(!1)[0];let c=t.getFontSizes(!1)[0];s.fontSize=Fi(c)?c[0]:c;let d=t.getLetterSpacings(!1)[0];s.letterSpacing=E(d)?d:YC(d),s.textTransform=t.getTextTransforms(!1)[0],s.textDecoration=t.getTextDecorations(!1)[0],s.lineHeight=t.getLineHeights(!1)[0],s.textAlignment=t.getTextAlignments(!1)[0],s.styledText=o.styledText.setFont(void 0,!1).setTextColor(void 0,!1).setFontSize(void 0,!1).setLetterSpacing(void 0,!1).setTextTransform(void 0,!1).setTextDecoration(void 0,!1).setLineHeight(void 0).setTextAlignment(void 0)}if(q("link",n)&&Me(t)&&Me(o)&&(s.linkFont=t.linkFont,s.linkTextColor=t.linkTextColor,s.linkFontSize=t.linkFontSize,s.linkTextTransform=t.linkTextTransform,s.linkTextDecoration=t.linkTextDecoration,s.linkHoverFont=t.linkHoverFont,s.linkHoverTextColor=t.linkHoverTextColor,s.linkHoverFontSize=t.linkHoverFontSize,s.linkHoverTextTransform=t.linkHoverTextTransform,s.linkHoverTextDecoration=t.linkHoverTextDecoration,s.linkCurrentFont=t.linkCurrentFont,s.linkCurrentTextColor=t.linkCurrentTextColor,s.linkCurrentFontSize=t.linkCurrentFontSize,s.linkCurrentTextTransform=t.linkCurrentTextTransform,s.linkCurrentTextDecoration=t.linkCurrentTextDecoration),q("mask",n)&&Xu(t)&&Xu(o)&&(s.masks=t.masks),De(t)&&De(o)){if(q("fontSize",n)&&(s.textFitScale=t.textFitScale,s.textFitViewBoxSize=t.textFitViewBoxSize),q("paragraphSpacing",n)&&(s.paragraphSpacing=t.paragraphSpacing),q("styledText",n)){let c=t.getTextStrokeWidths(!1)[0],d=t.getTextStrokeColors(!1)[0];E(c)||(s.textStrokeWidth=c),d&&(s.textStrokeColor=d)}if(q("richText",n))for(let c of Qb){let d=t[c];e.has(d)&&(s[c]=d)}}if(q("codeComponentProps",n)&&Io(t)&&Io(o)){let c=fP(t,o);Object.assign(s,c)}if(q("codeOverride",n)&&Ei(t)&&Ei(o)&&(s.codeOverrideEnabled=t.codeOverrideEnabled,s.codeOverrideIdentifier=t.codeOverrideIdentifier),q("formInputFont",n)&&Vn(t)&&Vn(o)&&(s.formInputFontFamily=t.formInputFontFamily,s.formInputFontWeight=t.formInputFontWeight,s.formInputFontStyle=t.formInputFontStyle,s.formInputFontSize=t.formInputFontSize,s.formInputFontSelector=t.formInputFontSelector,s.formInputFontLetterSpacing=t.formInputFontLetterSpacing,s.formInputFontLetterSpacingUnit=t.formInputFontLetterSpacingUnit,s.formInputFontLineHeight=t.formInputFontLineHeight,s.formInputFontLineHeightUnit=t.formInputFontLineHeightUnit,s.formInputFontTextAlignment=t.formInputFontTextAlignment,s.formInputOpenTypeFontFeatures=t.formInputOpenTypeFontFeatures),q("layout",n)&&Pe(o)){let c=nr(t),d=qy(t);(c||d)&&(ro(o)||(s.layout=t.layout),s.gap=t.gap,s.padding=t.padding,s.paddingPerSide=t.paddingPerSide,s.paddingTop=t.paddingTop,s.paddingRight=t.paddingRight,s.paddingBottom=t.paddingBottom,s.paddingLeft=t.paddingLeft,c&&(s.stackDirection=t.stackDirection,s.stackDistribution=t.stackDistribution,s.stackAlignment=t.stackAlignment),d&&(s.gridAlignment=t.gridAlignment,s.gridColumnCount=t.gridColumnCount,s.gridColumnWidthType=t.gridColumnWidthType,s.gridColumnWidth=t.gridColumnWidth,s.gridColumnMinWidth=t.gridColumnMinWidth,s.gridRowHeightType=t.gridRowHeightType,s.gridRowHeight=t.gridRowHeight,s.gridRowCount=t.gridRowCount,s.gridType=t.gridType))}if(q("position",n)&&Object.assign(s,ya(t,r)),q("perspective",n)&&eo(t)&&eo(o)&&(s.perspective=l(t.perspective)),q("overlay",n)&&Ye(t)&&Ye(o)&&r){let c=Ai(t);Object.assign(s,c)}if(q("effects",n)&&Ps(t)&&Ps(o)&&Object.assign(s,AT(o,t)),q("transformOrigin",n)&&eo(t)&&eo(o)&&Object.assign(s,{transformOriginX:t.transformOriginX,transformOriginY:t.transformOriginY}),q("backfaceVisibility",n)&&eo(t)&&eo(o)&&Object.assign(s,{backfaceVisibility:t.backfaceVisibility}),q("transformStylePreserve3d",n)&&eo(t)&&eo(o)&&Object.assign(s,{transformStylePreserve3d:t.transformStylePreserve3d}),q("translateZ",n)&&eo(t)&&eo(o)&&Object.assign(s,{translateZ:t.translateZ}),q("scale",n)&&eo(t)&&eo(o)&&Object.assign(s,{scale:t.scale}),q("skew",n)&&eo(t)&&eo(o)&&Object.assign(s,{skewX:t.skewX,skewY:t.skewY}),q("formBooleanInputType",n)&&xn(t)&&xn(o)&&Object.assign(s,{formBooleanInputType:t.formBooleanInputType}),q("formBooleanInputValue",n)&&xn(t)&&xn(o)&&Object.assign(s,{formBooleanInputValue:t.formBooleanInputValue}),q("formBooleanInputCheckedEffect",n)&&xn(t)&&xn(o)){let c={formBooleanInputCheckedBorderColor:t.formBooleanInputCheckedBorderColor,formBooleanInputCheckedBorderWidth:t.formBooleanInputCheckedBorderWidth,formBooleanInputCheckedBorderStyle:t.formBooleanInputCheckedBorderStyle,formBooleanInputCheckedFillColor:t.formBooleanInputCheckedFillColor,formBooleanInputCheckedBoxShadow:t.formBooleanInputCheckedBoxShadow,formBooleanInputCheckedTransition:t.formBooleanInputCheckedTransition};Object.assign(s,c)}return q("formInputIcon",n)&&vm(t)&&vm(o)&&Object.assign(s,{formInputIconImage:t.formInputIconImage,formInputIconColor:t.formInputIconColor}),q("viewTransitionNone",n)&&Vs(t)&&Vs(o)&&(s.viewTransitionNone=t.viewTransitionNone),s}var hP=e=>{let t=[];return e.forEach((o,r)=>{for(let i=r+1;i<e.length;i++){let n=e[i];t.push([o,n])}}),t};function gP(e,t,o){let r=t.map(u=>e.convertFrameToCanvas(u));if(r.length===2){let[u,f]=r,y=$E(u,f),v=_E(u,f);if(y&&!v)return"vertical";if(v&&!y)return"horizontal"}let i=r.map(u=>oe.center(u));if(i.length<=1){if(r.length===1){let[u]=r,f=o.width/Math.max(1,u.width),y=o.height/Math.max(1,u.height);return f<y?"vertical":"horizontal"}return o.width<o.height?"vertical":"horizontal"}let n=hP(i),a=[],l=[];n.forEach(([u,f])=>{a.push(Math.abs(u.x-f.x)),l.push(Math.abs(u.y-f.y))});let s=a.reduce((u,f)=>u+f,0),c=l.reduce((u,f)=>u+f,0);return s>c?"horizontal":"vertical"}function yP(e,t,o){return[...t].sort((r,i)=>{let n=e.tree.getRect(r),a=e.tree.getRect(i);return o==="horizontal"?n.x-a.x:n.y-a.y})}function HE(e){if(z(e))return!0;switch(e){case"start":case"center":case"end":return!0;default:return!1}}function Vf(e,t,o){let r=gP(e.tree,t,o),i=e.stores.persistedUserDefaults.layoutGap;return{layout:"stack",stackDirection:r,gap:i,stackDistribution:Yy,stackAlignment:Ol,stackWrapEnabled:!1,padding:0,paddingPerSide:!1,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}}function GE(e,t){t.forEach((o,r)=>{e.tree.moveNodeIndex(o,r)})}function CP(e,t,o,r,i){o==="horizontal"&&t.heightType===2||o==="vertical"&&t.widthType===2||SP(e,r,o,i,{})}function SP(e,t,o,r,i){if(o==="horizontal"||z(i.padding))return;let n={...r};if(i.paddingPerSide)i.paddingLeft&&(n.width-=i.paddingLeft),i.paddingRight&&(n.width-=i.paddingRight),i.paddingTop&&(n.height-=i.paddingTop),i.paddingBottom&&(n.height-=i.paddingBottom);else if(i.padding){let l=i.padding*2;n.width-=l,n.height-=l}n.width=Math.max(0,n.width),n.height=Math.max(0,n.height);let a=n.width;a>0&&t.forEach(l=>{if(!ye(l)||Ee(l)||lr(l)||io(l)||l.widthType===2||l.widthType===4)return;if(e.tree.getRect(l).width/a>.96){let d=e.tree.getParent(l.id),u=e.tree.getParentSizeInfo(l);u.sizing&&l.heightType===4&&(u.sizing={...n,height:u.sizing.height});let f=e.tree.getRect(l),y=l.updateForRect({rect:f,parentSizeInfo:u,constraintsLocked:!0,shouldGuessPinToBottom:Nn(e.tree,l),shouldGuessPinToRight:pr(e.tree,l,d)});y.width=1,l.width!==1&&(y.widthType=3),l.set(y)}})}function vP(e,t,o,r,i){if(!e.tree.getNode(t))return;yP(e,r,i).forEach(l=>{if(NC(l)&&Ar(l)||ls(l))return;let s=e.tree.getParent(l.id),c=e.tree.getRect(l),d=oe.offset(c,ge.reverse(o));e.moveNode(l.id,t);let u={...o},f=e.tree.getParentSizeInfo(l);FS(l)&&f.sizing&&(u.width=f.sizing.width),ES(l)&&f.sizing&&(u.height=f.sizing.height),e.tree.current(l)?.set({...l.updateForRect({rect:d,parentSizeInfo:{sizing:u,positioning:o,viewport:f?.viewport??null,layout:br(s)},constraintsLocked:!1,shouldGuessPinToBottom:!0,shouldGuessPinToRight:pr(e.tree,l,s)}),top:null,left:null,bottom:null,right:null,position:void 0}),mc(e.tree,l).forEach(({replicaRoot:v,relatedNode:b})=>{Le.resetOverridesByProperty(e.tree,v,b,["position"])})})}function $E(e,t){let o=oe.maxX(e),r=oe.maxX(t);return o>t.x&&r>e.x}function _E(e,t){let o=oe.maxY(e),r=oe.maxY(t);return o>t.y&&r>e.y}function Pf(e,t,o){if(!yt(o))return;let r=t==="width"?"widthType":"heightType";o.children.forEach(i=>{if(ye(i)&&(i[r]===3||i[r]===1)){let n=e.getRect(i),a={[r]:0,[t]:n[t]};Mi(i)&&(a.aspectRatio=null),e.current(i)?.set(a)}})}function k1(e,t){if(!yt(t)||!ye(t))return;let o=new Set;t.children.forEach(r=>{if(!ye(r)||!kr(r))return;let i=e.getRect(r),n={};t.widthType===2&&(r.widthType===3||r.widthType===1)&&(n.minWidth=i.width,o.add(r)),t.heightType===2&&(r.heightType===3||r.heightType===1)&&(n.minHeight=i.height),Object.keys(n).length>0&&(o.add(r),e.current(r)?.set(n))}),o.size>0&&jE()}function jE(){zI({type:"add",variant:"info",key:"setting-stack-direction-causes-children-change",text:"Layers in this stack received min-sizing to prevent a collapse",icon:"thumbnail",duration:5e3,showCloseButton:"always"})}function xd(e,t,o={}){if(!Eo(t)||!yt(t)||jt(t))return;let r={layout:"stack",...o},i=e.tree.getRect(t),n=e.tree.getScopeNodeFor(t),a=kb(t)||xe(t)&&J(n)||t.__unsafeIsGroundNode(e.tree)&&It(n),l=a?"vertical":gP(e.tree,t.children,i),s=yP(e,t.children,l);ht(t)||GE(e,s);let c=Ot(t),d=t.gap??e.stores.persistedUserDefaults.layoutGap,u=a?"start":"center";r.stackDirection=c?t.stackDirection??l:l,r.stackDistribution=c?t.stackDistribution??u:u,r.gap=c||HE(u)?d:0,r.stackAlignment=c?t.stackAlignment??Ol:Ol,r.stackWrapEnabled=c?t.stackWrapEnabled??!1:!1;let f=c&&xo(t)?{padding:t.padding,paddingPerSide:t.paddingPerSide,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom}:{...QC};if(l==="horizontal"&&o.heightType===2||l==="vertical"&&o.widthType===2||SP(e,t.children,l,i,f),f.paddingPerSide){let{paddingTop:v,paddingRight:b,paddingBottom:x,paddingLeft:D}=f;v===b&&v===x&&v===D&&(f.paddingPerSide=!1,f.padding=v)}t.set({...r,...f})}var IP=900;function X1(e){return e.intrinsicWidth>=IP}function Vd(e,t,o){if(Me(t))return!1;let r=o??e.getParent(t.id);return!!(r&&ve(r))}function Z1(e){return e<=.5}function UE(e,t,o){if(!Pe(t)||!Pr(t)||!ve(t)||qt(t)||!Vd(e,o,t))return!1;let r=Ae(o)&&_e(o)&&o.widthType===1&&o.width===1;if(Ae(o)&&o.width<IP&&!r)return!1;let i=t.children.filter(d=>d.id!==o.id);if(i.length===0)return!0;let a=e.getRect(t).width||1,l=i.map(d=>e.getRect(d));return l.some(d=>d.width/a<.5)?!1:l.every((d,u)=>l.every((f,y)=>u===y?!0:!oe.intersects(d,f)))}function K1(e,t,o,r){if(!Eo(t)||!UE(e.tree,t,o))return;let i={};r.height>500&&(i.heightType=2),xd(e,t,i),t.set({gap:0})}function TP(e,t){for(let o of Object.values(e.variables))if(o?.type==="collectionreference"&&o.dataIdentifier===t)return o}function bP(e,t){return Object.values(e.variables).find(o=>o?.type==="multicollectionreference"&&o.dataIdentifier===t)}function JE(e,t){let o=wc(t);if(Ir(o))return{targetDataIdentifier:o.dataIdentifier,targetProviderId:o.id};let r=e.stores.scopeStore.active;if(Tt(r))return{targetDataIdentifier:r.dataIdentifier,targetProviderId:r.id}}function Y1(e,t,o){if(!Ir(o))return;let r=JE(e,t);if(!r)return;let{targetDataIdentifier:i,targetProviderId:n}=r,a=wr(e.tree,o.dataIdentifier),l=wr(e.tree,i);if(!a||!l)return;let s=TP(a,i),c=bP(a,i),d=TP(l,o.dataIdentifier),u=bP(l,o.dataIdentifier),f;u?f={id:Lt(),itemKey:"id",transforms:[{id:Lt(),type:"valueTransform",name:"isIncludedIn",value:Mt(u.id,n)}]}:d?f={id:Lt(),itemKey:"id",transforms:[{id:Lt(),type:"valueTransform",name:"equals",value:Mt(d.id,n)}]}:c?f={id:Lt(),itemKey:c.id,transforms:[{id:Lt(),type:"valueTransform",name:"contains",value:Mt("id",n)}]}:s&&(f={id:Lt(),itemKey:s.id,transforms:[{id:Lt(),type:"valueTransform",name:"equals",value:Mt("id",n)}]}),f&&o.set({collectionFilters:{filters:[f]}})}function q1(e,t,o,r){if(!Pe(t)||!Pr(t)||!ve(t)||!jt(t)||t.stackDirection!=="vertical"||!Vd(e.tree,o,t)||t.heightType===2||!OI(e.tree,t).height[2])return;let n=t.children.filter(c=>c.id!==o.id);if(n.length===0)return;let a=e.tree.getRect(t),l=n.map(c=>e.tree.getRect(c));oe.merge(...l).height+r.height<=a.height||(t.set({height:a.height,heightType:2}),n.forEach((c,d)=>{let u=l[d];C(u,"Child rect must be defined"),Ae(c)&&_e(c)&&c.heightType===3&&c.set({height:u.height,heightType:0})}))}var Pd=Ya(BF());function wf(e){let t=fo.boundingBox(e),o=e.pathSegments.map(r=>r.merge({x:r.x-t.x,y:r.y-t.y}));return[{pathClosed:e.pathClosed,pathSegments:o},t]}function NP(e,t,o,r){let i=Ke("app:importSVG"),n=e,a,l;if(r&&r.colorable){let b=ln(e,"image/svg+xml").documentElement;if(!b)throw new Error(`Unsupported SVG: ${e}}`);let x=b.getAttribute("fill"),D=!(x&&x.toLowerCase()==="none");if(D){if(r.fillType==="linear-gradient"&&r.fillLinearGradient instanceof fv)a={fillType:"linear-gradient",fillLinearGradient:r.fillLinearGradient};else if(r.fillType==="image"&&r.fillImage)a={fillType:"image",fillImage:r.fillImage,fillImageResize:r.fillImageResize,fillImagePixelWidth:r.fillImagePixelWidth,fillImagePixelHeight:r.fillImagePixelHeight};else if(r.fillType==="color"&&R(r.fillColor)){let B=(0,Pd.getPaperLazily)(),A=new B.Color(r.fillColor).toCSS(!1);D&&b.setAttribute("style",`fill: ${A}; color: ${A}`);let Z=b.getAttribute("stroke");Z&&Z.toLowerCase()==="currentcolor"&&b.setAttribute("stroke",A)}n=b}}let s=ZE(n);n=s.svgElement,l=s.svgSize;let c=!1,u=(0,Pd.getPaperLazily)().project.importSVG(n,{expandShapes:!0,insert:!1,size:o,onError:v=>{i.reportError(v),c=!0;let b=document&&document.getElementsByTagName("body");if(b&&b[0]){let x=b[0].lastElementChild;for(;x&&x.tagName==="svg";)x.remove(),x=b[0].lastElementChild}}});if(c)return null;let f;try{f=xP({item:u,fillOverrides:a,tree:t()})}catch(v){return i.reportError(v),null}let y=f[0];return y?(Ae(y)&&l&&y.set({width:l.width,height:l.height}),t().insertNodes(f).getNode(y.id)):null}function xP({item:e,tree:t,nodes:o=[],parent:r=null,parentAbsolutePosition:i=ge(0,0),fillOverrides:n}){let a=(0,Pd.getPaperLazily)();return e instanceof a.Group?qE({group:e,nodes:o,parent:r,parentAbsolutePosition:i,tree:t,fillOverrides:n}):e instanceof a.PathItem?YE({item:e,nodes:o,parent:r,parentAbsolutePosition:i,fillOverrides:n}):(console.warn("Unhandled Paper item:",e),o)}function ZE(e){let t=R(e)?ln(e,"image/svg+xml").documentElement:e;if(!t)throw new Error(`Unsupported SVG: ${e}}`);let o,r=t.getAttribute("viewBox"),i=t.getAttribute("width"),n=t.getAttribute("height");if(r){let[a,l,s,c]=r.split(" ");s&&c&&(t.setAttribute("width",s),t.setAttribute("height",c),o={width:parseInt(s),height:parseInt(c)})}else i&&n&&(o={width:parseInt(i),height:parseInt(n)});return VP(t),{svgElement:t,svgSize:o}}function VP(e){KE(e);for(let t of e.children)VP(t)}function KE(e){let t=e.getAttribute("rx"),o=e.getAttribute("ry");!t&&!o||t&&o||(t?e.setAttribute("ry",t):o&&e.setAttribute("rx",o))}function YE({item:e,nodes:t=[],parent:o=null,parentAbsolutePosition:r=ge(0,0),fillOverrides:i}){let n=hv({item:e,parentAbsolutePosition:r}),a=gv(e),l=o?o.id:_t;if(n.length===1){let c=n[0];C(c,"Path must be defined");let[{pathSegments:d,pathClosed:u},f]=wf(c),y=new Fs({parentid:l,pathSegments:d,pathClosed:u,...a,...i,...f});t.push(y)}else if(n.length){let c=PP(e),d=c.x-r.x,u=c.y-r.y,f=e.fillRule==="evenodd"?3:4,y=new jc({parentid:l,pathBoolean:f,...a,...i,x:d,y:u,width:c.width,height:c.height});t.push(y),n.forEach(v=>{let[{pathSegments:b,pathClosed:x},D]=wf(v),B=new Fs({parentid:y.id,pathSegments:b,pathClosed:x,...i,x:D.x-d,y:D.y-u,width:D.width,height:D.height});t.push(B)})}return t}function qE({group:e,tree:t,nodes:o=[],parent:r=null,parentAbsolutePosition:i=ge(0,0),fillOverrides:n}){let a=PP(e),l=r?r.id:_t,s,c;return l?(s=new dI({parentid:l,x:a.x-i.x,y:a.y-i.y,width:a.width,height:a.height}),c=ge(a.x,a.y)):(s=new ui({parentid:l,left:0,top:0,width:a.x+a.width,height:a.y+a.height,fillEnabled:!1}),c=ge(0,0)),o.push(s),e.children.forEach(d=>{xP({item:d,nodes:o,parent:s,parentAbsolutePosition:c,tree:t,fillOverrides:n})}),o}function PP(e){let{x:t,y:o,width:r,height:i}=e.bounds;return{x:t,y:o,width:r,height:i}}function QE(e){return Fe(e)&&"iconURL"in e}function CX(e){return Fe(e.icon)?e.id==="WorkspacePluginsCategory"?!0:QE(e.icon):!1}var eA={DefaultCategory:!0,PluginsCategory:!0,ManagedCollectionPluginsCategory:!0,WorkspacePluginsCategory:!0};function SX(e){return R(e)?Object.hasOwn(eA,e):!1}var tA={FindNodesCategory:!0,PluginsCategory:!0,ManagedCollectionPluginsCategory:!0,WorkspacePluginsCategory:!0};function vX(e){return Object.hasOwn(tA,e)}function TX(e){return e?.kind==="item"}function wP(e){if(e!==void 0)switch(e){case 2:return"auto";case 0:return"fixed";case 3:return"fraction";case 1:return"percentage";case 4:return"viewport";case 5:return"fit-image";default:_(e)}}function kP(e,{widthType:t,heightType:o},r){if(!ye(e))return;let i=t!==void 0&&e.widthType!==t,n=o!==void 0&&e.heightType!==o;!i&&!n||DV({widthType:wP(t),heightType:wP(o),source:r,nodeType:e.__class,componentId:$(e)?e.codeComponentIdentifier:void 0})}function kf(e,t,o=!1){let r={};for(let i in e){let n={...e[i]};"itemsOrder"in n&&Array.isArray(n.itemsOrder)&&o&&(n.itemsOrder=$s(n.itemsOrder,t)),r[t.get(i)??i]=n}return r}var wd=class extends Map{get(t){let o=super.get(t);for(;o;){let r=super.get(o);if(r===void 0)break;o=r}return o}};function oA(e,t){if(va(e)){if(!e.controls.target?.value)return;let o=t.get(e.controls.target.value);return o?{target:{...e.controls.target,value:o}}:void 0}if(mr(e)){if(!e.controls.variantId?.value)return;let o=t.get(e.controls.variantId.value);return o?{variantId:{...e.controls.variantId,value:o}}:void 0}if(ua(e)){if(!e.controls.overlay?.value)return;let o=t.get(e.controls.overlay.value);return o?{overlay:{...e.controls.overlay,value:o}}:void 0}}function RP(e,t,o,r){let i=$(t),n={},a=!1,l=Dc(t);for(let s in l){let c=i?dt(s):s;if(!wt(e,t,c))continue;let d=l[s];if(!ft(d))continue;let u=[],f=!1;for(let y of d){if(r&&(ua(y)||pc(y))){f=!0;continue}let b=oA(y,o);if(!b){u.push(y);continue}u.push({...y,controls:{...y.controls,...b}}),f=!0}f&&(i?n[dt(s)]={type:"eventhandler",value:u}:n[s]=u,a=!0)}a&&t.set(n,e)}function rA(e,t,o){let r={};function i(l){let s=e.get(l);s&&e.linkNodeChangesTo(s,t.id)}let n=RI(t,M);for(let l of n){if(!wt(e,t,dt(l)))continue;let s=t.getRawControlProp(l);if(s){if(s.type==="slot"&&ft(s.value)){let c=!1,d=s.value.map(u=>{if(!Fe(u))return u;let f="reference";if(!R(u[f]))return u;let y=o.get(u.reference);return y?(c=!0,i(y),{...u,[f]:y}):u});if(!c)continue;r[l]={type:"slot",value:d}}else if((s.type===null||s.type==="componentinstance")&&R(s.value)){let c=o.get(s.value);if(!c)continue;r[l]={type:"slot",value:[{id:"first-item",reference:c}]},i(c)}else if(ft(s.value)){let c=!1,d=[];for(let u=0;u<s.value.length;u++){let f=s.value[u];if(!El(f)||f.type!==null&&f.type!=="componentinstance"||!R(f.value))continue;let y=RC(f)?f.id:Lt(),v=o.get(f.value);d.push({id:y,reference:v??f.value}),v&&(i(v),c=!0)}if(!c)continue;r[l]={type:"slot",value:d}}}}if(Gt(r))return;let a=Tu(r);t.set(a,e)}function iA(e,t,o){let r={},i=M.componentForIdentifier(t.codeComponentIdentifier)?.properties;for(let n in i){if(!wt(e,t,dt(n)))continue;let a=i[n];if(a?.type!=="scrollsectionref")continue;let l=t.getRawControlProp(n);if(!l)continue;let s=uS(a,l);if(!s||j(s)||!R(s.target))continue;let c=o.get(s.target);c&&(r[n]={type:"scrollsectionref",value:{...s,target:c}})}Gt(r)||t.set(Tu(r),e)}function nA(e,t){if(vT(e)&&ft(e.appearEffectScrollTargets)){let o=e.appearEffectScrollTargets.map(r=>{if(!r.target||j(r.target))return r;let i=t.get(r.target);return i?{id:Lt(),variant:r.variant,target:i}:r});e.set({appearEffectScrollTargets:o})}if(yT(e)&&R(e.styleAppearEffectScrollTarget)){let o=t.get(e.styleAppearEffectScrollTarget);o&&e.set({styleAppearEffectScrollTarget:o})}if(ST(e)&&ft(e.styleTransformEffectScrollTargets)){let o=e.styleTransformEffectScrollTargets.map(r=>{if(!r.target||j(r.target))return r;let i=t.get(r.target);return i?{id:Lt(),style:r.style,target:i}:r});e.set({styleTransformEffectScrollTargets:o})}if(Ec(e)&&e.dragEffectConstraintElement){let o=t.get(e.dragEffectConstraintElement);o&&e.set({dragEffectConstraintElement:o})}if(FT(e)&&R(e.textEffectScrollTarget)){let o=t.get(e.textEffectScrollTarget);o&&e.set({textEffectScrollTarget:o})}}function Fn(e,t,o,r){if(t=t.draftOrCurrent(),(zt(t)||dc(t))&&RP(e,t,o,r),$(t)&&(RP(e,t,o,r),rA(e,t,o),iA(e,t,o)),Ps(t)&&nA(t,o),Vo(t)&&t.formSubmitButtonId){let n=o.get(t.formSubmitButtonId);n&&t.set({formSubmitButtonId:n})}if(Vb(t)&&t.dataSourceLoaderId){let n=o.get(t.dataSourceLoaderId);n&&t.set({dataSourceLoaderId:n})}if(bt(t)&&t.collectionRepeatedItemId){let n=o.get(t.collectionRepeatedItemId);n&&t.set({collectionRepeatedItemId:n})}if(Tt(t)){let n=DP(t.dataIdentifier,o);n&&t.set({dataIdentifier:n})}if(mo(t)){let n=t.variables.map(a=>{if(!AC(a))return a;let l=DP(a.dataIdentifier,o);return l?{...a,dataIdentifier:l}:a});sn(t.variables,n)||t.set({variables:n})}Kr(t)&&aA(t,o);let i=$b(e,t,n=>{if(!n.providerId)return;let a=o.get(n.providerId);if(a)return Mt(o.get(n.id)??n.id,a)});if(i&&t.set(i),t.children)for(let n of t.children)Fn(e,n,o,r);return t}function DP(e,t){let o=ce(e);if(!Ho(o))return null;let r=t.get(o.localIdName);return r?an(o.type,r,o.exportSpecifier).value:null}function aA(e,t){let o=e.getControlProps();for(let[r,i]of Object.entries(o)){if(i?.type==="collectionreference"&&R(i.value)){let n=t.get(i.value);n&&e.setControlProp(r,{...i,value:n})}if(i?.type==="multicollectionreference"&&!E(i.value)&&!j(i.value)){let n=i.value.map(a=>t.get(a)??a);sn(i.value,n)||e.setControlProp(r,{...i,value:n})}}}function kd(e){return e==="/"?"Home":(e=lA(e),e=sA(e),e=FP(e),e=cA(e),e=e.split(" ").map(by).join(" "),e)}function sA(e){return e.replace(/-+/gu," ")}function lA(e){return e.replace(Cy,"")}var LP=/\s*\/+[/\s]*/gu;function cA(e){return e.replace(LP," / ")}function FP(e){return e.replace(/^[/\s]+|[/\s]+$/gu,"")}var dA=/\s+/gu,pA=/-+/gu;function EP(e){if(e==="Home")return"/";let t=e;return t=FP(t),t=t.replace(LP,"-"),t=t.replace(dA,"-"),t=t.replace(pA,"-"),t=t.toLowerCase(),"/"+t}function wZ(e,t){let o=t.instanceIdentifier,r=e.getPersistedModuleByLocalIdentifier(o),i=M.dataForIdentifier(o)??void 0;return{identifier:o,module:r,entity:i}}function kZ(e){return e.annotations?.framerSlug}function RZ(e,t="Collection"){let o=e.resolveValue("name");return o?o.toLowerCase().includes("collection")?o:`${o.trim()} Collection`:t}function uA(e){switch(e.toLowerCase()){case"title":case"name":case"label":return!0;default:return!1}}function mA(e){return EC(e)&&uA(e.name)}function fA(e){return e.variables.find(mA)}function hA(e,t){if(E(t))return;let r=e.getControlProp(t.id)?.value||t.initialValue;if(R(r)&&r.length>0)return r}function Rf(e,t){if(E(t))return;let r=e.getControlProp(t.id)?.value||t.initialValue;if(R(r)&&r.length>0)return r}function Dd(e,t){let o=fA(e),r=hA(t,o);if(R(r))return r;let i=e.getSlugVariable(),n=Rf(t,i);return R(n)?kd(n):"Collection Item"}function Df(e){let{ids:t}=e.stores.selectionStore,o=t[0];if(!o)return null;let r=e.tree.getNode(o);if(mo(r))return r;if(Kr(r)){let i=e.tree.getNode(r.parentid);if(mo(i))return i}return null}function DZ(e){let t=Df(e);return t?t.id:null}function LZ(e){let t=Df(e);return t?t.resolveValue("name"):null}function FZ(e){let t=e.getContentManagementNode()?.loaded;return t?t.children.length:0}function EZ(e){let t=e.getContentManagementNode()?.loaded;return t?t.children.reduce((o,r)=>o+=r.getItemCount(),0):0}function Lf(e){return e.type==="richtext"&&R(e.value)}function gA(e,t){let o=ce(e);return r=>{let i=ce(r);if(!(!i||!o)&&(i.kind==="localModuleExport"&&o.kind==="localModuleExport"&&i.localId===o.localId||i.kind==="externalModuleExport"&&o.kind==="externalModuleExport"&&i.moduleId===o.moduleId&&i.exportSpecifier===o.exportSpecifier))return t}}function AP(e,t){return e.replaceAll(nc,(o,r)=>{let i=t(r);return i?`${DS}="${i}"`:o})}function Ff(e,t){let o=e.getControlProps(),r={};for(let[i,n]of Object.entries(o)){if(!Lf(n))continue;let a=n.value,l=AP(a,t),s=$e(a),c=$e(l),d;if(n.valueLocalized){d={};for(let f of Object.keys(n.valueLocalized)){let y=n.valueLocalized[f];if(!y)continue;let v=l!==a,b=y.hash===s&&v;if(!y.value){if(b){d[f]={...y,hash:c};continue}d[f]=y;continue}let x=AP(y.value,t);d[f]={...y,value:x,hash:b?c:y.hash}}}if(n.value===l&&Sr(n.valueLocalized,d))continue;let u={...n,value:l};d&&(u.valueLocalized=d),r[dt(i)]=u}return Object.keys(r).length>0?r:void 0}function AZ(e,t,o){let r=e.getContentManagementNode()?.loaded;if(!r)return;let i=gA(t,o);for(let n of r.children)for(let a of n.getUnsortedChildren()){let l=Ff(a,i);l&&a.set(l)}}function yA(e,t){let o=e.getControlProps();for(let r of Object.values(o))if(Lf(r)){if(r.value.includes(t))return!0;if(r.valueLocalized){for(let i of Object.keys(r.valueLocalized))if(r.valueLocalized[i]?.value?.includes(t))return!0}}return!1}function MZ(e,t){let o=e.getContentManagementNode()?.loaded;if(!o)return!1;for(let r of o.children)for(let i of r.getUnsortedChildren())if(yA(i,t))return!0;return!1}function OZ(e){let t=new Set;for(let o of e.getUnsortedChildren()){let r=Ef(o);for(let i of r)t.add(i)}return[...t]}function Ef(e){let t=new Set,o=e.getControlProps();for(let r of Object.values(o)){if(!Lf(r))continue;let i=r.value.matchAll(nc);for(let[,n]of i)Ge(n)&&t.add(n);if(r.valueLocalized)for(let n of Object.keys(r.valueLocalized)){let a=r.valueLocalized[n];if(!a?.value)continue;let l=a.value.matchAll(nc);for(let[,s]of l)Ge(s)&&t.add(s)}}return[...t]}function zZ(e,t,o){let r=wr(e.tree,t);if(!r)return;let i=o??r.getUnsortedChildren()[0];e.stores.scopeStore.select(hc,{keepHistory:!1}),e.stores.selectionStore.set(i??r)}function WZ(e){let t=Df(e);if(!t)return!1;let o=e.stores.contentManagementStore;return o.multiSelectedItems||o.isCreatingNewItem()?!1:!t.managedByPlugin}function MP(e,t){let o=e.stores.scopeStore.active;return C(wi(o),"Content management node should be active"),o.children.toSorted((r,i)=>qv(r.resolveValue("name")||"",i.resolveValue("name")||"",t))}function BZ(e,t){let o=e.stores.scopeStore.active;MP(e,t).forEach(({id:i},n)=>{e.moveNode(i,o.id,n)})}function HZ(e,t){let o=e.stores.scopeStore.active;C(wi(o),"Content management node should be active");let r=MP(e,t);return o.children.every(({id:i},n)=>r[n]?.id===i)}function Ld(e){if(!e)return!1;let t=ce(e);return t?t.kind==="externalModuleExport"||t.kind==="localModuleExport":!1}function OP(e,t){$(e)&&Ld(e.codeComponentIdentifier)&&t(e.codeComponentIdentifier),sa(e)&&e.dataIdentifier&&t(e.dataIdentifier),Ei(e)&&Ld(e.codeOverrideIdentifier)&&t(e.codeOverrideIdentifier),ks(e)&&e.codeOverrides?.forEach(o=>{t(o.identifier)}),Kr(e)&&Ef(e).forEach(t)}function zP(e,t){let o={};if($(e)&&Ld(e.codeComponentIdentifier)){let i=t(e.codeComponentIdentifier);i&&(o.codeComponentIdentifier=i)}if(sa(e)&&e.dataIdentifier){let i=t(e.dataIdentifier);i&&(C(Ge(i)),o.dataIdentifier=i)}if(Ei(e)&&Ld(e.codeOverrideIdentifier)){let i=t(e.codeOverrideIdentifier);i&&(o.codeOverrideIdentifier=i)}if(ks(e)&&e.codeOverrides){let i=!1,n=e.codeOverrides.map(a=>{let l=t(a.identifier);return l?(i=!0,{...a,identifier:l}):a});i&&(o.codeOverrides=n)}if(Kr(e)){let i=Ff(e,t);i&&Object.assign(o,i)}if(Object.keys(o).length!==0)return o}function WP(e){return jV(e)||mo(e)}var BP=75,vA={mutable:!0,update:0};function HP(e,t,o,r,i=!1){function n(a,l,s=!1){let c=new a.constructor;c.assign(a,vA,{cache:c.cache,id:c.id}),fa(c)&&(c.itemsOrder=void 0),a.cache.insideVariant=s;let d=ri(a)?a.getChildrenInVisualOrder():a.children;d&&(c.children=d.map(y=>n(y,c.id,s)));let u={parentid:l},f=zP(a,y=>{let v=ce(y);if(v.kind==="localModuleExport"){let b=t.get(v.localId);if(b)return`${b}:${v.exportSpecifier}`}else if(v?.kind==="externalModuleExport"){let b=o.get(v.moduleId);if(b)return Kg(v,b).value}});if(f&&Object.assign(u,f),uo(a)&&!xe(a)&&Object.assign(u,{replicaInfo:void 0,originalid:void 0,...a.replicaInfo.overrides[a.replicaInfo.master],_deleted:void 0}),i&&Object.assign(u,{duplicatedFrom:OS(a.duplicatedFrom,a.id)}),c.assign(u),r){if(r.has(a.id)){let y=r.get(a.id);y&&r.set(y,c.id)}r.set(a.id,c.id),a.originalid&&!r.has(a.originalid)&&r.set(a.originalid,c.id)}return c}return n(e,void 0,xe(e))}function TA(e){let t=new Map;for(let o of e)if(o.type==="local"){let r=o.moduleId;t.set(o.localId,Xg(r,o.saveId,o.file).value)}return t}async function dK(e){let t=new Map;for await(let o of e)if(o.type==="local"&&o.moduleType==="css"){let r=await GP({moduleId:o.moduleId,saveId:o.saveId}),{__treeSerializationVersion:i,...n}=r,a=i||BP,{root:l}=Wu({root:n,version:a}),s=xm(l);Ri(s)&&t.set(s.id,s)}return[...t.values()]}function pK(e,t,o){let r=TA(o.imports),i=new Map,n=[];for(let a of e.walk())OP(a,l=>{let s=ce(l);if(Ho(s)){let c=r.get(s.localId);if(!c)return;let{moduleId:d,saveId:u,file:f}=ce(c);s=Zg(s,d,u,f)}if(s.kind==="externalModuleExport"){let c=t.getPersistedModuleByGlobalId(s.moduleId);c?i.set(s.moduleId,c.localId):n.push(s)}});return{identifiers:n,localIdsToExternalIdentifiers:r,externalModuleIdsToLocalIds:i}}async function GP({moduleId:e,saveId:t}){try{return await(await fetch(`${kl().modulesCDN}/${e}/${t}/tree.json`)).json()}catch(o){ra(o)}}async function uK(e,t){let[o,r]=await Promise.all([GP(t),e.stores.modulesStore.getModuleDependencies(t)]);C(o,"Can't get tree.json for module identifier"),C(r,"Can't get dependencies for module identifier");let{__treeSerializationVersion:i,...n}=o,a=i||BP,{root:l}=Wu({root:n,version:a}),s=xm(l);return C(WP(s),"Node should be un-linkable."),{node:s,dependencies:r}}async function mK(e,t,o){if(e.remoteDocument?.projectId&&t.assets.length>0)try{await e.stores.assetStore.assetService?.duplicateModuleAssets(o.moduleId,o.saveId)}catch{}}function Af(e){if(!yt(e)||Ee(e))return 0;let t=0,o=e.children.length;return t+=o,e.children.forEach(r=>{t+=Af(r)}),t}function $P(e,t,o,r){let i=bd(o,M),n=new Map(Object.entries(i)),a=new Map;a.set(r,n);let l={};for(let s of e.walk()){let c=_c(t,r,s,a);c&&(l[s.getPrimaryId()]=c)}return l}function _P(e){let{left:t,top:o,right:r,bottom:i,centerAnchorX:n,centerAnchorY:a,constraintsLocked:l,width:s,widthType:c,height:d,heightType:u,aspectRatio:f,name:y,...v}=e;return v}function jP(e){let t=M.reactComponentForIdentifier(e.codeComponentIdentifier);if(!t)return;let o={},r=Object.keys(t.properties);for(let i of r){let n=t.properties[i];if(!n||n.type!=="eventhandler")continue;let a=e.getRawControlProp(i);if(!a)continue;let{value:l}=a;!Array.isArray(l)||l.length===0||(o[i]=l)}return o}function Fd(e,{opacity:t,rotation:o}){if(j(t))e.opacity=t;else if(e?.opacity||t){let r=K(t)?t:1;e.opacity=(e.opacity??1)*r}if(j(o))e.rotation=o;else if(e?.rotation||o){let r=K(o)?o:0;e.rotation=(e.rotation??0)+r}}function MK(e){return e.every(t=>Pe(t)||Me(t)||$(t))}function OK(e,t){return t?!1:e.every(o=>{if(!Pe(o)&&!$(o)&&!De(o)||ve(o)||Pe(o)&&ga(o).length===0)return!1;if($(o)){let r=o.getSupportedLayout(M);if(!Ni(r.width)||!Ni(r.height))return!1}return o.widthType!==2||o.heightType!==2})}function UP(e,t,o){for(let r of t)if(Me(r)||$(r))r.set({widthType:2,heightType:2}),Me(r)&&o&&Ct("layout_fit_text",{source:o});else if(Pe(r)){let i={widthType:2,heightType:2,aspectRatio:null};jt(r)||xd(e,r,i),Pf(e.tree,"width",r),Pf(e.tree,"height",r),bb(r)&&(i.framePreset=null),r.set(i),o&&Ct("layout_stack",{layoutType:"stack",source:o})}}var bA=/([a-z]+)([\dA-Z]+)/gu;function IA(e){return e.replaceAll(bA,(t,o,r)=>`${o}_${r.toLowerCase()}`)}function Mf(e){return Object.fromEntries(Object.entries(e).map(([t,o])=>[IA(t),o]))}var _i=Ke("ChatStreamer"),NA="/ai/v2/chat/",JP=-1,xA=Lt(),Ed=class{constructor(t){this.type=t;k(this,"streamID","");k(this,"subscribers",new Set);k(this,"currentStream");k(this,"abortController");k(this,"cancel",()=>{this.abortController&&(_i.debug("Stream",this.streamID,"cancelled"),this.abortController.abort(),this.abortController=void 0)})}async start({model:t,user:o,messages:r,responseFormat:i,onText:n}){this.cancel(),JP++,this.streamID=`${xA}-${JP}-${this.type}`,this.emitChatEvent({type:"start",streamID:this.streamID,messages:r});let a=!1,l=f=>{let y;Fe(f)&&R(f.message)?y=f.message:y=String(f),a||(a=!0,this.emitChatEvent({type:"done",streamID:this.streamID,error:y})),_i.warn("ChatStreamer error:",f)},s=()=>{a||(a=!0,this.emitChatEvent({type:"done",streamID:this.streamID}))};this.abortController=new AbortController;let c="",d=i?Mf(i):void 0,u=Mf({messages:r,model:t,stream:!0,user:o,responseFormat:d});this.currentStream=BI.postStream(NA,{signal:this.abortController.signal,openWhenHidden:!0,onclose:()=>{if(a)return;a=!0;let f="Chat stream closed before done";throw new Error(f)},onerror:f=>{throw a=!0,f},onmessage:f=>{if(_i.trace(f.event,f.id,f.data),f.data==="[DONE]"){_i.debug("ChatStreamer finished with content:",c),s();return}if(f.data.length===0){_i.debug("ChatStreamer stream empty");return}let y=JSON.parse(f.data);if("error"in y){let x=y.error,D=JSON.parse(x.metadata.raw);_i.error(`ChatStreamer error '${x.message}' with code`,x.code,"and raw error",D);return}let v=y.choices[0];if(!v)return;v.finish_reason&&_i.debug("Finishing chat completion with reason:",v.finish_reason);let{content:b}=v.delta;b&&(c+=b,this.emitChatEvent({type:"stream",streamID:this.streamID,content:b}),n(b))}},u);try{await this.currentStream}catch(f){throw l(f),f}finally{this.currentStream=void 0,this.abortController=void 0}return c}get isFinished(){return this.currentStream===void 0}async waitUntilFinished(){await this.currentStream}subscribeChatEvent(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}emitChatEvent(t){this.subscribers.forEach(o=>{try{o(t)}catch(r){_i.error(r)}})}};var Ad=class{constructor(t,o,r,i){this.separator=t;this.parseCommand=o;this.onCommand=r;this.onError=i;k(this,"buffer","");k(this,"commands",[]);k(this,"isFinalized",!1)}addToken(t){C(!this.isFinalized,"Parser has been finalized, cannot add more tokens"),this.buffer+=t,this.processBuffer()}processBuffer(){let t;for(;(t=this.buffer.indexOf(this.separator))!==-1;){let o=this.buffer.slice(0,t);this.buffer=this.buffer.slice(t+1);try{let r=this.parseCommand(o);this.commands.push(r),this.onCommand(r)}catch(r){this.onError?.(o,r)}}}finalize(){return this.isFinalized?this.commands:(this.isFinalized=!0,this.buffer.trim()&&(this.buffer.endsWith(this.separator)||(this.buffer+=this.separator),this.processBuffer()),this.commands)}};var eY={url:"url"};function XP(e){return aa(e)&&e.actionIdentifier==="framer/useOpenURL"}function tY(e,t){let o={...e.controls,...t};return{...e,controls:o}}var VA=Ke("EventCollector"),PA=Symbol("previous"),AY=m`pathVariables`,ZP=m`navigate`,KP=m`setVariant`,Md=m`overlay`,Of=m`loadMore`,YP={onMouseEnter:{isHovered:!0},onMouseLeave:{isHovered:!1},onTapStart:{isPressed:!0},onTap:{isPressed:!1},onTapCancel:{isPressed:!1}},Wd={visible:"visible",show:"show",hide:"hide",toggle:"toggle"};function Od(e,t){return new V(`${e}.${t}`)}var zd=class{constructor(t,o,r,i,n,a={type:"canvasComponent"}){this.sourceNode=t;this.variables=o;this.treeStore=r;this.bindings=i;this.imports=n;this.options=a;k(this,"handlers",new Map);k(this,"variantOnAppearId",new Map);k(this,"keyBindHooks",new Set);k(this,"navigationTargets",new Set);k(this,"needsPathVariables",!1);k(this,"routeHandlers",new Map);k(this,"overlayState",new Map);k(this,"overlayTriggerOverlayBindings",new Map);k(this,"relativeOverlayPrimaryTriggers",new Set)}addHandler({trigger:t,node:o,actionInfo:r}){r?.forEach(c=>{!am(c)||!c.controls.id?.value||this.variables.create(Iy(c.controls.id.value,void 0))});let i=t===WS&&zt(o),n=t===cc&&zt(o),a=sS(this.treeStore.tree,o.id)??this.sourceNode,l=!r||r.length===0;if(i&&l){this.variantOnAppearId.has(a.id)||this.variantOnAppearId.set(a.id,m`undefined`);return}if(l)return;let s=n?this.createKeydownEvents(o,r,this.imports):this.createCombinedEvents(o,r,t);if(i){s&&!this.variantOnAppearId.has(a.id)&&this.variantOnAppearId.set(a.id,s);return}if(!(n||!s))return s}eventHandlersForNode(t){if(!Ta(t)||Io(t))return;let o=t.getActions(M),r={};for(let i in o)r[i]=this.addHandler({node:t,trigger:i,actionInfo:o[i]});return this.options.type!=="canvasComponent"||!xe(t),r}getOverlayIdForNode(t){return ht(t)?this.treeStore.tree.get(t.cache.overlayAncestorId)?.originalid:t.cache.overlayAncestorId}transformAction(t,o,r){return i=>{if(!Eu(t)||E(o.meta?.inputValue))return i;let n=m`inputValue`;switch(r.bindings.add(m`const ${n} = args[0]?.target?.value?.trim()`),o.meta.inputValue){case"empty":return m`if (!${n}) { ${i} }`;case"set":return m`if (${n}?.length > 0 ) { ${i} }`;default:_(o.meta.inputValue,"All inputValue values should be handled")}}}getRepeaterIdForNode(t){let o=wc(t);return o?ht(t)?o.originalid:o.id:null}createCombinedEvents(t,o,r){let i=qP(),n=this.getOverlayIdForNode(t);r in YP&&this.options.type==="canvasComponent"&&xe(t)&&i.gestureHandlers.add(V.fn(te.setGestureState,YP[r]));for(let s of o){if(this.extractActionsToGroups(t,s,i,r,this.transformAction(r,s,i)),i.navigationActions.size>0)break;ua(s)&&!Rr(t)&&(n||(n=s.controls.overlay.value))}if(QP.every(s=>i[s].size===0))return m`undefined`;let a=this.createEventFromGroups(r,i),l=this.getRepeaterIdForNode(t);if(i.overlayActions.size>0&&n||i.repeaterActions.size>0&&l){let s=n?this.overlayState.get(n):void 0,c=this.treeStore.tree.get(l),u=Ir(c)&&dr(c)?this.bindings.createWithNode("loadMore",c):void 0;if(s||u)return V.fn(a,{[Md.toString()]:s,[Of.toString()]:u})}return a}createEventFromGroups(t,o){let r=wA(o),i=`${t}${Ft(ue(r))}`,n=new V(i),a=m`const ${n} = ${r}`;return this.handlers.set(i,a),n}createKeydownEvents(t,o,r){C(this.options.type==="screen","Smart Components do not support keydown events");for(let i of o){let n=i.meta?.key;if(E(n))continue;let a=qP();if(this.extractActionsToGroups(t,i,a,"onKeyDown",this.transformAction("onKeyDown",i,a)),Object.keys(a).every(s=>a[s].size===0))continue;let l=this.createEventFromGroups("onKeyDown",a);if(C(r,"An Import collector must be provided to add gamepad or hotkey bindings."),Oy(n))this.keyBindHooks.add(V.fn(r.addImport("framer",{exportSpecifier:"useGamepad"}),n.key,l,{mapping:n.mapping}));else{let s=n.key,c=kA(n),d=c.length?c.concat(s).join("+"):s;this.keyBindHooks.add(V.fn(r.addImport("framer",{exportSpecifier:"useHotkey"}),d,l))}}}extractActionsToGroups(t,o,r,i,n){if(mr(o)){if(this.options.type!=="canvasComponent"||!Eu(i)&&r.setVariantActions.size>0)return;let a=DA(this.imports,o,i);a&&r.setVariantActions.add(n(a))}else if(am(o)){if(this.options.type!=="canvasComponent")return;let a=LA(o);a&&r.eventActions.add(n(a))}else if(va(o)){if(this.options.type!=="screen"||r.navigationActions.size>0)return;let a=this.createNavigateAction(o.controls.type.value,o.controls.target.value,o.meta?.delay,o.controls);a&&r.navigationActions.add(n(a))}else if(o.actionIdentifier==="framer/useLog"){if(this.options.type!=="screen")return;let a=EA(o);a&&r.otherActions.add(n(a))}else if(o.actionIdentifier==="framer/useSetLocale"){let a=o.controls.localeId?.value;if(!R(a))return;r.otherActions.add(n(V.fn(te.setLocale,a)))}else if(XP(o)){let a=ts(o.controls.url.value);if(E(a)||z(a))return;if(My(a)){let l=this.createOpenPageAction(a.webPageId,a.hash,o.meta?.delay);l&&r.navigationActions.add(n(l))}else{let l=FA(o,a);l&&r.otherActions.add(n(l))}}else if(!Rr(t)&&ua(o)){if(o.actionIdentifier==="framer/useShowOverlay"&&this.options.type==="canvasComponent")return;let a=o.controls.overlay.value,l=this.createOverlayTriggers(a,t.id);l&&r.overlayActions.add(n(l))}else if(US(o)){if(!Rr(t))return;let a=this.getOverlayIdForNode(t);if(C(a,"overlayAncestorId must not be null when nodeIsInOverlay is true"),!this.overlayState.has(a))return;r.overlayActions.add(n(this.createDismissOverlayAction(o.meta?.delay)))}else if(nT(o)){let a=this.getRepeaterIdForNode(t),l=this.treeStore.tree.get(a);if(!Ir(l))return;r.repeaterActions.add(V.fn(Of))}}createDismissOverlayAction(t){return mi(V.fn(Od(Md,"hide")),t)}createOpenPageAction(t,o,r){if(!this.getNavigationTarget(t))return;let n=`${Ft(t)}${o?Ft(o):""}`,a=new V(`openRoute${n}`),l=[t,m`true`];o&&l.push(o),this.routeHandlers.set(n,m`const ${a} = ${V.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteHandler"}),...l)}`);let s=V.fn(a);return m`return ${mi(s,r)}`}createNavigateAction(t,o,r,i){if(t==="previous")return this.navigationTargets.add(PA),m`return ${mi(V.fn(ZP,"previous"),r)}`;if(!o||!this.isValidNavigationTarget(o))return;let n={};for(let a in i){if(a==="target")continue;let l=i[a];n[a]=l.value}return this.navigationTargets.add(o),m`return ${mi(V.fn(ZP,o,n),r)}`}getNavigationTarget(t){if(!t)return null;let o=this.treeStore.tree.getNode(t);return!o||!(this.treeStore.tree.isGroundNode(o)||J(o))?null:o}isValidNavigationTarget(t){return!!this.getNavigationTarget(t)}createOverlayTriggers(t,o){let r=this.treeStore.tree.get(t);if(!r)return;let i=this.treeStore.tree.get(o);if(!i)return;let n=this.treeStore.tree.get(i.getPrimaryId());if(!n)return;if(!i?.children?.find(c=>c.getPrimaryId()===t&&ot(c))){VA.reportError("EventCollector: Tried to create a event handler to show an overlay which is not a descendant of the trigger.",{triggerId:o,overlayId:t});return}let l=this.overlayState.get(t)??this.bindings.create("overlay");this.overlayState.set(t,l);let s=this.overlayTriggerOverlayBindings.get(n.id)??new Map;return s.set(r.getPrimaryId(),l),this.overlayTriggerOverlayBindings.set(n.id,s),Ye(r)&&this.relativeOverlayPrimaryTriggers.add(n.id),V.fn(Od(Md,Ye(r)?"show":"toggle"))}};function qP(){return{bindings:new V.Set,gestureHandlers:new V.Set,eventActions:new V.Set,setVariantActions:new V.Set,navigationActions:new V.Set,otherActions:new V.Set,overlayActions:new V.Set,repeaterActions:new V.Set}}var QP=["bindings","gestureHandlers","eventActions","setVariantActions","otherActions","overlayActions","repeaterActions","navigationActions"];function wA(e){let t=[];for(let r of QP)for(let i of e[r])t.push(i);let o=m.joinLines(m`activeVariantCallback(async (...args) => {`,...t,m`})`);return e.overlayActions.size>0||e.repeaterActions.size>0?m`({${Md}, ${Of}}) => ${o}`:o}function kA(e){let t=[];for(let o in e)if(e[o])switch(o){case"altKey":t.push("alt");break;case"ctrlKey":t.push("ctrl");break;case"metaKey":t.push("meta");break;case"shiftKey":t.push("shift");break;default:break}return t}function RA(e,t,o,r){if(t==="cycle")return V.fn(KP,e.addImport("framer",{exportSpecifier:"CycleVariantState"}),r);if(o)return V.fn(KP,o,r)}function DA(e,t,o){let r=t.controls.type?.value,i=t.controls.variantId?.value,n=t.controls.pauseOffscreen?.value;if(!tP(r))return;let a=RA(e,r,i,o==="onAppear"?n:void 0);if(a)return mi(a,t.meta?.delay)}function LA(e){let t=e.controls.id?.value;if(!R(t))return;let o=new V(t);return m.joinLines(m`if (${o}) {${m.joinLines(e.meta?.delay&&m`await delay(() => {}, ${e.meta?.delay*1e3});`,m`const res = await ${o}(...args);`,m`if (res === false) return false;`)}}`)}function FA(e,t){if(!Tr(t))return;let{href:o,target:r=m`undefined`,rel:i}=CC(t.url);if(!o)return;let n=[o,r??m`undefined`,i??"noopener"];return mi(V.fn(m`window.open`,...n),e.meta?.delay)}function EA(e){let t=e.controls?.type?.value,o=e.controls?.message?.value;if(R(t))switch(t){case"event":return new V(at.lines('if (args[0] && "persist" in args[0]) args[0].persist()',mi(m`console.log(...args)`,e.meta?.delay)));case"message":return R(o)?mi(m`console.log(${o})`,e.meta?.delay):void 0;case"count":return R(o)?mi(m`console.count(${o})`,e.meta?.delay):void 0}}function mi(e,t){return!E(t)&&t>0?m`await delay(() => ${e}, ${t*1e3})`:e}function Bd(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":return!0;default:return!1}}function Yo(e){return $(e)&&!Bd(e)&&!e.isVectorInstance}function ew(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":case"framer/Prototype":return!0;default:return!1}}function tw(e){switch(e.codeComponentIdentifier){case"framer/Page":return"Page";case"framer/Scroll":return"Scroll";case"framer/Prototype":return"DeviceCodeComponent"}}var En=class extends Error{constructor(o,r,i,n=!1){super(o);this.missing=r;this.error=i;this.wasTimeout=n}};function zf(e){return e instanceof En}var Wf=Ke("ensureComponentsInLoader"),AA=500,MA=30*1e3;async function Hd(e,t,o,r){let i=ow(t,e).length;if(i===0)return;let n=r??MA+i*2e3;Wf.debug("modules:",t.length,", new:",i,", timeout:",n),await OA(e,o,n);let a=ow(t,e);if(a.length===0)return;let l=zA(t,e);throw Wf.debug("components loaded, but some are missing",{missing:a,errors:l}),new En("ensureComponentsInLoader: Some modules are missing.",a,l)}async function OA(e,t,o){let r=performance.now(),i=await WA(async()=>(await ru(o),"timeout"),async()=>{await t.whenIdle();let n=t.revision;return C(n>=0,"moduleStore.revision cannot be negative"),await t.loadAllLocalModules(),n});if(i==="timeout")throw new En("ensureComponentsInLoader: Modules store not ready in time.",[],[],!0);for(let n=0;n<1e3;n++){let a=e.modulesRevision;if(i<=a)break;if(performance.now()-r>o)throw Wf.debug("component loader not updated in time: want:",i,"got:",a),new En("ensureComponentsInLoader: Component loader not updated in time.",[],[],!0);await ru(AA)}}function ow(e,t){let o=new Set;for(let r of e)t.componentForIdentifier(r)||o.add(r);return Array.from(o)}function zA(e,t){let o=new Set;for(let r of e)nt(t.errorForIdentifier(r))||o.add(r);return Array.from(o)}async function WA(...e){return Promise.race(e.map(async t=>t()))}var rw=_r("componentPresets","componentPresets");function iw(e,t){let o=e.getPresetsListNode();return o?o.getComponentPresets().find(r=>r.componentIdentifier===t)??null:null}function nw(e,t){let{treeStore:o}=e.stores;if(o.tree.has(t.id))return;let r=iw(o.tree,t.componentIdentifier),i=ym(o.tree),n=eI(i.children,l=>Ul(l)&&l.componentIdentifier!==t.componentIdentifier);n!==-1&&(n+=1),o.tree.insertNode(t,i.id,n),pa(e)&&e.stores.codeGenerationStore.createModuleFromComponentSource(i).catch(ra),Ii(t.componentIdentifier)&&e.stores.modulesStore.addExternalModulesToProject([t.componentIdentifier],{onTreeUpdate(){}});let a=Fu(t.componentIdentifier);r||e.scheduler.runWithFullyLoadedTree(()=>{let l=o.getLoadedIndexes();for(let s of l.richTextNodes)s.htmlContent&&wt(o.tree,s,a)&&s.setComponentPreset(t.componentIdentifier,t.id)},{runInBackground:!0,name:"insertComponentPreset"})}function BA(e,t){if(iw(e.tree,t.componentIdentifier))return;let r=fm.createDefault(t);nw(e,r)}function tq(e,t,o){e.scheduler.processWhenReady(()=>{let i=ym(e.tree).getComponentPresets(),n=new Set;for(let l of i){let s=l.resolveValue("name");s&&n.add(s)}let a=fm.createDefault(t,{name:Mr(t.name,n)});nw(e,a);try{o&&o(a)}catch{}})}function oq(e,t){return e.getPresetsListNode()?.getComponentPresets().filter(r=>r.componentIdentifier===t)??[]}function rq(e,t,o){let r=ce(t);function i(a){let l=ce(a);return l.kind==="externalModuleExport"&&r.kind==="externalModuleExport"&&l.moduleId===r.moduleId&&l.exportSpecifier===r.exportSpecifier}let n=e.getPresetsListNode();if(n){let a=n.getComponentPresets();for(let l of a)i(l.componentIdentifier)&&l.set({componentIdentifier:o})}C(!e.getService("loader"),"Tree should be fully loaded");for(let a of e.root.walk()){if(!De(a))continue;let l=a.getComponentPresets();for(let[s,c]of l){let d=Fu(s);i(s)&&wt(e,a,d)&&(a.setComponentPreset(o,c),a.setComponentPreset(s,void 0))}}}function iq(e,t,o){let r=t.find(i=>i.componentIdentifier===o);r&&BA(e,r)}var HA=e=>[`.${e}[data-border="true"]::after, .${e} [data-border="true"]::after { content: ""; border-width: var(--border-top-width, 0) var(--border-right-width, 0) var(--border-bottom-width, 0) var(--border-left-width, 0); border-color: var(--border-color, none); border-style: var(--border-style, none); width: 100%; height: 100%; position: absolute; box-sizing: border-box; left: 0; top: 0; border-radius: inherit; pointer-events: none; }`],GA=e=>[`.${e}[data-selection="true"] * ::selection, .${e} [data-selection="true"] * ::selection { color: var(--selection-color, none); background-color: var(--selection-background-color, none); }`],$A=e=>[`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar { width: 0px; height: 0px; }`,`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar-thumb, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar-thumb { background: transparent; }`,`.${e}[data-hide-scrollbars="true"], .${e} [data-hide-scrollbars="true"] { scrollbar-width: none; }`],aw="data-layout-template",_A={0:HA,1:$A,2:GA},Bf="-container",La,Gd=class{constructor(t,o,r,i){this.entryNode=t;this.sourceNode=o;this.serializationId=r;this.cssVariableDefinitions=i;k(this,"sharedStyleIds",new Set);k(this,"rules",{});k(this,"nodeClassNames",new Map);ie(this,La,new Set);k(this,"selectorsByNodeId",new Map)}getNodeIdForClassName(t){let o=t.endsWith(Bf)?t.slice(0,-Bf.length):t;return this.nodeClassNames.get(o)}get(t=this.sourceNode.id){return t===this.sourceNode.id&&this.getWideGamutColorRule(),{rules:this.rules[t]??new Map}}createScopingSelector(t,o){if(t){let r=`.${this.serializationId}.${IS}v-${Ft(t)}`;return o?`${r}.${o}`:r}return`.${this.serializationId}`}createSelector(t,o,r,i,n=t===this.sourceNode.id){let a=this.createScopingSelector(r,i);return t===this.entryNode.id?`${a}.${o}, ${a} .${o}`:n?`${a}.${o}`:`${a} .${o}`}addRule(t,o,r={}){let{scope:i,gesture:n,container:a,ruleType:l=0,hasScopingSelector:s}=r,c=o.getPrimaryId(),d=NS(l,c);this.nodeClassNames.has(d)||this.nodeClassNames.set(d,o.id),a&&(d+=Bf);let u=this.createSelector(c,d,i,n,s);this.selectorsByNodeId.set(c,u);let f=r.variant?.id??this.sourceNode.id;if(this.createRule(u,Yu(t),f),UA(t)){let y=XA(o,this.serializationId);for(let v in y)this.createRule(v,Yu(y[v]),f)}return d}addConditionalRule(t){F(this,La).add(t)}hasConditionalRule(t){return F(this,La).has(t)}conditionalRules(t){let o=[];return F(this,La).forEach(r=>{let i=_A[r],n=i(t);o.push(...n)}),o}addSharedStyle(t){this.sharedStyleIds.add(t)}createRule(t,o,r=this.sourceNode.id){let i=this.rules[r];if(i){i.set(t,o);return}this.rules[r]=new Map([[t,o]])}getWideGamutColorRule(){let t=this.cssVariableDefinitions.getWideGamutColorRules(`.${this.serializationId}`,this.selectorsByNodeId);t.length!==0&&this.createRule("@supports (color: color(display-p3 1 1 1))",t.join(" "))}};La=new WeakMap;var jA="viewTransitionName";function UA(e){return jA in e&&JA(e)}var sw="-exclude";function JA(e){return ey(e.viewTransitionName)&&e.viewTransitionName.endsWith(sw)}function Hf(e,t,o){let r=Ft(e.getPrimaryId());return o?`${t}-${r}${sw}`:r}function XA(e,t){let o=Hf(e,t,!0);return{[`::view-transition-group(${o})`]:{animation:"none !important"},[`::view-transition-new(${o})`]:{animation:"none !important"},[`::view-transition-old(${o})`]:{animation:"none !important"}}}function lw(e,t,o){return!!(We(e)||We(t)||e.id===o.rootId)}var $d=class{constructor(t,o){this.repeaterNode=t;this.parent=o;k(this,"subqueries",new Map);k(this,"variableDependencies",new Map);k(this,"childRepeaterIds",new Set)}addSubquery(t,o,r){let i=this.getSubqueries(t);i.set(o,r),this.subqueries.set(t,i),this.childRepeaterIds.add(o)}getSubqueries(t){return this.subqueries.get(t)??new Map}addVariableDependencies(t,o){let r=this.getVariableDependencies(t);r.push(...o),this.variableDependencies.set(t,r)}getVariableDependencies(t){return this.variableDependencies.get(t)??[]}};function Gf(e,t){return!cr(e)||E(e.visible)?!0:z(e.visible)?t.createDeduplicatedDynamicValueBinding(e.visible,e,"visible"):e.isVisible()}function $f(e,t,o,r){if(o.inComponentSlot||r||De(e)||Ut(e)||Ye(e)||Pi(e)||io(e)&&Xe.isOn("layoutScroll")||zt(e)&&BS.some(n=>(e[n]?.length??0)>0)||Jt(e)&&!Me(e))return!0;switch(t.scopeType){case"CanvasPage":return!0;case"SmartComponent":return!0;case"LayoutTemplate":case"WebPage":case"DesignPage":if(xe(e)||Oc(e))return!0;if(Jo(e)){let n=e.rotation;if(z(n)||K(n)&&n!==0)return!0}return zc(e);case"VectorSet":return!1;default:At(t.scopeType)}}function wo(e,t){if(Number.isNaN(e)&&Number.isNaN(t)||e===t)return!0;if(nt(e)||nt(t)||R(e)||R(t)||E(e)||E(t)||K(e)||K(t)||rr(e)||rr(t)||uu(e)||uu(t))return!1;if(No(e)||No(t))return No(e)&&No(t)?ue(e)===ue(t):!1;if(ft(e)||ft(t)){if(ft(e)&&ft(t)){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!wo(e[o],t[o]))return!1;return!0}return!1}if(Fe(e)||Fe(t)){if(Fe(e)&&Fe(t)){for(let a in e)if(!wo(e[a],t[a]))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;let o,r,i,n;return ps(e)&&(o=Y.spreadsAtStart(e),r=Y.spreadsAtEnd(e)),ps(t)&&(i=Y.spreadsAtStart(t),n=Y.spreadsAtEnd(t)),!wo(o,i)||!wo(r,n)?!1:ps(e)&&ps(t)?Y.isSorted(e)===Y.isSorted(t):!0}return!1}throw new Error(`Tried to compare unsupported primitive types. ${typeof e} / ${typeof t}`)}var cw={js:m`undefined`,css:"unset"};function ZA(e,t){switch(t){case"js":return cw[t];case"css":return e==="display"?"block":cw[t];default:_(t,`target is not a defined enum: ${t}`)}}function Us(e,t,o){if(!e)return;if(!t)return e;let r={},i=!1;for(let n in e){let a=e[n],l=t[n];wo(a,l)||(E(a)?n in t&&(r[n]=o?ZA(n,o):void 0,i=!0):(r[n]=a,i=!0))}if(i)return r}var _d=(e,t)=>{if(!Ei(e)||!e.codeOverrideEnabled||!e.codeOverrideIdentifier)return;let o=M.componentForIdentifier(e.codeOverrideIdentifier);if(!(o&&iu(o)))return;let r=ce(e.codeOverrideIdentifier);if(!Ge(r))return;let{importSpecifier:i,exportSpecifier:n}=si(r,t.moduleType,t.modulesStore);if(!(!i||!n))return{importSpecifier:i,exportSpecifier:n}};function jd(e,t){let o=[];if(Xe.isOn("overridesWithPropertyControls")&&ks(e)&&e.codeOverrides)for(let r of e.codeOverrides){let i=M.componentForIdentifier(r.identifier);if(!(i&&iu(i)))continue;let n=ce(r.identifier);if(!Ge(n))continue;let a=t.imports.addModuleImport(n);if(!a)continue;let l=xb(r),s=Object.keys(l).length>0&&Wt(l);o.push(s?[a,l]:a)}return o}function dw(e){let t=e.getContentManagementNode();if(t)return C(t.isLoaded(),"ContentManagementNode should be loaded"),t;let o=new av;return e.insertNode(o,e.root.id),o}function KA(e){if(e.type!=="controlReference"&&e.type!=="nodePropertyControlReference")return;let{expectedType:t}=e;C(t==="enum"||t==="segmentedenum"||t==="file")}function p2({galleryImageId:e,isSmartComponent:t}){return t?Array(4).fill(null).map(()=>({id:Lt(),type:"object",value:{[e]:{type:"image",value:void 0}}})):[]}function Js(e,t){return C(e.type!=="responsiveimage",`Image variables are compiled to be responsive images. To
        prevent confusion we don't allow creation of type responsive images.
        Because that would mean that two different types represent the same thing.`),KA(e),e.type!=="trackingid"&&e.type!=="vectorsetitem"&&Ct("variable_create",{scopeType:t,variableType:e.type}),e.type==="image"&&(R(e.initialValue)?su(e.initialValue)||(e.initialValue=void 0):$o(e.initialValue)&&R(e.initialValue.value)&&(su(e.initialValue.value)||(e.initialValue=void 0))),e.type==="array"&&t==="canvas_component"&&(C(e.minCount===void 0,"minCount should not be lifted to component"),C(e.maxCount===void 0,"maxCount should not be lifted to component")),{id:Lt(),...e}}function YA(e,t,o={}){let r=Ud(e),i=qA(e,o),n=r.children,a=new Map;for(let s of t.collections)a.set(s.id,s);let l=[];for(let s of n){let c=s.resolveValue("name");if(nt(c))continue;let d=s.createdFromKitSchemaId?a.get(s.createdFromKitSchemaId):a.get(s.id),u=[];for(let f of s.variables){if(!un(f))continue;if(f.type!=="collectionreference"&&f.type!=="multicollectionreference"){u.push({name:f.name,type:f.type});continue}let y=wr(e,f.dataIdentifier);C(y,"Target collection not found for variable");let v=y.resolveValue("name");C(v,"Collection name not found"),u.push({name:f.name,type:f.type,reference:{collection:v,kind:f.type==="collectionreference"?"single":"multi"}})}l.push({name:c,variables:u,items:i.get(c),createdFromKitTemplate:d?.name})}return l}function b2(e){let t=Ud(e),o=new Map;for(let r of t.children){let i=r.resolveValue("name");nt(i)||o.set(i,r.id)}return o}function Ud(e){let t=e.getContentManagementNode();C(t,"Content management node not found");let o=t.loaded;return C(o,"Content management node not loaded"),o}function qA(e,t={}){let o=Ud(e),r=new Map,i=t.filterOnItemIds;for(let n of o.children){let a=n.resolveValue("name");if(nt(a))continue;let l=n.getSlugVariable(),s=[];for(let c of n.getUnsortedChildren()){if(i&&!i.includes(c.id))continue;let d={id:c.id,slug:Rf(c,l),title:Dd(n,c)};if(!t?.fullSnapshot){s.push(d);continue}s.push({...d,...QA(n,c)})}r.set(a,s)}return r}function QA(e,t){let o={};for(let r of e.variables){if(!un(r))continue;let i=t.getControlProp(r.id);o[r.name.toLowerCase()]=i?.value??r.initialValue??null}return o}function pw(e,t){let o=Ud(e),r=[];for(let i of o.children){if(nt(i.name)||i.id!==t&&i.createdFromKitSchemaId!==t)continue;let n=i.resolveValue("name");C(n,"Collection name not found"),r.push(n)}return r}function I2(e,t){let o=[];for(let r of t.variables){if(!un(r)||r.type!=="collectionreference"&&r.type!=="multicollectionreference")continue;let i=wr(e,r.dataIdentifier);C(i,`Referenced collection for field "${r.name}" not found`),o.push(i)}return o}function eM(e,t,o,r,i){let n=t.getCollectionTemplate(r.collection);C(n,`Collection with alias ${r.collection} not found`);let l=i.find(c=>c.field===o&&r.collection===c.fromTemplate)?.name;if(!l)return;let s=tM(e,n.id,l);return C(s,`Referenced collection for template "${n.name}" not found. Plan must create it first.`),s}function N2(e,t,o,r,i=[],n){let a=[];for(let l of r.variables){let{defaultValueSuggestions:s,reference:c,...d}=l;if(d.type==="collectionreference"||d.type==="multicollectionreference"){C(c,"Reference is required");let u=n?n(c.collection):eM(e,t,l.name,c,i);if(!u)continue;a.push(Js({...d,dataIdentifier:u.instanceIdentifier},"collection"));continue}a.push(Js(d,"collection"))}return new gb({name:o,variables:a,createdFromKitSchemaId:r.id})}function tM(e,t,o){return dw(e).children.find(i=>(i.id===t||i.createdFromKitSchemaId===t)&&i.resolveValue("name")===o)}function x2(e,t,o){let r=new Map;for(let d of t)r.set(d.fromTemplateCollection,{name:d.collectionName,new:d.new});let i=new Map;for(let d of e.fields){if(!d.isCMSConnectedField)continue;let u=o.getCollectionTemplateById(d.collectionId)?.name;if(!u)continue;let f=i.get(u)??new Set;if(d.reference?.collectionId){let y=o.getCollectionTemplateById(d.reference.collectionId)?.name;if(!y)continue;f.add(y),i.has(y)||i.set(y,new Set)}i.set(u,f)}let n=new Map;for(let[d,u]of i)for(let f of u){let y=n.get(f)??new Set;y.add(d),n.set(f,y)}let a=new Map;for(let d of i.keys()){let u=i.get(d);a.set(d,u?.size??0)}let l=[],s=[];for(let[d,u]of a)u===0&&s.push(d);for(;s.length>0;){let d=s.shift();C(d,"Collection ID must exist when the queue is not empty"),l.push(d);let u=n.get(d);if(u)for(let f of u){let y=a.get(f)??0;if(y===0)continue;let v=y-1;a.set(f,v),v===0&&s.push(f)}}let c=[];for(let d of l){let u=r.get(d);u&&c.push({id:d,name:u.name,new:u.new})}return c}function V2(e,t,o,r={}){let i=o.resolveValue("name");C(i,"Collection must have a name");let a=YA(e,t,r).find(l=>l.name===i);return C(a,`Collection snapshot for "${i}" not found`),a}function E2(e){return e.customizationsSectionId??e.id}function uw(e){if(Mc(e)&&e.kitSectionSource)return e.kitSectionSource?.section;if(nm(e))return e.customizationsSectionId}function mw(e,t){if(!nm(t))return!1;let o=e.getParent(t.id);if(!ve(o))return!1;let r=e.getScopeNodeFor(o);return Qy(r)}var oM="$NEW";function A2(e,t,o){let r=new Map;for(let a of o.fields){if(!a.isCMSConnectedField||r.has(a.collectionId))continue;let l=t.find(s=>s.id===a.collectionId);C(l,"Collection template must be defined"),r.set(a.collectionId,l.name)}let i={};for(let[a,l]of r){let s=pw(e,a);i[l]=[...s,oM]}let n=o.fields.map(a=>{if(!a.isCMSConnectedField)return a;let l=r.get(a.collectionId);C(l,"Alias must be defined");let{collectionId:s,reference:c,...d}=a,u=c?{...c,collection:r.get(c.collectionId)}:void 0;return{...d,collection:l,reference:u}});return{id:o.id,description:o.description,rules:o.rules,supportedCollections:i,fields:n,detailPageTemplateId:t.find(a=>a.id===o.detailPageCollectionId)?.name}}function Jd(e,t,o,{pixelSize:r,repeaterInfo:i,context:n}){return Yv(t,o,{resolveAsset:(a,l,s,c)=>{let d,u=na(l)?l.__defaultAssetReference:void 0;return a!==u&&(d=(c?n.assets.resolveResponsiveImage(a,{layerMaxSidePixelSize:r}):n.assets.resolve(a))?.src),!LC(s)||!n.localizedValues?d:n.localizedValues.add(d,s.valueLocalized,f=>{let y=s.valueLocalized?.[f]?.value;return Fo(y)?void 0:y===u?m`undefined`:(c?n.assets.resolveResponsiveImage(a,{layerMaxSidePixelSize:r}):n.assets.resolve(a))?.src})},resolveResponsiveImage:(a,l,s)=>{let c,d,u,f;if(es(l)&&Qa(l.__vekterDefault)?(d=l.__vekterDefault.assetReference,u=l.__vekterDefault.positionX,f=l.__vekterDefault.positionY):na(l)&&(d=l.__defaultAssetReference),(a!==d||s.positionX!==u||s.positionY!==f)&&(c=V.fromValue(n.assets.resolveResponsiveImage(a,{layerMaxSidePixelSize:r,focalPoint:s}))),n.localizedValues&&(c=n.localizedValues.add(c,s.valueLocalized,v=>{let b=s.valueLocalized?.[v];if(!ms(b))return;if(b.value===d&&b.imageFocalPoint?.positionX===u&&b.imageFocalPoint?.positionY===f)return m`undefined`;let x=n.assets.resolveResponsiveImage(b.value,{layerMaxSidePixelSize:r,focalPoint:b.imageFocalPoint});return V.fromValue(x)})),!c)return;if(!n.valueTransforms)return c;let y=s.alt??Sa;return n.localizedValues&&(y=n.localizedValues.add(y,s.altLocalized,v=>s.altLocalized?.[v]?.value)),n.valueTransforms.wrapInAddImageAlt(c,V.fromValue(y))},resolveDynamicValue:(a,l)=>{let s;if(j(a))C(n.variables,"Variables are not supported"),s=n.variables.create(a);else if($t(a)){if(!n.valueTransforms)return;C(e.cache,"Node cache must be passed in when computed values can be created"),s=n.valueTransforms.createComputedValue(a,e,l)}else{return}if(!n.valueTransforms)return s;switch(l.type){case"image":return n.valueTransforms.wrapInToImageSrc(s);case"responsiveimage":return n.valueTransforms.wrapInToResponsiveImage(s);case"gap":case"padding":case"borderradius":return n.valueTransforms.wrapInNumberToPixelString(s);default:return s}},resolveLink:(a,l,s)=>{let c=ts(l.value);if(Tr(c)&&n.localizedValues){let d=l.valueLocalized;return n.localizedValues.add(c.url,d,u=>d?.[u]?.value)}if($t(c)){if(!n.valueTransforms)return;C(e.cache,"Node cache must be passed in when computed values can be created");let d=n.valueTransforms.createComputedValue(c,e,s);return n.links.createResolvedBinding(e,d)}return n.links.resolve(e,c,i)},resolvePageScope:a=>n.links.resolvePageScope(ts(a)),resolveLocalizedValue:(a,l)=>n.localizedValues?n.localizedValues.add(a,l,s=>l?.[s]?.value):a,compileRichText:(a,l)=>{let s=Hi(a,{collectors:n,nodeId:e.getPrimaryId()});return n.localizedValues?n.localizedValues.add(s,l,(c,d)=>{if(!l)return;let u=l[c];if(!u)return;let f=u.value;if(R(f))return Hi(f,{collectors:{...n,...d},nodeId:e.getPrimaryId()})}):s},resolveFont:a=>{if(!cS(a))return{};let l=ql(e);return n.fonts.addFontObjectBySelector(a.fontSelector,l),dS(a)},resolveScrollSectionRef:(a,l)=>{if(!E(l)){if(j(l))return n.variables?.create(l);if(R(l.target)){let s=n.elementIds?.scrollTargetInfo(l);if(s?.ref)return s.ref}}},resolveCustomCursor:(a,l)=>{if(!E(l))return j(l)?n.variables?.create(l):n.customCursors?.addControl(a,e,l)},resolveVectorSetItem:(a,l)=>{if(!E(a))return n.vectorSets?.resolveControl(a,l,e)},resolveColor:a=>R(a)?n.cssVariableDefinitions?.resolveColor(a)??a:a})}function rM(e){return!No(e)&&(R(e)||K(e)||nt(e)||E(e))}function jf(e,t){return t.scopeType!=="SmartComponent"?rM(e):Wt(e)}var fw=Nt((e,t,o)=>{if(!$(e)||!e.isVectorInstance||!de(o))return;let r=M.reactComponentForIdentifier(e.codeComponentIdentifier);if(!r)return;let i=Jd(e,r.properties,e.getControlProps(r.properties),{context:o,pixelSize:void 0,repeaterInfo:void 0});for(let n in i){let a=i[n],l=`--${Ft(n)}`;jf(a,o)&&(t[l]=a??void 0)}});function hw(e,t,o,r,i){let n={...t};xC.has(e.codeComponentIdentifier)&&(n.__fromCodeComponentNode=!0);let a=r.reactComponentForIdentifier(e.codeComponentIdentifier);if(a?.properties){let y=ws(e.intrinsicWidth,e.intrinsicHeight),v=Jd(e,a.properties,e.getControlProps(a.properties),{pixelSize:y,context:o,repeaterInfo:i?o.repeaterInfo.get(i):void 0});if(e.isVectorInstance)for(let b in v){let x=v[b],D=o.scopeType!=="SmartComponent"?!0:void 0;n[b]=jf(x,o)?D:x}else Object.assign(n,v)}let l=hb(r,e.codeComponentIdentifier,n),s=e.getActions(r);for(let y in s)l[y]=o.events?.addHandler({node:e,trigger:y,actionInfo:s[y]});if(e.isVectorInstance)return bm(l);let c=fb(e,r);VC(e)&&Object.assign(l,e.getStylingProps(c,!1));let d=e.id===o.rootId&&o.scopeType!=="SmartComponent",u=c?Object.keys(c):[],f=Fe(c)&&u.length>0&&u.some(y=>!E(c[y]));return Fe(c)&&(f||d)&&d&&(c.width=m`style?.width`,c.height=m`style?.heigh`,f=!0),f&&(l.style?Object.assign(l.style,c):l.style=c),bm(l)}var iM=/\/assets\/(?:(\d+)\/)?([^?]+)\?/u;function nM(e,t){if(typeof DOMParser>"u"||e.indexOf("image")<0)return;let o=ln(e),r=o.querySelector("svg");if(!r)return;let i=new Map;if(o.querySelectorAll("image").forEach(n=>{let a=n.getAttribute("xlink:href");if(!a)return;let l=iM.exec(a);if(!l)return;let s=Number.parseInt(l[1],10),c=l[2],d="::ASSET::"+i.size+"::",f=t?.resolveResponsiveImage(c,{layerMaxSidePixelSize:s})?.src??Dl(c,s);i.set(d,f),n.setAttribute("xlink:href",d)}),i.size!==0)return r.outerHTML.replace(/::ASSET::\d+::/gu,n=>i.get(n)??`missing:${n}`)}function Xd(e,t){let o=e.svg;R(o)&&(e.svg=nM(o,t)??o)}var gw=Q((e,t,o)=>{if(!Nb(e)||!Va(o?.scopeType))return;if(Xv(e)||Ut(e)&&z(e.fillImage)){t["aria-label"]=void 0;return}if(de(o)&&z(e.ariaLabel)){t["aria-label"]=o.createDeduplicatedDynamicValueBinding(e.ariaLabel,e,"ariaLabel");return}let r=e.resolveValue("ariaLabel",o?.variableOverrides);if(R(r)&&r!==""){t["aria-label"]=r;return}t["aria-label"]=void 0});var yw=Q((e,t,o)=>{let r=Jt(e),i=!!(e.parentid&&o?.renderAsListNodes?.has(e.parentid));if(!Pe(e)){if(!Me(e)&&r&&(t.as="a"),i){t.as="li";return}return}if(!Ut(e))return;let n=e;if(r){t.as="a";return}if(i){t.as="li";return}let a=n.htmlTag??Ac;a!=="div"&&(t.as=a)});var Cw=Q((e,t,o)=>{if(!Ub(e)||!de(o))return;let r=e.getPrimaryId(),i=o.events.overlayState.get(r);i&&(z(e.backdropDismissible)?t.onTap=m`() => ${o.createDeduplicatedDynamicValueBinding(e.backdropDismissible,e,"backdropDismissible")} && ${V.fn(m`${i}.hide`)}`:t.onTap=e.resolveValue("backdropDismissible")?m`() => ${V.fn(m`${i}.hide`)}`:void 0,t.initial={opacity:0},t.key=r,e.backdropTransitionLocked?(t.transition=xi(e.backdropEnterTransition??$c),t.animate={opacity:1},t.exit={opacity:0}):(t.animate={opacity:1,transition:xi(e.backdropEnterTransition??$c)},t.exit={opacity:0,transition:xi(e.backdropExitTransition??$c)}))});var Sw=Q((e,t,o)=>{if(!Xo(e)&&Mo(e)){if(_o(e)&&!e.fillEnabled){t.background=void 0;return}t.background=mb(e,!0,o),t.background&&_e(e)&&(e.heightType===5?t.fitImageDimension="height":e.widthType===5?t.fitImageDimension="width":t.fitImageDimension=void 0)}});var Tw=Q((e,t,o)=>{!ii(e)||!e.borderEnabled||Sv(e)||(t["data-border"]=!0,de(o)&&o.css.addConditionalRule(0))});var bw="data-reset",Iw=Q((e,t,o)=>{if(de(o)&&!(o.scopeType==="CanvasPage"||o.scopeType==="DesignPage")&&Bi(e)){if(!dT(e.htmlTag)){t[bw]=void 0;return}e.htmlTag==="button"&&(t[bw]="button")}});function Uf(e,t,o){let r=Ho(o)?o.localId:o?.moduleId,i=e.get(r);if(dC(i))return i.pluginId;if(!Rc(i))return;if(!E(i.save.pluginId))return i.save.pluginId;let n=t.getPersistedModuleByLocalId(i.id);if(!n)return;let a=n.metadata.pluginId;if(R(a))return a}function T4(e,t,o,r){let i=Uf(e.tree,t,r);if(!E(i))return o.manifestById.get(i)}function b4(e){return`Edit in ${e.name}`}function xw(e,t){if(Ho(e))return ce(e).type;if(Ii(e)){let r=t.getExternalModuleNodes().find(i=>i.codeComponentIdentifier===e);return r?r.type:void 0}}var Vw=Q((e,t,o)=>{if(!$(e)||!de(o)||!Yo(e))return;t.scopeId=o.scopeId,t.nodeId=e.getPrimaryId(),t.isAuthoredByUser=xw(e.codeComponentIdentifier,o.treeStore.tree)==="codeFile"?!0:void 0;let r=Ii(e.codeComponentIdentifier);r&&(t.isModuleExternal=r);let i=o.nodeRendersWithMotion.get(e);i&&(t.rendersWithMotion=i);let n=ce(e.codeComponentIdentifier);t["data-code-component-plugin-id"]=Uf(o.treeStore.tree,o.modulesStore,n)});var Pw=Q((e,t,o)=>{Pb(e)&&Va(o?.scopeType)&&(t["data-nosnippet"]=wb(e)?e.dataNosnippet:void 0)});var ww=Q((e,t,o)=>{if(!Is(e))return;let r=de(o)&&z(e.draggable)?o.createDeduplicatedDynamicValueBinding(e.draggable,e,"draggable"):e.resolveValue("draggable")??cT(e);t.draggable=!E(r)&&!z(e.draggable)?r.toString():r});var kw=Q((e,t,o)=>{if(!de(o)||Io(e)||!Ta(e)&&!dc(e))return;let r=o.treeStore.tree.get(o.scopeId);Dr(r)&&rT(r)&&Object.assign(t,o?.events?.eventHandlersForNode(e))});var Rw=Q((e,t,o)=>{if(!Me(e))return;let r=e.getFontsForLoading();if(de(o)){let i=ql(e);for(let n of r)o.fonts?.addFontObjectBySelector(n,i)}t.fonts=r.length>0?r:void 0});var Dw=Q((e,t,o)=>{SI(e)&&(t.step=de(o)&&z(e.formInputStep)?o.createDeduplicatedDynamicValueBinding(e.formInputStep,e,"step"):e.resolveValue("formInputStep"))});var Lw=Q((e,t,o)=>{if(Ds(e)){if(de(o)){t["data-hide-scrollbars"]=z(e.hideScrollbars)?o.createDeduplicatedDynamicValueBinding(e.hideScrollbars,e,"hideScrollbars"):e.hideScrollbars||void 0,E(e.hideScrollbars)||o.css.addConditionalRule(1);return}t["data-hide-scrollbars"]=e.resolveValue("hideScrollbars",o?.variableOverrides)?!0:void 0}});var Fw=Q((e,t,o)=>{!zt(e)||o?.scopeType==="WebPage"||(t["data-highlight"]=GS(e,M)||void 0)});var Jf=Q((e,t,o)=>{if(!de(o)||!o.llmSnapshot)return;let r=sM(e);if(r&&(t["data-type"]=r),$(e)&&!e.isVectorInstance){let i=cM(e);if(!i)return;let{keys:n,labels:a}=i;n.length>0&&(t["data-prop-keys"]=n.join(",")),a.length===n.length&&a.length>0&&(t["data-prop-labels"]=a.join(","))}});function sM(e){if(De(e)&&!lM(e))return"text";if($(e))return e.isVectorInstance&&!z(e.dynamicVectorSetIdentifier)?"icon":"component"}function lM(e){return j(e.htmlContent)?!0:z(e.textContent)||j(e.textContent)}function cM(e){let t=M.componentForIdentifier(e.codeComponentIdentifier);if(!t?.properties)return;let o=e.getControlProps(t.properties),r=[],i=[];for(let n in o){let a=o[n];if(!a)continue;let{type:l,value:s}=a;if(l!=="string"&&l!=="vectorsetitem"||z(s)||j(s))continue;r.push(n);let c=t.properties?.[n]?.title;i.push(c??n)}return r.length>0?{keys:r,labels:i}:void 0}var Ew=Q((e,t,o)=>{if(!ye(e)||!Ae(e)||!de(o)||o.scopeType!=="LayoutTemplate")return;let r=e.tree()?.getParent(e.id);if(!ve(r))return;let{center:i}=OT(e);uy(t,WT(e)?i:void 0)});var Aw=Q((e,t,o)=>{if(!Jt(e)||Me(e))return;if(o?.variables&&j(e.linkOpenInNewTab)){t.openInNewTab=o.variables.create(e.linkOpenInNewTab);return}let r=e.resolveValue("linkOpenInNewTab",o?.variableOverrides);rr(r)&&(t.openInNewTab=r)}),Mw=Q((e,t,o)=>{if(!Jt(e)||Me(e))return;if(o?.variables&&j(e.linkSmoothScroll)){t.smoothScroll=o.variables.create(e.linkSmoothScroll);return}let r=e.resolveValue("linkSmoothScroll",o?.variableOverrides);rr(r)&&(t.smoothScroll=r)}),Ow=Q((e,t,o)=>{if(!Jt(e)||Me(e))return;if(o?.variables&&j(e.linkClickTrackingId)){t.clickTrackingId=o.variables.create(e.linkClickTrackingId);return}let r=e.resolveValue("linkClickTrackingId",o?.variableOverrides);R(r)&&(t.clickTrackingId=r)}),zw=Q((e,t,o)=>{if(!Jt(e)||Me(e))return;let r=e.resolveValue("linkRelValues",o?.variableOverrides);if(o?.variables&&j(e.linkRelValues)){t.relValues=o.variables.create(e.linkRelValues);return}By(r)&&(t.relValues=r)}),Ww=Q((e,t,o)=>{if(!Jt(e)||Me(e))return;if(o?.variables&&j(e.linkPreserveParams)){t.preserveParams=o.variables.create(e.linkPreserveParams);return}let r=e.resolveValue("linkPreserveParams",o?.variableOverrides);rr(r)&&(t.preserveParams=r)}),Bw=Q((e,t,o)=>{if(!Wi(e)||Me(e))return;if(!Jt(e)){t.href=void 0;return}let r=e.getLink();$t(r)?t.href=o?.valueTransforms?.createComputedValue(r,e,void 0):Tr(r)&&e.linkLocalized&&o?.localizedValues?t.href=o.localizedValues.add(r.url,e.linkLocalized,i=>e.linkLocalized?.[i]?.value):t.href=o?.links?.create(r)}),Hw=Q((e,t)=>{if(is(e)){let o=new Set,r=e.getInlineLinks(!1);R(e.link)&&r.push(e.link),r.forEach(i=>{if(!i||!Ey(i))return;let n=Ay(i)?.target;n&&o.add(n)}),t.__link=e.link,o.size&&(t.preload=Array.from(o))}}),Gw=Q((e,t)=>{t.nodeId=e.getPrimaryId()}),$w=Q((e,t,o)=>{t.scopeId=o?.scopeId});var _w=Q((e,t,o)=>{if(!Ec(e)||!de(o)||!Wc(o.scopeType)||ot(e))return;if(!lT(e)){t.drag=void 0;return}let r,i;!e.dragEffectFreeform&&o.scopeType!=="SmartComponent"?r=o.elementIds.scrollTargetInfo({target:e.dragEffectConstraintElement,collectionItem:e.dragEffectConstraintItem})?.ref:e.dragEffectSnapBack&&(i=!0);let n=e.dragEffectTransition?xi(e.dragEffectTransition):void 0,a=n?o.declarations.file.dedupe("inertia",n):void 0,l=r||i,s=m`e`,c={drag:!0,dragConstraints:r,dragMomentum:!!e.dragEffectMomentum,dragTransition:l?a:void 0,dragSnapToOrigin:i,onMouseDown:o.declarations.file.dedupe("preventDefault",m`(${s}) => ${s}.preventDefault()`)};Object.assign(t,c)});var dM="--extracted-",pM=["--framer-text-color","--framer-text-stroke-width","--framer-text-stroke-color","--framer-font-variation-axes"];function Xs(e,t){let o=Ia(e);return jw(o,(r,i)=>{for(let n of pM){let a=r.style.getPropertyValue(n);if(!a)continue;let l=uM(i,n),s=mM(l,a);t&&(t[l]=a),r.style.setProperty(n,s)}}),o.innerHTML}function uM(e,t){return dM+Ft(e+t)}function mM(e,t){return`var(${e}, ${t})`}function jw(e,t,o=""){for(let r=0;r<e.children.length;r++){let i=e.children[r];if(i instanceof HTMLElement){let n=o+i.tagName+r;t(i,n),jw(i,t,n)}}}var Uw=Q((e,t,o)=>{if(!ac(e)||!de(o))return;let r=o.scopeType==="SmartComponent",i=r?Xs(e.html):e.html,{assets:n,imports:a,variables:l,links:s,cssVariableDefinitions:c}=o||{};if(C(n&&a&&s,"assets, imports, links must exist at this point"),j(e.htmlContent))C(l,"context.variables should exist if we are dealing with variables references"),t.children=l.create(e.htmlContent);else{let d=Hi(i,{collectors:{assets:n,imports:a,links:s,variables:l,cssVariableDefinitions:c},useFramerMotion:r,nodeId:e.getPrimaryId(),scopeId:o.scopeId}),u=Jc(i);t.children=o.localizedValues.add(d,e.htmlLocalized,(f,y)=>{let v=_I(u,e.htmlLocalized?.[f],i);if(!v)return;let b;return v.type==="rich-text"?(b=$I(e.html,v.value),r&&(b=Xs(b))):b=jb(i,v.value),Hi(b,{collectors:{assets:n,...y},useFramerMotion:r,nodeId:e.getPrimaryId(),scopeId:o.scopeId})})}De(e)&&$o(e.anchorLinkOffsetY)&&(t.anchorLinkOffsetY=e.anchorLinkOffsetY),o.metrics?.measureLength("textBytes",t.__htmlStructure),o.metrics?.measureLength("textBytes",t.htmlFromDesign),o.metrics?.measureLength("textBytes",t.children)});var Jw=Q((e,t,o)=>{if(!(!ki(e)||!e.colorable)){if(_o(e)&&!e.fillEnabled){t.fill=null;return}if(Mo(e)&&!(e.fillType==="linear-gradient"&&e.fillLinearGradient||e.fillType==="radial-gradient"&&e.fillRadialGradient||e.fillType==="conic-gradient"&&e.fillConicGradient)){if(e.fillType==="image"&&e.fillImage){t.fill=ub(e,o,o?.variableOverrides);return}if(e.fillColor){if(z(e.fillColor)&&de(o)){t.fill=o.createDeduplicatedDynamicValueBinding(e.fillColor,e,"fillColor");return}t.fill=e.resolveValue("fillColor",o?.variableOverrides)}}}});var Xw=Q((e,t,o)=>{if(!lc(e)||!qC(e))return;let r=Wi(e)&&R(e.link)?e.link:void 0,i=XC(e)?e.htmlTextTag:void 0,{alignment:n,rawHTML:a}=e.getStyledText().getProps(e,r,i,()=>{});t.alignment=n,t.rawHTML=a?m`${a}`:void 0,o?.metrics?.measureLength("textBytes",t.rawHTML)});var Zw=Q((e,t,o)=>{if(!wv(e))return;let r=e.textContent;if(!r){t.text=void 0;return}if(de(o)){if(Ly(r)){let i=r.transforms[0],n=o.imports.addImport("framer",{exportSpecifier:"RelativeDate"});t.text=tt.tag(n,new Y({date:vr(r)?o.variables.create(r.startValue):o.fetches.createFetchBinding(e,r.startValue),dateFormat:i.format,dateStyle:i.dateStyle,dateCapitalize:i.capitalize??!1,locale:i.locale}))}else z(r)?t.text=o.createDeduplicatedDynamicValueBinding(r,e,"textContent"):_(r,"text content must be a variable or a computed value");o?.metrics?.measureLength("textBytes",t.text)}});var Kw=Q((e,t,o)=>{!Hc(e)||!e.resolveValue("textSelection")||(t["data-selection"]=!0,de(o)&&o.css.addConditionalRule(2))});var Yw=Q((e,t)=>{Ls(e)&&(t.verticalAlignment=e.textVerticalAlignment)});var qw=Q((e,t)=>{aI(e)&&(t.description=R(e.description)&&e.description!==""?e.description:void 0,t.title=R(e.title)&&e.title!==""?e.title:void 0)});function fM(e){if(xe(e))return e.variantTransition;if(xs(e))return e.transition}var Qw=Q((e,t,o)=>{if(o.scopeType!=="SmartComponent")return;let r=fM(e);if(z(r)){t.value=o.createDeduplicatedDynamicValueBinding(r,e,"transition");return}if(!r){t.value=void 0;return}let i=xi(r);t.value=o.declarations.file.dedupe("transition",i)});var hM="-container",Zf=m`formState`,gM=Q((e,t,o)=>{ki(e)&&(t.withExternalLayout=!0,t.intrinsicHeight=e.intrinsicHeight||void 0,t.intrinsicWidth=e.intrinsicWidth||void 0,t.svg=m`${e.svg}`,Xd(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg))}),yM=Q((e,t,o)=>{if(!Ee(e))return;C(t instanceof Y,"");let r=km.shared().getSVGStringForNode(e),i=e.contentHash;Y.assign(t,{layout:o?.scopeType==="SmartComponent"?"position":void 0,intrinsicWidth:void 0,intrinsicHeight:void 0,...Cm(e),withExternalLayout:!0,svgContentId:i,svg:r});let n=t.style?.opacity;(n||Number.isFinite(Number(n)))&&(t.opacity=n),Xd(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg)}),CM=Q((e,t,o)=>{if(!Pt(e))return;let r=km.shared().getSVGStringForNode(e);Object.assign(t,{intrinsicWidth:void 0,intrinsicHeight:void 0,...Cm(e),svg:r,withExternalLayout:!0,requiresOverflowVisible:jI(e)});let i=t.style?.opacity;(i||Number.isFinite(Number(i)))&&(t.opacity=i),Xd(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg)});function SM(e){return e.codeComponentIdentifier==="framer/Prototype"}function Xf(e,t,o,r,i){if(!$(e))return;let{lastRepeaterId:n,layoutId:a}=i;if(Y.assign(t,hw(e,void 0,o,M,n)),SM(e))t.scaleTo="dynamic";else if(Bd(e))t.__fromCanvasComponent=!0;else if(!e.isVectorInstance)t.width="100%",t.height="100%",t.id=e.getPrimaryId(),e.name!==null&&!t.name&&!nv(e.name)&&(t.name=e.name);else{let c=Jo(e)&&(z(e.rotation)||K(e.rotation)&&e.rotation!==0);t[VT]=o.scopeType==="SmartComponent"?!0:Oc(e)||c||zc(e)}$T(e,t,o);let l=o.events.overlayTriggerOverlayBindings.get(e.getPrimaryId());if(bT(e)&&l?.size){let c=new V(Array.from(l.values())?.map(d=>m`${d}.visible`)?.join(" || "));t.variant=m`(${c}) ? ${e.whileOpenEffectVariant} : ${t.variant??m`undefined`}`}fT(o.treeStore.tree,e)&&(t.type="submit",uT(e)&&(t.variant=V.fn(o.declarations.file.dedupe("formVariants",m`(form, variants, currentVariant) => { ${m.joinLines(m`switch(form.state) {${m.joinLines(m`case "success": return variants.success ?? currentVariant`,m`case "pending": return variants.pending ?? currentVariant`,m`case "error": return variants.error ?? currentVariant`,m`case "incomplete": return variants.incomplete ?? currentVariant`)}}`)} }`),Zf,{success:e.formButtonSuccessVariantEnabled?e.formButtonSuccessVariant:void 0,error:e.formButtonErrorVariantEnabled?e.formButtonErrorVariant:void 0,pending:e.formButtonPendingVariantEnabled?e.formButtonPendingVariant:void 0,incomplete:e.formButtonIncompleteVariantEnabled?e.formButtonIncompleteVariant:void 0},t.variant??m`undefined`)));let s=o.treeStore.tree.get(i.lastRepeaterId);if(Ir(s)&&dr(s)&&(li(e,s)||aT(e))&&(t.variant=s&&sT(e)?V.fn(o.declarations.file.dedupe("loaderVariants",m`(repeaterState, variants, currentVariant) => { ${m.joinLines(m`if (repeaterState.currentPage >= repeaterState.totalPages) return variants.disabled ?? currentVariant`,m`if (repeaterState.isLoading) return variants.loading ?? currentVariant`,m`return currentVariant`)} }`),o.bindings.createWithNode("paginationInfo",s),{disabled:e.dataLoaderDisabledVariantEnabled?e.dataLoaderDisabledVariant:void 0,loading:e.dataLoaderLoadingVariantEnabled?e.dataLoaderLoadingVariant:void 0},t.variant??m`undefined`):void 0),Di(e)||r.identifiers&&r.identifiers.size>1){let c=ce(e.codeComponentIdentifier);C(Ge(c),`Expected a module export identifier, got ${c}`);let{importSpecifier:d,exportSpecifier:u,importBinding:f}=si(c,o.moduleType,o.modulesStore);C(d,"A module must have an import specifier."),t.Component=j(e.dynamicVectorSetIdentifier)?o.vectorSets.resolveVariableInstance(e):o.imports.addImport(d,{exportSpecifier:u,importBinding:f})}t.layoutId=a??e.getPrimaryId()}var vM=(e,t,o,r)=>{let i=new Y;return Xf(e,i,t,o,r),Jf(e,i,t),i},TM=Sn(gw,yw,Cw,Sw,Tw,Vw,Db,Iw,Pw,ww,kw,Rw,mI,Lb,gI,vI,Dw,wI,TI,bI,Fb,_T,Lw,Fw,Ew,Hw,jT,_w,HT,RT,UT,JT,BT,Uw,yM,Xw,tI,Jw,gM,lI,Zw,oI,rI,Kw,Yw,qw,CM);function bM(e){if(E(e)||e instanceof Y&&Y.hasSpreads(e))return e;for(let t of Object.values(e))if(!E(t))return e}function Zd(e){return e.declarations.component.dedupe("scopingClassNames",V.fn(e.imports.addImport("framer",{exportSpecifier:"cx"}),te.serializationHash,m`...${te.sharedStyleClassNames}`))}var IM=(e,t,o,r,{style:i,className:n})=>{let a=new Y;TM(e,a,t),Io(e)&&Yo(e)||Jf(e,a,t);let l=e.getPrimaryId()===t.rootId;if(a.style||i||l){let y={};if(Fe(a.style)&&Object.assign(y,a.style),i&&Object.assign(y,i),a.style=bM(y),l){let v=new Y(a.style);Y.addSpreadAtEnd(v,m`style`),a.style=v}}let s=[];a.className&&s.push(a.className),n&&s.push(n),l&&(s.unshift(Zd(t)),s.push(te.className),a.ref=te.refBinding,Y.addSpreadAtStart(a,te.restProps),t.scopeType==="SmartComponent"&&(s.push(te.classNames),Y.addSpreadAtStart(a,te.gestureHandlers))),t.scopeType==="WebPage"&&mw(t.treeStore.tree,e)&&(a["data-section-id"]=e.getPrimaryId()),(We(e)||We(t.treeStore.tree.getParent(e.id)))&&s.unshift(Zd(t)),s.length===1?a.className=s[0]:s.length>1&&(a.className=V.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),...s)),t.scopeType==="LayoutTemplate"&&ve(e)&&(a[aw]=!0);let{withKey:c,layoutId:d}=o,u=d??e.getPrimaryId();c&&(a.key=u),t.scopeType==="SmartComponent"?(a.layoutId=Yo(e)?u+hM:u,a.layoutDependency=m`layoutDependency`):t.scopeType==="CanvasPage"&&(a.layoutIdKey=u,e.duplicatedFrom&&e.duplicatedFrom.length>0&&(a.duplicatedFrom=e.duplicatedFrom)),$(e)&&(Yo(e)?o.inComponentSlot&&(a.inComponentSlot=o.inComponentSlot):(Bd(e)&&(a.__fromCanvasComponent=!0),Xf(e,a,t,r,o)),io(e)&&(a.layoutScroll=!0)),Me(e)&&(a.withExternalLayout=!0,a.__fromCanvasComponent=!0),rc(e)&&t?.scopeType==="WebPage"&&!xe(e)&&(a.id=e.scrollTargetEnabled?t.elementIds.id(e):void 0),a["data-framer-cursor"]=t.customCursors.add(e),Ye(e)?Object.assign(a,{role:"dialog"}):a[gu]=t.elementIds.portalId(e),LT(e)&&(a.id=a.id??t.elementIds.id(e),a.lightboxClassName=Zd(t));let f=t.treeStore.tree.get(o.lastRepeaterId);return f&&$(e)&&li(e,f)&&Object.assign(a,{__paginationInfo:t.bindings.createWithNode("paginationInfo",f),__loadMore:t.bindings.createWithNode("loadMore",f)}),a},NM=Sn(Bw,Aw,Mw,Ow,zw,Ww,Gw,$w);function xM(e,t){let o=new Y({motionChild:!0});return NM(e,o,t),o}function VM(e,t){let o=new Y;return Qw(e,o,t),o}var PM=new Y({placement:void 0,alignment:void 0,offsetX:void 0,offsetY:void 0,className:void 0,anchorRef:void 0,floatingRef:void 0,onDismiss:void 0,portalSelector:void 0,safeArea:void 0,collisionDetection:void 0});function wM(e,t){if(!ma(e))return;if(!Ye(e))return PM;let o=t.events.overlayState.get(e.getPrimaryId());if(!o)return;let r=t.treeStore.tree.getParent(e.getPrimaryId());if(r)return new Y({placement:e.floatingPlacement,alignment:e.floatingAlignment,offsetX:e.floatingOffsetX,offsetY:e.floatingOffsetY,anchorRef:t.rootId===r.id?m`${te.refBinding}`:t.elementIds.ref(r),onDismiss:m`${Od(o,"hide")}`,safeArea:e.floatingSafeArea??!0,zIndex:rS(e)?e.zIndex:void 0,collisionDetection:e.floatingCollisionDetection??!1,collisionDetectionPadding:e.floatingCollisionDetection?e.floatingCollisionPadding??uc:void 0,[gu]:t.elementIds.portalId(e),className:V.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),Zd(t),t.scopeType==="SmartComponent"?te.classNames:void 0)})}function kM(e,t){if(!We(e))return;let o=!1;return Wt(e.backdropDismissible)?o=e.backdropDismissible:z(e.backdropDismissible)&&(o=t.createDeduplicatedDynamicValueBinding(e.backdropDismissible,e,"backdropDismissible")??!1),new Y({blockDocumentScrolling:e.blockDocumentScrolling,dismissWithEsc:o})}function ek(e,t){let o=t.fetches.getFetchesForNode(e);return new Y({requests:o??[],disabled:t.scopeType==="SmartComponent"?te.isLoading:void 0})}function RM(e,t){if(!$(e))return;let o=new Y;if(M.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerComponentViewportWidth==="true"){let n=t.simulatedDOM.getComponentViewportContext(e);Object.assign(o,n)}return o}function tk(e){if(!Xl(e)||!_e(e)||!Ae(e))return;let t={width:void 0,height:void 0};return e.widthType===1&&Number.isFinite(e.width)&&(t.width=`${e.width*100}%`),e.widthType===3&&Number.isFinite(e.width)&&(t.width=e.cache.parentDirection==="horizontal"?pm(e.width):ar(e.width*100,"%")),e.heightType===1&&Number.isFinite(e.height)&&(t.height=`${e.height*100}%`),e.heightType===3&&Number.isFinite(e.height)&&(t.height=e.cache.parentDirection==="vertical"?pm(e.height):ar(e.height*100,"%")),new Y(t)}function Kf(e,t,o,r,{className:i,style:n}={}){let a=IM(e,t,r,o,{style:n,className:i}),l=VM(e,t),s=wM(e,t),c=kM(e,t);if(Io(e)&&Yo(e)){let d=vM(e,t,o,r),u=ek(e,t);return{container:a,transition:l,floating:s,overlay:c,fetcher:u,element:d,componentViewport:RM(e,t),tickerItem:tk(e)}}return{element:a,transition:l,floating:s,overlay:c,link:xM(e,t),fetcher:ek(e,t),tickerItem:tk(e)}}var DM=["onTap","onTapStart","onClick","onMouseDown","onMouseUp"],LM=(e,t)=>{if(!zt(t)||!iT(e,t))return!1;let o=t.getActions(M);return DM.some(r=>{if(r in o){let i=o[r];return i?i.length>0:!1}return!1})},ok=Nt((e,t,o)=>{if(!mn(e)||sr(e))return;if(z(e.cursor)&&de(o)){t.cursor=o.cssVariableDefinitions.create(e,"cursor");return}if(e.cursor&&iS(e.cursor)){t.cursor=e.resolveValue("cursor",o?.variableOverrides),De(e)&&e.hasLinks()&&(t.cursor=void 0,t[nS]=e.cursor);return}if(!de(o))return;let r=xe(e)&&o.topLevelVariantsWithGestures[e.id];t.cursor=r||LM(o.treeStore.tree,e)?"pointer":void 0});var rk=Nt((e,t)=>{Jt(e)&&(t.textDecoration="none")});var ik=Nt((e,t,o)=>{ye(e)&&Bi(e)&&o?.renderAsListNodes?.has(e.id)&&(t.listStyle="none",t.margin=0)});var nk=Nt((e,t,o)=>{if(!(!as(e)||!Ao(e))&&TC(e)){if(z(e.overscrollBehavior)&&de(o)){t.overscrollBehavior=o.cssVariableDefinitions.create(e,"overscrollBehavior");return}t.overscrollBehavior=e.resolveValue("overscrollBehavior",o?.variableOverrides)}});var ak=Nt((e,t)=>{rc(e)&&(t.scrollMarginTop=K(e.scrollMarginTop)&&e.scrollTargetEnabled&&e.scrollMarginTop>0?e.scrollMarginTop:void 0)});var sk=Nt((e,t,o)=>{if(!Rb(e))return;if(z(e.tapHighlightColor)&&de(o)){t.WebkitTapHighlightColor=o.cssVariableDefinitions.create(e,"tapHighlightColor");return}let r=e.resolveValue("tapHighlightColor",o?.variableOverrides);if(pn(r)){t.WebkitTapHighlightColor=cs(r);return}t.WebkitTapHighlightColor=r?ia.toRgbString(r):void 0});var lk=Nt((e,t,o)=>{if(!Hc(e))return;let r=e.resolveValue("textSelection");t["--selection-color"]=r?.color,t["--selection-background-color"]=r?.backgroundColor});var ck=Nt((e,t,o)=>{if(ss(e)){if(z(e.userSelect)&&de(o)){t.userSelect=t.WebkitUserSelect=o.cssVariableDefinitions.create(e,"userSelect");return}t.userSelect=t.WebkitUserSelect=bC(e)?e.resolveValue("userSelect",o?.variableOverrides):void 0}});var dk=Nt((e,t,o)=>{if(!Vs(e)||!de(o)||o.scopeType!=="LayoutTemplate")return;let r=o.treeStore?.tree.getParent(e.id);ve(r)&&(t.viewTransitionName=e.viewTransitionNone===!0?Hf(e,o.serializationId,!0):void 0)});var uk=Nt((e,t,o)=>{let r=EM(e,o);t.willChange=r}),pk=`var(${cy}, transform)`;function EM(e,t){if(Wc(t?.scopeType)&&(MT(e)&&(TT(e)||IT(e))||t?.scopeType!=="SmartComponent"&&CT(e)&&hT(e.styleAppearEffectTrigger)==="onMount"))return pk;if(!yt(e)||!Ao(e)||!vC(e.overflow))return;let o=Lr(e)&&e.radius,r=ti(e)&&e.radiusPerCorner&&(e.radiusBottomLeft||e.radiusBottomRight||e.radiusTopLeft||e.radiusTopRight);if(o||r)return`var(${ly}, transform)`;if(XT(e))return`var(${dy}, filter)`}var AM=Sn(Yb,kT,hI,ok,Eb,yI,Ab,KT,Mb,Ob,NI,zT,rk,ik,ib,nk,Iv,qT,ak,lk,zb,eb,sk,II,tb,cb,sb,ck,dk,uk,pb),Yf=Sn(Kb,vv,ob,fI,Tv,rb,ZT,bv,CI,xI,PI,VI,Pv,PT,YT,Nv,xv,nb,ab,Vv,fw),qf=Sn(lb,QT);function MM(e,t){return nt(e)||qt(e)||$(e)?"relative":We(e)?"fixed":Yr(e)||Ye(t)?"relative":"absolute"}function Qf(e,t,o,r){let i={position:MM(t,e),zIndex:We(t)?db(t,o):void 0,...r},n=o.scopeType==="WebPage"||o.scopeType==="LayoutTemplate"||o.nodeRendersWithMotion?.get(e)===!1,a={};return o.llmSnapshot&&Object.assign(a,i),AM(e,o.llmSnapshot?a:i,o),Yf(e,!o.llmSnapshot&&n?i:a,o),ac(e)&&o.scopeType==="SmartComponent"&&Xs(e.html,a),qf(e,a,o),{css:i,style:Gt(a)?void 0:a}}var Fa={opacity:1,rotate:0,borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,backgroundColor:"rgba(0, 0, 0, 0)",boxShadow:"none",filter:"none",WebkitFilter:"none",backdropFilter:"none",WebkitBackdropFilter:"none",mask:"none",WebkitMask:"none",textShadow:"none",scale:1,rotateX:0,rotateY:0,skewX:0,skewY:0,z:0,padding:0};function OM(){let e={},t={},o={},r={},i={},n={};return[[new di({fillEnabled:!0,fillType:"color",fillColor:"rgba(0, 0, 0, 0)",borderWidth:0,borderEnabled:!0,borderColor:"rgba(0, 0, 0, 0)",borderStyle:"solid"}),e],[new uI,t],[new iI,o],[new In({codeComponentIdentifier:"framer/Page"}),r],[new sI,i],[new ui,n]].forEach(([l,s])=>{Yf(l,s,{}),qf(l,s,{})}),{FrameNode:Object.assign(e,Fa),TextNode:Object.assign(t,Fa),RichTextNode:Object.assign(o,Fa),CodeComponentNode:Object.assign(r,Fa),SVGNode:Object.assign(i,Fa),ShapeContainerNode:Object.assign(n,Fa)}}var mk=OM();function fk(e,t,o){if(!(!o||E(e.__class)||No(t.style))&&!(!E(t.style)&&!Fe(t.style)))for(let r in o){if(E(t.style?.[r])&&E(o[r])||t.style&&r in t.style&&!E(t.style[r])&&!E(o[r]))continue;let i=mk?.[e.__class];if(!i||!(r in i)){E(o[r])&&(o[r]=m`undefined`);continue}let n=i[r];if(E(t.style?.[r])){let a=t.style??{};a[r]=n,t.style=a}E(o[r])&&(o[r]=n)}}function An(e,t,o){let r=e.originalid===t?e.id:Uo(e.id,t);return o.get(r)}function zM(e){let t=e.children?.find(i=>Nr(i));if(!t)return;let o=e.itemsOrder?e.itemsOrder.indexOf(t.getPrimaryId()):e.children?.indexOf(t);if(!K(o)||o<0||!e.itemsOrder&&e.children&&o===e.children.length-1)return;let r=new Map;return e.itemsOrder?e.itemsOrder.forEach((i,n)=>{if(i===t.originalid)return;let a=n<o?-1e3:1e3;r.set(i,n+a)}):e.children?.forEach((i,n)=>{if(i===t)return;let a=n<o?-1e3:1e3;r.set(i.getPrimaryId(),n+a)}),r}function hk(e,t){if(t==="LayoutTemplate"&&ve(e))return zM(e);let o=e.itemsOrder;if(!o||o.length<1)return;let r=new Map;return o.forEach((i,n)=>{r.set(i,n)}),r}var WM=e=>(t,o)=>!o||!e?t:{...t,...o[e]};function Sk(e,t,o,r){let{combinedVariableControlMap:i}=e.combineVariableControlMap(o.treeStore.tree,r.inheritedControlMap,M,M.activeBundleHash);t&&(wm(t,e),HM(t,e));let n=dr(e),a=r.subqueries;bt(e)&&Tt(e)?a=new $d(e,n?void 0:r.subqueries):Rs(e)&&(a=void 0);let l=o.scopeType==="WebPage",s=o.scopeType==="SmartComponent",c=r.inCodeOverride||!E(_d(e,o))||jd(e,o).length>0,d=o.treeStore.tree.get(r.lastRepeaterId),u=o.kitSectionsStructure.addSection(e),f={isAnyVariantAnImage:Ut(e),isAnyVariantALink:Jt(e)&&!Me(e),isAnyVariantAnEffect:mm(e,o.scopeType),isAnyVariantAVariantAppearEffect:dm(e),isAnyVariantATickerEffect:Li(e),isAnyVariantARef:l&&fn(e)||Ye(e)||$(e)&&bt(d)&&li(e,d),isAnyVariantATransitionOverride:s&&(cm(e)||Du(e)),isAnyVariantOptimizedAppearEffect:um(e,o),itemsOrderOverrides:{},hiddenInVariants:new Set(r.hiddenInVariants),inCodeOverride:c,inheritedControlMap:i,isAnyVariantFloating:Ye(e),isAnyVariantPaginated:n,isAnyVariantColumnMasonryLayout:Pi(e),identifiers:$(e)?new Set([yk(e)]):void 0,subqueries:a,kitSectionId:u};o.trackingIds.add(e),o.kitSectionsStructure.addCustomizations(e,r.kitSectionId),Vo(e)&&o.formIds.add(e.id),o.scopeType==="LayoutTemplate"&&fa(e)&&ve(e)&&(f.itemsOrderOverrides[e.id]=hk(e,o.scopeType));let y=Gf(e,o),v=new Map,b=$f(e,o,r,c),x=[],D=Vu(e);for(let Qe of o.variants){let he=An(Qe,e.id,o.treeStore.tree);if(!he)continue;he.combineVariableControlMap(o.treeStore.tree,r.inheritedControlMap,M,M.activeBundleHash);let Xt=o.treeStore.tree.getParent(he.id);if(f.hiddenInVariants.has(Qe.id))continue;Xt&&wm(Xt,he);let Gr=gk(Qe),or=Gf(he,o);if(!wo(or,v.get(Qe.replicaInfo?.inheritsFrom??"")??y)){let Rt=sr(Qe);v.set(Gr,{value:or,isGesture:Rt})}else(o.scopeType==="WebPage"||o.scopeType==="LayoutTemplate")&&y!==!0&&v.set(Gr,{value:y});if(or===!1){f.hiddenInVariants.add(Qe.id);continue}Jt(he)&&!Me(he)&&(f.isAnyVariantALink=!0),Ut(he)&&(f.isAnyVariantAnImage=!0),mm(he,o.scopeType)&&(f.isAnyVariantAnEffect=!0),dm(he)&&(f.isAnyVariantAVariantAppearEffect=!0),um(he,o)&&(f.isAnyVariantOptimizedAppearEffect=!0),Li(he)&&(f.isAnyVariantATickerEffect=!0),dr(he)&&(f.isAnyVariantPaginated=!0),$(he)&&f.identifiers?.add(yk(he)),Pi(he)&&(f.isAnyVariantColumnMasonryLayout=!0),o.trackingIds.add(he);let So=Vu(he);if(So){D||=So;let{stops:Rt,info:vi}=So;D.stops=Math.max(D?.stops,Rt??0),D.info||=vi}o.scopeType==="WebPage"?fn(he)&&(f.isAnyVariantARef=!0):o.scopeType==="SmartComponent"&&(GT(he)&&(f.isAnyVariantAnEffect=!0),(cm(he)||Du(he))&&(f.isAnyVariantATransitionOverride=!0)),ri(he)&&(f.itemsOrderOverrides[Qe.id]=hk(he,o.scopeType)),b=b||$f(he,o,r,c),x.push({nodeInVariant:he,variant:Qe})}E(D)||o.nodesWithAnyGradientFill.set(e.id,D);let{condition:B,classNames:H,classNameExpressions:A}=o.renderFunctions.create(y,v);if(B===!1)return;o.nodeRendersWithMotion.set(e,b);let Z=e.parentid?o.renderAsListNodes.get(e.parentid):!1;Bi(e)&&pT(e.htmlTag)&&!Z&&o.renderAsListNodes.set(e.id,!0);let Ie=r?.itemsOrderOverrides?.[o.rootId],{css:se,style:ke}=Qf(e,t,o,Ie?{order:Ck(e,Ie)}:void 0),ne=Yo(e),lt=lw(e,t,o),pt=o.css.addRule(se,e,{container:ne,hasScopingSelector:lt}),U=Kf(e,o,f,r,{className:pt,style:ke});o.hitTargets.recordClassName(e,o.rootId,pt);let it={link:void 0,container:void 0,element:void 0,floating:void 0,overlay:void 0,transition:void 0,fetcher:void 0,componentViewport:void 0,tickerItem:void 0},ao={variants:void 0,css:void 0};if(De(e))for(let Qe of e.getStylePresetsForCodeGeneration(o.treeStore.tree))o.css.addSharedStyle(Qe.id);let so=ne?U.container:U.element;C(!E(so),"Target will always be defined if the node needs a container");for(let{nodeInVariant:Qe,variant:he}of x){let Xt=gk(he);if(o.hitTargets.recordClassName(Qe,he.id,pt),De(Qe))for(let Zt of Qe.getStylePresetsForCodeGeneration(o.treeStore.tree))o.css.addSharedStyle(Zt.id);let Gr=o.treeStore.tree.getParent(Qe.id),{itemsOrderOverrides:or}=r,Si=or?.[he.id],So=Qf(Qe,Gr,o,Si?{order:Ck(e,Si)}:void 0),Rt=WM(he.replicaInfo?.inheritsFrom),vi=Us(So.css,Rt(se,ao.css),"css");if(vi){let Zt=sr(he);ao.css||(ao.css={}),ao.css[he.id]=vi,o.css.addRule(vi,Qe,{variant:he,hasScopingSelector:lt,container:ne,gesture:Zt?he.gesture:void 0,scope:Zt?he.replicaInfo?.inheritsFrom:o.scopeType==="SmartComponent"?he.id:void 0})}o.scopeType==="SmartComponent"&&fk(Qe,so,So.style);let Xa=Kf(Qe,o,f,r,{className:pt,style:so.style}),Yn=Us(So.style,Rt(ke,ao.variants));if(Yn)if(o.scopeType==="SmartComponent"||o.llmSnapshot)ao.variants||(ao.variants={}),ao.variants[Xt]=Yn;else{let Zt=ne?"container":"element";it[Zt]=GM(So.style,it[Zt],Xt)}let fr;for(fr in Xa){let Zt=Us(Xa[fr],Rt(U[fr],it[fr]),"js");if(!Zt)continue;it[fr]||(it[fr]={[Xt]:{}});let qn=it[fr][Xt];it[fr][Xt]=Fe(qn)?Object.assign(qn,Zt):Zt}}let Ci=new Set(H);f.isAnyVariantALink&&Ci.add(o.linkClassName);let tr=new V.Set(A),Hr=f.isAnyVariantARef||o.events.relativeOverlayPrimaryTriggers.has(e.id);return Y.assign(so,{variants:ao.variants,className:BM(so.className,Ci,tr,o.imports),ref:so.ref??(Hr?o.elementIds.ref(e):so.ref),[hC]:f.isAnyVariantOptimizedAppearEffect?o.appearIds.create(e.id):void 0}),o.renderConditions.set(e.id,B),{...f,propsForLink:{props:U.link,overrides:it.link},propsForElement:{props:U.element,overrides:it.element},propsForContainer:{props:U.container,overrides:it.container},propsForTransition:{props:U.transition,overrides:it.transition},propsForFetcher:{props:U.fetcher,overrides:it.fetcher},renderCondition:B,propsForFloating:{props:U.floating,overrides:it.floating},propsForOverlay:{props:U.overlay,overrides:it.overlay},propsForComponentViewport:{props:U.componentViewport,overrides:it.componentViewport},propsForTickerItem:{props:U.tickerItem,overrides:it.tickerItem}}}function BM(e,t,o,r){if(t.size===0&&o.size===0)return e;if(o.size===0){let i=Array.from(t).join(" ");return e?Je`${e} ${i}`:i}else{let i=r.addImport("framer",{exportSpecifier:"cx"});return e?V.fn(i,e,...t,...o):V.fn(i,...t,...o)}}function HM(e,t){t.cache.ancestorRepeaterIds=Cd(e,e.cache.ancestorRepeaterIds??[])}function gk(e){return sr(e)?`${e.replicaInfo.inheritsFrom}-${e.gesture}`:e.id}function GM(e,t,o){let r=t??{};return r[o]=r[o]??{},r[o].style=r[o].style??{},Object.assign(r[o].style,e),r}function vk(e,t,o){let r={background:"transparent",height:0,width:0,position:"relative",flexGrow:1,margin:0,marginBottom:hm(t,o)};for(let i of o.variants){let n=An(i,e.id,o.treeStore.tree);if(!n)continue;let a=Us({...r,marginBottom:hm(i,o)},r);!a||Gt(a)||o.css.addRule(a,n,{variant:i})}return o.css.addRule(r,e)}function yk(e){return Di(e)?Cv:e.codeComponentIdentifier}function Ck(e,t){return t.get(e.id)??t.size}var Kd=class{constructor(){k(this,"cssWidthCache",new Map);k(this,"heightCache",new Map);k(this,"yPositionCache",new Map);k(this,"verticalStackLayoutInfoCache",new Map);k(this,"gridLayoutInfoCache",new Map);k(this,"computationCache",new Map);k(this,"testing",{getCSSWidthCache:()=>this.cssWidthCache,getHeightCache:()=>this.heightCache})}getCSSWidth(t){return this.cssWidthCache.get(t)}setCSSWidth(t,o){this.cssWidthCache.set(t,o)}getHeight(t){return this.heightCache.get(t)}setHeight(t,o){this.heightCache.set(t,o)}getYPosition(t){return this.yPositionCache.get(t)}setYPosition(t,o){this.yPositionCache.set(t,o)}getVerticalStackLayoutInfo(t){return this.verticalStackLayoutInfoCache.get(t)}setVerticalStackLayoutInfo(t,o){this.verticalStackLayoutInfoCache.set(t,o)}getGridLayoutInfo(t){return this.gridLayoutInfoCache.get(t)}setGridLayoutInfo(t,o){this.gridLayoutInfoCache.set(t,o)}memo(t,o){if(this.computationCache.has(t))return this.computationCache.get(t);let r=o();return this.computationCache.set(t,r),r}};var eh=class{constructor(){k(this,"heightNodes",new Set)}startComputingHeightFor(t){this.heightNodes.add(t)}isComputingHeightFor(t){return this.heightNodes.has(t)}finishComputingHeightFor(t){this.heightNodes.delete(t)}};function $M(e,t){return(o,r,i=void 0)=>{if($t(o))return t.createComputedValue(o,r,i);if(j(o))return e.create(o);At(o,"all dynamic values should be handled above")}}function Tk(e,t,o){return{tree:e,cache:new Kd,workInProgress:new eh,getVariableBinding:$M(t,o)}}var me=class extends Error{};function fe(e,t){let o=Math.round(e*1e4)/1e4;return{type:"css-const",expr:t?`${o}${t}`:`${o}`,value:e,unit:t}}var Yd={"+":"-","-":"+","*":"/","/":"*"};function Be(e,t,o){if(t.type==="css-const"&&o.type==="css-const"){if(t.unit===o.unit){if(e==="+")return fe(t.value+o.value,t.unit);if(e==="-")return fe(t.value-o.value,t.unit);if(e==="min")return fe(Math.min(t.value,o.value),t.unit);if(e==="max")return fe(Math.max(t.value,o.value),t.unit)}else if(Ea(e)&&(t.value===0||o.value===0))return o.value!==0?o:t;if(e==="*"&&(!t.unit||!o.unit))return fe(t.value*o.value,t.unit||o.unit);if(e==="/"&&!o.unit)return fe(t.value/o.value,t.unit)}if(Ea(e)){if(o.type==="css-const"&&o.value===0)return t;if(t.type==="css-const"&&t.value===0)return o}else if(qd(e)){if(o.type==="css-const"&&o.value===1)return t;if(t.type==="css-const"&&t.value===1)return o}else if(e==="min"||e==="max"){if(t.type==="css-op"&&t.op===e&&bk(t,o))return t;if(o.type==="css-op"&&o.op===e&&bk(o,t))return o;if(wo(t.expr,o.expr))return t}t.type==="css-op"&&t.right.type==="css-const"&&(Ea(e)&&Ea(t.op)?(o=Be(e==="+"?t.op:Yd[t.op],o,t.right),t=t.left):qd(e)&&qd(t.op)&&(o=Be(e==="*"?t.op:Yd[t.op],o,t.right),t=t.left));let r;if(Ea(e))o.type==="css-const"&&o.value<0&&(e=Yd[e],o=fe(-o.value,o.unit)),e==="+"?r=Je`${Mn(t)} + ${o.expr}`:e==="-"?o.type==="css-op"&&!Qd(o.op)?r=Je`${Mn(t)} - (${o.expr})`:r=Je`${Mn(t)} - ${Mn(o)}`:At(e);else if(qd(e)){if(o.type==="css-const"&&o.value<1){let i=fe(1/o.value,o.unit);i.expr.length<o.expr.length&&(e=Yd[e],o=i)}e==="/"&&o.type==="css-op"&&!Qd(o.op)?r=Je`${Mn(t)} / (${o.expr})`:r=Je`${Mn(t)} ${e} ${Mn(o)}`}else Qd(e)?r=Je`${e}(${t.expr}, ${o.expr})`:At(e,`unhandled op ${e}`);return{type:"css-op",expr:r,op:e,left:t,right:o}}function ep(e){switch(e.type){case"number-const":return fe(e.value,"px");case"number-template":return ji(e.expr);default:At(e)}}function ji(e){return{type:"css-template",expr:e}}function Ea(e){return e==="+"||e==="-"}function qd(e){return e==="*"||e==="/"}function Qd(e){return e==="min"||e==="max"}function bk(e,t){return wo(e.left.expr,t.expr)||wo(e.right.expr,t.expr)}function Mn(e){return e.type==="css-op"&&Ea(e.op)?Je`(${e.expr})`:e.expr}function tp(e){return e.type==="css-template"||e.type==="css-const"||e.type==="css-op"&&Qd(e.op)?e.expr:Je`calc(${e.expr})`}function _M(e,t,o,r,i,n){let a=t??DT;if(!n)return!0;let l=e.filters.filter(s=>{if(!s.itemKey)return!1;let c=n.properties[s.itemKey];return!(!c||c.type!=="boolean"&&s.transforms.length===0)});return l.length===0?!0:l[a==="all"?"every":"some"](s=>{let c=s.itemKey;C(c!==null,"itemKey should not be null");let d=n.properties[c];C(d,"control should exist");let u=o(c),f=r.getVariableControlByKey(c);return s.transforms.reduce((y,v)=>bS(y,v,r,i,f,void 0,void 0),u)})}function Ik(e,t,o,r,i,n){return e?o.filter(a=>_M(e,t,l=>a[l],r,i,n)):o}function jM(e,t){return t?Array.from(e).reverse():e}function UM(e,t){if(t===void 0||t===0)return e;let o=Array.from(e);return o.splice(0,t),o}function JM(e,t){return e.length<=t?e:e.slice(0,t)}function Nk(e,t,o,r,i=15){if(i&1&&(t=Ik(e.collectionFilters,e.collectionFiltersOperator,t,e.cache,o,r)),i&2&&(t=jM(t,e.collectionReverse)),i&4&&(t=UM(t,e.collectionStartOffset)),i&8){let n=e.collectionLimit??1/0,a=e.collectionPaginationPageSize??1/0,l=Math.min(n,a);t=JM(t,l)}return t}var Oo=1e3,xk=Symbol("Affects Layout: Indeterminate");function op(e){return e===xk}function fi(e,t,o,r){return ot(e)||Cc(e,t)&&lr(e)||yc(o,e)&&io(e)||cr(e)&&e.visible===!1?!1:cr(e)&&z(e.visible)?r?e.isVisible():xk:!0}function kt(e){if(!xo(e))return 0;if(z(e.padding))throw new me;return e.paddingPerSide?e.paddingTop??0:e.padding??0}function yo(e){if(!xo(e))return 0;if(z(e.padding))throw new me;return e.paddingPerSide?e.paddingBottom??0:e.padding??0}function ko(e){return z(e)?0:e??0}var XM=[];function Ui(e){let t=(fa(e)?e.getChildrenInVisualOrder():e.children)??XM;if(bt(e)){let o=e.collectionRepeatedItemId?t.findIndex(n=>n.id===e.collectionRepeatedItemId):0,r=t[o];if(!r)return t;let i=ZM(e);return t.slice(0,o).concat(Array(i).fill(r)).concat(t.slice(o+1))}return t}function ZM(e){if((e.collectionFilters?.filters?.length??0)>0)return 1;let t=M.dataForIdentifier(e.dataIdentifier),o=Wv(void 0,t),r=Object.keys(o).length,i=Array(r).fill({});return Nk(e,i,void 0,t,14).length}function Zs(e){let t=e.resolveValue("fillImage"),o=Fy(t)?t.src:t;if(!o)return;let r=Zv(o);if(!(!r||!Number.isFinite(r.width)||!Number.isFinite(r.height)||r.width<=0||r.height<=0))return r.width/r.height}function rp(e,t){let o=e.widthType===0,r=da(e)&&e.usesDOMRectCached()&&e.cache.getRawDOMRect(e.id)!==null;if(!(!o&&!r))return t.tree.getRect(e).width}var Pk=";";function oh(e,t){return`${e}${Pk}${t}`}function KM(e){let[t,o]=e.split(Pk);return C(o!==void 0,"parseCellCoordinate(), satisfying TypeScript: columnIndex must exist: "+e),[Number(t),Number(o)]}function Vk(e,t,o,r){let i=0;for(let n=0;n<o;n++){let a=oh(t,n);if(e.has(a)){i=0;continue}if(i++,i!==r)continue;let s=n-(r-1);return C(s>=0,"getColumnIndexForItem(), column index should be at least 0"),s}return-1}function YM(e,t,o,r,i,n,a){let l=r+(n-1);C(a>l,"fillCellsForItem(), column count has to be larger than maxColumnIndex");let s=o+(i-1);for(let c=r;c<=l;c++)for(let d=o;d<=s;d++){let u=oh(d,c);t.set(u,e)}}function qM(e,t){return!cn(e)||z(e.gridItemColumnSpan)?1:e.gridItemColumnSpan==="all"?t:Math.min(e.gridItemColumnSpan??1,t)}function ip(e,t){return!cn(e)||t.gridRowHeightType==="fit"||z(e.gridItemRowSpan)?1:e.gridItemRowSpan??1}var th=class{constructor(t,o,r,i){this.gridLayout=t;this.rowCount=o;this.columnCount=r;this.filledRowCount=i;k(this,"coordinateCache")}getGridItem(t,o){let r=oh(t,o);return this.gridLayout.get(r)??null}findCoordinates(t){if(!this.coordinateCache){this.coordinateCache=new Map;for(let[o,r]of this.gridLayout){let[i,n]=KM(o),a=this.coordinateCache.get(r);(!a||i<a.rowIndex||n<a.columnIndex)&&this.coordinateCache.set(r,{rowIndex:i,columnIndex:n})}}return this.coordinateCache.get(t)??null}isEmpty(){return this.gridLayout.size===0}};function wk(e,t){let o=e.gridColumnCount;if(!K(o))return null;let r=new Map,i=0,n=-1;for(let s of Ui(e)){if(!fi(s,e,t,!0))continue;let c=qM(s,o),d=ip(s,e),u=Vk(r,i,o,c);for(;u===-1;)i++,u=Vk(r,i,o,c);YM(s.id,r,i,u,d,c,o);let f=i+(d-1);n=Math.max(n,f)}let a=n+1,l=Math.max(e.gridRowCount??0,a);return new th(r,l,o,a)}function On(e,t){let o=t.cache.getGridLayoutInfo(e.id);if(o)return o;let r=wk(e,t.tree);if(r===null)throw new me;return t.cache.setGridLayoutInfo(e.id,r),r}function eoe(e,t){return wk(e,t)?.filledRowCount}var QM={type:"number-const",value:0},eO={type:"number-const",value:1/0},tO={type:"number-const",value:Oo};function pe(e){return e===0?QM:e===1/0?eO:e===Oo?tO:{type:"number-const",value:nO(e)}}function W(e,...t){return np(e,0,t.length,t)}function np(e,t,o,r){to(0<=t&&t<=o&&o<=r.length,"start and end must be within the bounds of operands");let i=o-t;if(i===0)return null;if(i===1){let c=r[t];return Rl(c)?pe(c):c}let{hasTemplateOperands:n,operationResult:a}=oO(t,o,r,e);if(!n)return pe(a);let l=rO(t,o,r),s=e==="min"||e==="max"?V.fn(m`Math.${new V(e)}`,...l):new V(`(${at(l,` ${e} `)})`);return Ks(s,a,!0)}function oO(e,t,o,r){let i=!1,n;for(let a=e;a<t;a++){let l=o[a],s;Rl(l)?s=l:l.type==="number-const"?s=l.value:l.type==="number-template"?(i=!0,s=Co(l)):At(l),E(n)?n=s:n=iO(r,n,s)}return to(n!==void 0,"resultEstimate must be computed after walking over all operands"),{hasTemplateOperands:i,operationResult:n}}function rO(e,t,o){let r=[];for(let i=e;i<t;i++){let n=o[i];Rl(n)?r.push(m`${n}`):n.type==="number-const"?r.push(m`${n.value}`):r.push(n.expr)}return r}function Ks(e,t,o=!1){return{type:"number-template",expr:o?e:m`(${e})`,impreciseEstimate:t}}function iO(e,t,o){switch(e){case"+":return t+o;case"-":return t-o;case"*":return t*o;case"/":return t/o;case"min":return Math.min(t,o);case"max":return Math.max(t,o);default:At(e)}}function nO(e){return Math.round(e*1e4)/1e4}function Co(e){return e.type==="number-const"?e.value:e.impreciseEstimate}var rh=class{constructor(t,o,r,i,n){this.columns=t;this.nodeToAccurateCoordinateMap=o;this.nodeToRoughCoordinateMap=r;this.gap=i;this.contentHeight=n;k(this,"frToPxCache",new Map)}walkColumn(t,o){if(this.columns[t])for(let r of this.columns[t])o(r.nodeId)}getStackItem(t,o){return this.columns[t]?.[o]?.nodeId??null}findCoordinates(t){return this.findAccurateCoordinates(t)??this.findRoughCoordinatesOfConditionallyVisibleNode(t)}findAccurateCoordinates(t){return this.nodeToAccurateCoordinateMap.get(t)??null}findRoughCoordinatesOfConditionallyVisibleNode(t){return this.nodeToRoughCoordinateMap.get(t)??null}getFrToPxForColumn(t){let o=this.columns[t];if(!o)return null;if(!this.frToPxCache.has(t)){let r=[],i=[];for(let d of o)d.type==="regular"?r.push(d):d.type==="fr"?i.push(d):At(d);let n=r.reduce((d,u)=>W("+",d,u.getHeight()),pe(0)),a=this.gap*(o.length-1),l=W("-",this.contentHeight,W("+",n,a)),s=i.reduce((d,u)=>d+u.frUnits,0),c=W("/",l,Math.max(s,1));for(i=i.sort((d,u)=>Co(u.getMinHeightPerFr())-Co(d.getMinHeightPerFr()));i[0]&&Co(i[0].getMinHeightPerFr())>Co(c);)l=W("-",l,i[0].getMinHeight()),s-=i[0].frUnits,c=W("/",l,Math.max(s,1)),i.shift();for(i=i.sort((d,u)=>Co(d.getMaxHeightPerFr())-Co(u.getMaxHeightPerFr()));i[0]&&Co(i[0].getMaxHeightPerFr())<Co(c);)l=W("-",l,i[0].getMaxHeight()),s-=i[0].frUnits,c=W("/",l,Math.max(s,1)),i.shift();this.frToPxCache.set(t,W("max",pe(0),c))}return this.frToPxCache.get(t)??null}};function ap(e,t,o,r,i){let n=t.cache.getVerticalStackLayoutInfo(e.id);if(n)return n;let a=aO(e,t,o,r,i);return t.cache.setVerticalStackLayoutInfo(e.id,a),a}function aO(e,t,o,r,i){let n=ih(e),a=ho(n),l=W("-",o(e),kt(e)+yo(e)),s=Co(l),c=new Map,d=new Map,u=[],f=0;for(let y of Ui(e)){if(!(Ae(y)&&_e(y)))continue;let v=fi(y,e,t.tree,!1);if(v===!1)continue;if(op(v)){d.set(y.id,{columnIndex:Math.max(u.length-1,0),columnItemIndex:Math.max(u[u.length-1]?.length??0,0)});continue}let b=sO(y,t,o,r,i);if(e.stackWrapEnabled){let D=Co(b.type==="fr"?b.getMinHeight():b.getHeight());Math.ceil(f+a+D)>Math.ceil(s)||u.length===0?(u.push([b]),f=D):(u[u.length-1].push(b),f+=a+D)}else u[0]=u[0]??[],u[0].push(b);c.set(y.id,{columnIndex:u.length-1,columnItemIndex:u[u.length-1].length-1})}return new rh(u,c,d,a,l)}function sO(e,t,o,r,i){if(e.heightType===3){let n={nodeId:e.id,type:"fr",frUnits:e.height,getMinHeight:()=>t.cache.memo(`stack-getMinHeight-${e.id}`,()=>r(e)),getMaxHeight:()=>t.cache.memo(`stack-getMaxHeight-${e.id}`,()=>i(e)),getMinHeightPerFr:()=>t.cache.memo(`stack-getMinHeightPerFr-${e.id}`,()=>W("/",n.getMinHeight(),n.frUnits)),getMaxHeightPerFr:()=>t.cache.memo(`stack-getMaxHeightPerFr-${e.id}`,()=>W("/",n.getMaxHeight(),n.frUnits))};return n}else return{nodeId:e.id,getHeight:()=>t.cache.memo(`stack-getHeight-${e.id}`,()=>o(e)),type:"regular"}}function ih(e){return zl(e)?ko(e.gap):0}function kk(e,t){if(e.textFitViewBoxSize)throw new me;let o=e.widthType!==2,r=0;for(let[i,n]of e.getProsemirrorTextBlocks(!1).entries()){let a,[l,s]=dO(n,t);if(s==="px")a=l;else{let u=s==="%"?l/100:l;a=lO(n,t)*u}let c=0;i>0&&(c=pO(n,e,t)??0);let d=1;if(o){let u=n.attrs.tag;u==="h1"||u==="h2"||u==="h3"||u==="h4"||u==="h5"||u==="h6"?d=1:u==="p"||u==="div"?d=5:At(u)}r+=c+a*d}return r}function lO(e,t){let o=cO(e,t);return e.descendants(r=>{if(!VS(r))return;let n=r.marks.find(xS)?.attrs.inlineStyles.fontSize;if(z(n))throw new me;if(E(n))return;let[a,l="px"]=Fi(n)?n:[n],s=Pu(a,l,"px");s>o&&(o=s)}),o}function cO(e,t){if(oc(e)){let o=e.attrs.textStylePreset,r=t.getNodeWithTrait(o,Ri);if(r){let[i,n]=KC(r.fontSize)?us(r.fontSize):[r.fontSize,"px"];return n==="rem"?Yt(i*ZC,0):i}}if(!E(e.attrs.inlineStyles.fontSize)){let o=e.attrs.inlineStyles.fontSize;if(z(o))throw new me;let[r,i="px"]=Fi(o)?o:[o];return Pu(r,i,"px")}return us(wu.fontSize)[0]}function dO(e,t){if(oc(e)){let o=e.attrs.textStylePreset,r=t.getNodeWithTrait(o,Ri);if(r)return r.lineHeight}return E(e.attrs.blockStyles.lineHeight)?wu.lineHeight:e.attrs.blockStyles.lineHeight}function pO(e,t,o){if(oc(e)){let r=e.attrs.textStylePreset,i=o.getNodeWithTrait(r,Ri);if(i)return i.paragraphSpacing}return t.paragraphSpacing}var Rk=Ke("simulateHeight"),uO=200;function Dk(e,t){try{let o=Ze(e,t);return o.type==="number-const"?o.value:o.expr}catch(o){if(o instanceof me)return;Rk.reportWithoutLogging(o,{nodeId:e.id}),Rk.warnOncePerMinute(`Can\u2019t simulate the height for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function Ze(e,t){let o=t.cache.getHeight(e.id);if(o!==void 0)return o;if(t.workInProgress.isComputingHeightFor(e.id))throw new Error("Detected a circular walk in simulateHeight(): we\u2019re entering a node which is already being computed. This would result in a call stack overflow. Exiting early.");let r;try{t.workInProgress.startComputingHeightFor(e.id),r=mO(e,t)}finally{t.workInProgress.finishComputingHeightFor(e.id)}return t.cache.setHeight(e.id,r),r}function mO(e,t){if(!ba(e))throw new me;let o=t.tree.getNodeParent(e);if(We(e))return pe(Oo);if(C(Ae(e)&&_e(e),"Can\u2019t calculate the height on a node when it doesn\u2019t have size information"),la(e)){let i=t.tree.getRect(e).height;return Ks(m`${te.componentViewport}?.height || ${i}`,i)}if(hs(e))return St.startFromRowHeightMultipliedBySpan(e,t).getWithConstraints();if(!Oi(e,o)&&ye(e)&&e.top!==null&&e.bottom!==null)return(io(e)?St.startFromFixedValue(pe(Oo),e,t):St.startFromParentOuterHeight(e,t)).op((n,a)=>{let l=a.top,s=a.bottom;return C(l!==null&&s!==null,"Satisfying TypeScript"),W("-",n,pe(l+s))}).getWithConstraints();if(e.heightType===0)return St.startFromFixedValue(pe(e.height),e,t).getWithConstraints();if(e.heightType===1){C(o,"A node can\u2019t have a % height without a parent");let i;return io(e)?i=St.startFromFixedValue(pe(Oo),e,t):lr(e)?i=St.startFromParentOuterHeight(e,t):Ot(o)&&cn(e)?i=St.startFromRowHeightMultipliedBySpan(e,t):i=St.startFromParentInnerHeight(e,t),i.op((n,a)=>W("*",n,pe(a.height))).getWithConstraints()}if(e.heightType===4)return St.startFromFixedValue(pe(e.height*Oo),e,t).getWithConstraints();if(e.heightType===3){if(C(!lr(e)&&!io(e),"FractionOfFreeSpace height is not supported for fixed or absolute node"),C(o,"A node can\u2019t have a fractional height without a parent"),!jt(o)&&Ot(o)){let i=sp(e,t);if(!i)throw new me;return i}if(C(jt(o),"A node can have a fractional height only if it\u2019s inside a stack"),C(o.stackDirection,"A stack must have a direction defined"),z(o.stackDirection))throw new me;if(o.stackDirection==="horizontal")return St.startFromParentInnerHeight(e,t).op((i,n)=>W("*",i,pe(n.height))).getWithConstraints();if(o.stackDirection==="vertical"){C(Ae(o)&&_e(o),"A stack must have a size and size-dimension type");let i=ap(o,t,s=>Ze(s,t),s=>lp(s,t),s=>cp(s,t)),n=i.findCoordinates(e.id);C(n,"Node must be found in stack");let a=i.getFrToPxForColumn(n.columnIndex);C(a,"frHeight must be available for column");let l=W("*",a,pe(e.height));return St.startFromFixedValue(l,e,t).getWithConstraints()}_(o.stackDirection)}if(e.heightType===2){let i=sp(e,t);if(!i)throw new me;return i}if(e.heightType===5){if(!Ut(e))throw new me;let i=Zs(e),n=rp(e,t),a=E(n)||E(i)?e.height:Math.round(n*(1/i));return St.startFromFixedValue(pe(a),e,t).getWithConstraints()}_(e.heightType)}var hi,Ys,Aa,qs,zo,nh,ah,Lk,sh,Ro=class Ro{constructor(t,o,r,i){ie(this,hi);ie(this,Ys);ie(this,Aa);ie(this,qs);ee(this,hi,t),ee(this,Ys,o),ee(this,Aa,r),ee(this,qs,i)}static startFromFixedValue(t,o,r){return new Ro(t,()=>{var n,a;let i=r.tree.getNodeParent(o);if(C(i,"Can\u2019t calculate the parent height on a node without a parent"),C(Ae(i)&&_e(i),"Can\u2019t calculate the parent height on a node when a parent doesn\u2019t have size information"),Ot(i)){let l=gt(n=Ro,zo,nh).call(n,o,i,r);return gt(a=Ro,zo,ah).call(a,l,o,i)}else return Ze(i,r)},o,r)}static startFromParentOuterHeight(t,o){let r=o.tree.getNodeParent(t);C(r,"Can\u2019t call startFromParentOuterHeight() on a node without a parent");let i=Ze(r,o);return new Ro(i,()=>i,t,o)}static startFromParentInnerHeight(t,o){let r=o.tree.getNodeParent(t);C(r,"Can\u2019t call startFromParentInnerHeight() on a node without a parent");let i=W("-",Ze(r,o),kt(r)+yo(r));return new Ro(i,()=>i,t,o)}static startFromRowHeightMultipliedBySpan(t,o){var a,l;let r=o.tree.getNodeParent(t);C(r&&Ot(r),"Can\u2019t call startFromColumnHeightMultipliedBySpan() if the node isn\u2019t inside a grid");let i=gt(a=Ro,zo,nh).call(a,t,r,o),n=gt(l=Ro,zo,ah).call(l,i,t,r);return new Ro(n,()=>n,t,o)}op(t){return ee(this,hi,t(F(this,hi),F(this,Aa))),this}getWithConstraints(){var t;return ee(this,hi,gt(t=Ro,zo,Lk).call(t,F(this,hi),F(this,Aa),F(this,qs),F(this,Ys))),F(this,hi)}};hi=new WeakMap,Ys=new WeakMap,Aa=new WeakMap,qs=new WeakMap,zo=new WeakSet,nh=function(t,o,r){if(C(o.gridRowHeightType!==void 0,"A grid node must have gridRowHeightType defined"),o.gridRowHeightType==="fixed")return C(o.gridRowHeight!==void 0,"A fixed-height grid node must have gridRowHeight defined"),pe(o.gridRowHeight);if(o.gridRowHeightType==="fit"){let i=On(o,r);if(i.isEmpty())return pe(0);let n=i.findCoordinates(t.id);C(n,"Node must be found in the grid layout");let a=n.rowIndex;return Fk(r,i,a)}else if(o.gridRowHeightType==="auto"){let i=Ze(o,r),n=W("-",i,kt(o)+yo(o)),a=On(o,r).rowCount,l=ko(o.gap),s=ho(l),c=(a-1)*s;return W("/",W("-",n,c),a)}else _(o.gridRowHeightType)},ah=function(t,o,r){let i=ip(o,r),n=ko(r.gap),a=ho(n);return W("+",W("*",t,i),a*(i-1))},Lk=function(t,o,r,i){var a,l;let n=t;return kr(o)&&(o.maxHeight&&(n=gt(a=Ro,zo,sh).call(a,"maxHeight",n,o,r,i)),o.minHeight&&(n=gt(l=Ro,zo,sh).call(l,"minHeight",n,o,r,i))),n},sh=function(t,o,r,i,n){let a=t==="minHeight"?"max":"min",[l,s]=yn(r[t]);if(s==="%"){let c=i.tree.getNodeParent(r);if(C(c,"parentNode must exist for a node with percentage min-max heights"),_e(c)&&c.heightType===2)return o;let d=n();return W(a,o,W("*",d,l/100))}else{if(s==="px")return W(a,o,l);if(s==="vh")return W(a,o,Oo*l/100);_(s)}},ie(Ro,zo);var St=Ro;function sp(e,t){return t.cache.memo(`autoHeight-${e.id}`,()=>fO(e,t))}function fO(e,t){if(De(e)){let o=kk(e,t.tree);return St.startFromFixedValue(pe(o),e,t).getWithConstraints()}if($(e)){let o=e.getIntrinsicSize(M).height??uO;return St.startFromFixedValue(pe(o),e,t).getWithConstraints()}if(jt(e)){if(C(e.stackDirection,"A stack must have a direction defined"),z(e.stackDirection))throw new me;if(e.stackDirection==="horizontal"){if(e.stackWrapEnabled)throw new me;{let o=hO(e,t);return St.startFromFixedValue(o,e,t).op((r,i)=>W("+",r,kt(i)+yo(i))).getWithConstraints()}}else if(e.stackDirection==="vertical"){let o=gO(e,t),r=yO(e,t,o);return St.startFromFixedValue(r,e,t).op((i,n)=>W("+",i,kt(n)+yo(n))).getWithConstraints()}else _(e.stackDirection)}if(Ot(e)){if(C(e.gridColumnCount!==void 0,"A grid node must have gridColumnCount"),e.gridColumnCount==="auto-fill")throw new me;if(K(e.gridColumnCount)){C(e.gridRowHeightType!==void 0,"A grid must have gridRowHeightType defined");let o=On(e,t);if(e.gridRowHeightType==="fixed"){C(e.gridRowHeight!==void 0,"A node with gridRowHeightType: fixed must have gridRowHeight defined");let r=o.rowCount,i=ko(e.gap),n=ho(i),a=(o.rowCount-1)*n,s=e.gridRowHeight*r+a;return St.startFromFixedValue(pe(s),e,t).op((c,d)=>W("+",c,kt(d)+yo(d))).getWithConstraints()}else if(e.gridRowHeightType==="fit"){let r=pe(0);for(let s=0;s<o.rowCount;s++){let c=Fk(t,o,s);r=W("+",r,c)}let i=ko(e.gap),n=ho(i),a=(o.rowCount-1)*n,l=W("+",r,a);return St.startFromFixedValue(l,e,t).op((s,c)=>W("+",s,kt(c)+yo(c))).getWithConstraints()}else if(e.gridRowHeightType==="auto"){let r=pe(0);for(let c=0;c<o.rowCount;c++)for(let d=0;d<o.columnCount;d++){let u=o.getGridItem(c,d);if(!u)continue;let f=t.tree.getNode(u);if(C(f,"Can\u2019t find grid item in the tree"),!Ae(f)||!_e(f))continue;let y;f.heightType===1||hs(f)?y=sp(f,t)??pe(0):y=Ze(f,t);let v=ip(f,e);if(v>1){let b=ko(e.gap),D=ho(b)*(v-1);y=W("/",W("-",y,D),v)}r=W("max",r,y)}let i=W("*",r,o.rowCount),n=ko(e.gap),a=ho(n),l=(o.rowCount-1)*a,s=W("+",i,l);return St.startFromFixedValue(s,e,t).op((c,d)=>W("+",c,kt(d)+yo(d))).getWithConstraints()}else _(e.gridRowHeightType)}_(e.gridColumnCount)}return null}function hO(e,t){let o=pe(0);for(let r of e.children??[])!Ae(r)||!_e(r)||fi(r,e,t.tree,!0)&&(r.heightType===1||r.heightType===3||(o=W("max",o,Ze(r,t))));return o}function gO(e,t){if(Ae(e)&&kr(e)&&e.maxHeight!==void 0&&e.stackWrapEnabled){let o=cp(e,t),r=W("-",o,kt(e)+yo(e));return Co(r)}return 1/0}function yO(e,t,o){let r=ih(e),i=ho(r),n=[];for(let l of Ui(e)){if(!Ae(l)||!_e(l)||!fi(l,e,t.tree,!0))continue;let s;switch(l.heightType){case 3:s=lp(l,t);break;case 1:s=pe(0);break;case 0:case 2:case 4:case 5:s=Ze(l,t);break;default:_(l.heightType)}let c=n[n.length-1]??pe(0),d=W("+",c,i,s);Math.ceil(Co(d))>Math.ceil(o)||n.length===0?n.push(s):n[n.length-1]=d}return W("max",...n)??pe(0)}function Fk(e,t,o){let r=pe(0);for(let i=0;i<t.columnCount;i++){let n=t.getGridItem(o,i);if(!n)continue;let a=e.tree.getNode(n);if(C(a,"Can\u2019t find grid item in the tree"),!Ae(a)||!_e(a))continue;let l=a.heightType===1?sp(a,e)??pe(0):Ze(a,e);r=W("max",r,l)}return r}function lp(e,t){let o=pe(0);return Ae(e)?St.startFromFixedValue(o,e,t).getWithConstraints():o}function cp(e,t){let o=pe(1/0);return Ae(e)?St.startFromFixedValue(o,e,t).getWithConstraints():o}var Ek=Ke("simulateCSSWidth");function Ok(e,t){try{let o=Qs(e,t);return tp(o)}catch(o){if(o instanceof me)return;Ek.reportWithoutLogging(o,{nodeId:e.id}),Ek.warnOncePerMinute(`Can\u2019t simulate the CSS width for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function Qs(e,t){let o=t.cache.getCSSWidth(e.id);if(o)return o;let r=CO(e,t);return t.cache.setCSSWidth(e.id,r),r}function CO(e,t){if(!ba(e))throw new me;let o=t.tree.getNodeParent(e);if(We(e))return fe(100,"vw");if(C(Ae(e)&&_e(e),`Can\u2019t calculate the width on a node ${e.id} when it doesn\u2019t have size information`),t.tree.isGroundNode(e)){if(ve(e)&&ze(t.tree.getScopeNodeFor(e)))return fe(100,"vw");if(la(e)||ve(e)){let i=fe(100,"vw");return ji(m`${te.componentViewport}?.width || ${i.expr}`)}else{let i=rp(e,t);if(E(i))throw new me;return fe(i,"px")}}if(sc(e))return no.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(!Oi(e,o)&&ye(e)&&e.left!==null&&e.right!==null)return no.startFromParentOuterWidth(e,t).op((i,n)=>{let a=n.left,l=n.right;return C(a!==null&&l!==null,"Satisfying TypeScript"),Be("-",i,fe(a+l,"px"))}).getWithConstraints();if(Mi(e)&&ye(e)&&K(e.aspectRatio)&&wT(e)==="width"){let i=Ze(e,t),n=Be("*",ep(i),fe(e.aspectRatio));return no.startFromRawValue(n,e,t).getWithConstraints()}if(e.widthType===0)return no.startFromRawValue(fe(e.width,"px"),e,t).getWithConstraints();if(e.widthType===1){C(o,"A node can\u2019t have a % width without a parent");let i;return io(e)?i=no.startFromRawValue(fe(100,"vw"),e,t):lr(e)?i=no.startFromParentOuterWidth(e,t):Ot(o)?i=no.startFromColumnWidthMultipliedBySpan(e,t):i=no.startFromParentInnerWidth(e,t),i.op((n,a)=>Be("*",n,fe(a.width))).getWithConstraints()}if(e.widthType===3){let i=t.tree.getNodeParent(e);if(C(i,"A node can\u2019t have a fractional width without a parent"),Ot(i))return no.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(C(jt(i),"A node can have a fractional width only if it\u2019s inside a stack"),C(i.stackDirection,"A stack must have a direction defined"),i.stackDirection==="horizontal")return Ak(e,i.stackWrapEnabled??!1,t);if(i.stackDirection==="vertical")return Mk(e,t);if(z(i.stackDirection)){let n=Ak(e,i.stackWrapEnabled??!1,t),a=Mk(e,t);if(wo(n,a))return n;let l=t.getVariableBinding(i.stackDirection,i);if(!l)throw new me;let s=m`${l} === "row"`,c=m`${s} ? ${tp(n)} : ${tp(a)}`;return ji(c)}_(i.stackDirection)}if(e.widthType===2){if(kr(e)&&e.maxWidth){let[i,n]=yn(e.maxWidth);return fe(i,n)}throw new me}if(e.widthType===4){let i=fe(e.width*100,"vw");return no.startFromRawValue(i,e,t).getWithConstraints()}if(e.widthType===5){if(!Ut(e))throw new me;let i=Zs(e),n=Ze(e,t),a=E(n)||E(i)?fe(e.width,"px"):Be("*",ep(n),fe(i));return no.startFromRawValue(a,e,t).getWithConstraints()}_(e.widthType)}function Ak(e,t,o){return t?no.startFromParentInnerWidth(e,o).getWithConstraints():no.startFromParentInnerWidth(e,o).subtractSiblingWidths().getWithConstraints()}function Mk(e,t){return no.startFromParentInnerWidth(e,t).op((o,r)=>Be("*",o,fe(r.width))).getWithConstraints()}var je,Ma,qo,Ji,Qo,zk,Wk,lh,ch,Wo=class Wo{constructor(t,o,r,i){ie(this,je);ie(this,Ma);ie(this,qo);ie(this,Ji);ee(this,je,t),ee(this,Ma,o),ee(this,qo,r),ee(this,Ji,i)}static startFromRawValue(t,o,r){return new Wo(t,()=>{let i=r.tree.getNodeParent(o);return C(i,"Can\u2019t calculate the parent width if the node doesn\u2019t have a parent"),Qs(i,r)},o,r)}static startFromParentOuterWidth(t,o){let r=o.tree.getNodeParent(t);C(r,"Can\u2019t call createFromParentWidth() if the node doesn\u2019t have a parent");let i=Qs(r,o);return new Wo(i,()=>i,t,o)}static startFromParentInnerWidth(t,o){var n;let r=o.tree.getNodeParent(t);C(r,"Can\u2019t call createFromParentWidthMinusPaddings() if the node doesn\u2019t have a parent");let i=Qs(r,o);return i=gt(n=Wo,Qo,lh).call(n,i,r,o),new Wo(i,()=>i,t,o)}static startFromColumnWidthMultipliedBySpan(t,o){var a,l;let r=o.tree.getNodeParent(t);C(r&&Ot(r),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node isn\u2019t inside a grid"),C(cn(t),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node doesn\u2019t have grid item layout");let i=gt(a=Wo,Qo,zk).call(a,r,o),n=gt(l=Wo,Qo,Wk).call(l,i,r,t.gridItemColumnSpan??1,o);return new Wo(n,()=>n,t,o)}subtractSiblingWidths(){let t=F(this,Ji).tree.getNodeParent(F(this,qo));C(t&&jt(t),"Can\u2019t call subtractSiblingWidths() if the node isn\u2019t inside a stack");let o=[],r=[],i=[],n=[],a=[],l=0;for(let u of Ui(t)){let f=fi(u,t,F(this,Ji).tree,!1);if(f!==!1&&!op(f))switch(C(Ae(u)&&_e(u),"It\u2019s impossible to have a regular visible node without width/height/widthType/heightType fields"),l++,u.widthType){case 0:{o.push(u);break}case 1:{r.push(u);break}case 3:{i.push(u);break}case 4:{n.push(u);break}case 2:throw new me;case 5:{if(!Ut(u)||!u.fillImagePixelWidth||!u.fillImagePixelHeight)throw new me;a.push(u);break}default:_(u.widthType)}}let c=1-r.reduce((u,f)=>u+f.width,0);if(c!==1&&ee(this,je,Be("*",F(this,je),fe(c))),o.length){let u=o.reduce((f,y)=>Be("+",f,fe(y.width,"px")),fe(0,"px"));ee(this,je,Be("-",F(this,je),u))}if(a.length){let u=a.reduce((f,y)=>{let v=Zs(y);if(!v)throw new me;let b=Ze(y,F(this,Ji));if(!b)throw new me;return Be("+",f,Be("*",ep(b),fe(v,"px")))},fe(0,"px"));ee(this,je,Be("-",F(this,je),u))}if(n.length){let u=n.reduce((f,y)=>Be("+",f,fe(y.width*100,"vw")),fe(0,"vw"));ee(this,je,Be("-",F(this,je),u))}if(z(t.gap)){let u=F(this,Ji).getVariableBinding(t.gap,t);if(u){let f=ji(Je`${m`${u} * ${l-1}`}px`);ee(this,je,Be("-",F(this,je),f))}}else{let f=Gc(t.gap)*(l-1);f!==0&&ee(this,je,Be("-",F(this,je),fe(f,"px")))}let d=i.reduce((u,f)=>u+f.width,0);return ee(this,je,Be("/",F(this,je),fe(d))),ee(this,je,Be("*",F(this,je),fe(F(this,qo).width))),ee(this,je,Be("max",F(this,je),fe(1,"px"))),this}op(t){return ee(this,je,t(F(this,je),F(this,qo))),this}getWithConstraints(){var t,o;return kr(F(this,qo))?(F(this,qo).maxWidth&&ee(this,je,gt(t=Wo,Qo,ch).call(t,"maxWidth",F(this,je),F(this,Ma),F(this,qo))),F(this,qo).minWidth&&ee(this,je,gt(o=Wo,Qo,ch).call(o,"minWidth",F(this,je),F(this,Ma),F(this,qo))),F(this,je)):F(this,je)}};je=new WeakMap,Ma=new WeakMap,qo=new WeakMap,Ji=new WeakMap,Qo=new WeakSet,zk=function(t,o){var r;if(C(t.gridColumnWidthType!==void 0,"A grid node must have a gridColumnWidthType defined"),t.gridColumnWidthType==="fixed")return C(t.gridColumnWidth!==void 0,"A grid node with fixed width columns must have a gridColumnWidth defined"),fe(t.gridColumnWidth,"px");if(t.gridColumnWidthType==="minmax"){if(t.gridColumnCount==="auto-fill")throw new me;let i=Qs(t,o);if(i=gt(r=Wo,Qo,lh).call(r,i,t,o),C(t.gridColumnCount!==void 0,"A grid node must have a gridColumnCount defined"),z(t.gap)){let n=o.getVariableBinding(t.gap,t);if(n){let a=ji(Je`${m`${n} * ${t.gridColumnCount-1}`}px`);i=Be("-",i,a)}}else{let a=Gc(t.gap)*(t.gridColumnCount-1);a!==0&&(i=Be("-",i,fe(a,"px")))}return t.gridColumnCount>1&&(i=Be("/",i,fe(t.gridColumnCount))),t.gridColumnMinWidth&&(i=Be("max",i,fe(t.gridColumnMinWidth,"px"))),i}else _(t.gridColumnWidthType)},Wk=function(t,o,r,i){if(r===1)return t;let n;if(K(r)){if(o.gridColumnCount==="auto-fill")throw new me;C(o.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),n=Math.min(r,o.gridColumnCount)}else if(r==="all"){if(o.gridColumnCount==="auto-fill")throw new me;C(o.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),n=o.gridColumnCount}else{if(z(r))throw new me;_(r)}if(n>1&&(t=Be("*",t,fe(n))),z(o.gap)){let a=i.getVariableBinding(o.gap,o);if(a){let l=ji(Je`${m`${a} * ${n-1}`}px`);t=Be("+",t,l)}}else{let l=Gc(o.gap)*(n-1);l!==0&&(t=Be("+",t,fe(l,"px")))}return t},lh=function(t,o,r){if(!xo(o))return t;let i;if(z(o.padding)){let n=r.getVariableBinding(o.padding,o);n&&(i=ji(Je`${m`${n} * 2`}px`))}else o.paddingPerSide?i=fe((o.paddingLeft??0)+(o.paddingRight??0),"px"):i=fe((o.padding??0)*2,"px");return i?Be("-",t,i):t},ch=function(t,o,r,i){let n=t==="minWidth"?"max":"min",[a,l]=yn(i[t]);if(l==="%"){let s=r();return Be(n,o,Be("*",s,fe(a/100)))}else return Be(n,o,fe(a,l))},ie(Wo,Qo);var no=Wo;var Bk=Ke("simulateYPosition");function Gk(e,t){try{let o=Xi(e,t);return o.type==="number-const"?o.value:o.expr}catch(o){if(o instanceof me)return;Bk.reportWithoutLogging(o,{nodeId:e.id}),Bk.warnOncePerMinute(`Can\u2019t simulate the y position for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function Xi(e,t){let o=t.cache.getYPosition(e.id);if(o)return o;let r=SO(e,t);return t.cache.setYPosition(e.id,r),r}function SO(e,t){if(!ba(e))throw new me;let o=t.tree.getNodeParent(e);if(!(ye(e)&&gc(e))){if(We(e))return pe(0);C(!1,"Can\u2019t calculate the y position on a node when it doesn\u2019t have position information")}if(t.tree.isGroundNode(e)){if(ve(e)&&ze(t.tree.getScopeNodeFor(e)))return pe(0);if(la(e)||ve(e))return Ks(m`${te.componentViewport}?.y || 0`,0);throw new me}let r=IO(e,o,t);if(r==="fixed"){if(e.top!==null)return pe(e.top);if(e.bottom!==null){let i=Ze(e,t);return W("-",Oo-e.bottom,i)}else{let i=Ze(e,t);return W("-",W("*",Oo,e.centerAnchorY),W("/",i,2))}}if(r==="absolute"){C(o&&ye(o)&&gc(o),"absolute position: parentNode for the node must exist, be pinnable, and have position type");let i=Xi(o,t);if(e.top!==null)return W("+",i,pe(e.top));if(e.bottom!==null){let n=Ze(o,t),a=Ze(e,t);return W("-",W("+",i,n),W("+",e.bottom,a))}else{let n=Ze(o,t),a=Ze(e,t);return W("+",i,W("-",W("*",n,e.centerAnchorY),W("/",a,2)))}}if(r==="sticky"||r===void 0){if(C(o&&ye(o)&&gc(o),"relative position: parentNode for the node must exist, be pinnable, and have position type"),jt(o)){if(C(o.stackDirection,"parentNode for the node must have stackDirection"),o.stackDirection==="horizontal"){if(o.stackWrapEnabled)throw new me;if(z(o.stackAlignment))throw new me;let i=Ze(o,t),n=W("-",i,kt(o)+yo(o));if(C(o.stackAlignment,"parentNode for node must have stackAlignment"),o.stackAlignment==="start")return W("+",Xi(o,t),pe(kt(o)));if(o.stackAlignment==="center"){let a=Ze(e,t),l=W("-",n,a);return W("+",Xi(o,t),W("+",kt(o),W("/",l,2)))}else if(o.stackAlignment==="end"){let a=Ze(e,t),l=W("-",n,a);return W("+",Xi(o,t),kt(o),l)}else _(o.stackAlignment)}if(o.stackDirection==="vertical"){let i=ap(o,t,c=>Ze(c,t),c=>lp(c,t),c=>cp(c,t)),n=i.findCoordinates(e.id);C(n,"Node must be found in stack layout info");let a=vO(n.columnIndex,i,t),l=TO(n.columnItemIndex,a,o,t),s=[Xi(o,t),kt(o),l];return NO(o,e,t)&&s.unshift(Oo),W("+",...s)}if(z(o.stackDirection))throw new me;_(o.stackDirection)}if(Ot(o)){if(C(o.gridColumnCount!==void 0,"parentNode for node must have gridColumnCount"),o.gridColumnCount==="auto-fill")throw new me;if(K(o.gridColumnCount)){let i=On(o,t);if(i.isEmpty())return W("+",Xi(o,t),kt(o));let n=i.findCoordinates(e.id);C(n,"Node must be found in the grid layout info");let a=bO(n.rowIndex,i,o,t);return W("+",Xi(o,t),kt(o),a)}_(o.gridColumnCount)}C(!1,"Relative and sticky nodes can only exist in stacks or grids")}_(r)}function vO(e,t,o){let r=[];return t.walkColumn(e,i=>{let n=o.tree.get(i);C(n&&Ae(n)&&_e(n),"column item must exist, have size, and have size dimension type");let a;if(n.heightType===3){let l=t.getFrToPxForColumn(e);C(l,"frToPx must be available for the column"),a=W("*",l,n.height)}else a=Ze(n,o);r.push(a)}),r}function Hk(e,t,o){return o.cache.memo(`sumAllStackChildrenHeights-${e.id}`,()=>W("+",...t)??pe(0))}function TO(e,t,o,r){let i=o.stackDistribution;if(C(i,"parentNode for node must have stackDistribution"),z(i))throw new me;let n=Ze(o,r),a=W("-",n,kt(o)+yo(o));if(i==="start"||i==="center"||i==="end"){let l=ko(o.gap),s=ho(l),c;if(i==="start")c=pe(0);else{let f=Hk(o,t,r),y=s*(t.length-1),v=W("-",a,W("+",f,y));c=i==="center"?W("/",v,2):v}let d=np("+",0,e,t)??pe(0),u=s*e;return W("+",c,d,u)}if(i==="space-between"||i==="space-around"||i==="space-evenly"){C(!zl(o),"gap is not expected with stackDistribution:",o.stackDistribution);let l=Hk(o,t,r),s=W("-",a,l),c=t.length,d;switch(i){case"space-between":d=W("/",s,Math.max(1,c-1));break;case"space-around":d=W("/",s,c);break;case"space-evenly":d=W("/",s,c+1);break;default:_(i)}let u;switch(i){case"space-between":u=pe(0);break;case"space-around":u=W("/",d,2);break;case"space-evenly":u=d;break;default:_(i)}let f=np("+",0,e,t)??pe(0),y=W("*",d,e);return W("+",u,f,y)}_(i)}function bO(e,t,o,r){if(C(o.gridRowHeightType!==void 0,"parentNode for node must have gridRowHeightType defined"),o.gridRowHeightType==="fixed"){C(o.gridRowHeight!==void 0,"A grid parent node with gridRowHeightType === 'fixed' (for node) must have gridRowHeight defined");let i=e*o.gridRowHeight,n=ko(o.gap),a=ho(n),l=e*a;return pe(i+l)}if(o.gridRowHeightType==="fit"){let i=[];for(let c=0;c<e;c++)for(let d=0;d<t.columnCount;d++){let u=r.tree.get(t.getGridItem(c,d));if(!u)continue;C(Ae(u)&&_e(u),"grid child must have size and size-dimension type");let f=Ze(u,r);i[c]=W("max",i[c]??pe(0),f)}let n=W("+",...i)??pe(0),a=ko(o.gap),l=ho(a),s=e*l;return W("+",n,s)}if(o.gridRowHeightType==="auto"){let i=Ze(o,r),n=W("-",i,kt(o)+yo(o)),a=On(o,r),l=a.rowCount,s=ko(o.gap),c=ho(s),d=(a.rowCount-1)*c,u=W("/",W("-",n,d),l),f=W("*",e,u),y=e*c;return W("+",f,y)}_(o.gridRowHeightType)}function IO(e,t,o){if(yc(o.tree,e)&&e.position==="fixed")return"fixed";if(Cc(e,t)&&e.position==="absolute")return"absolute";if(uv(e,t)&&e.position==="sticky")return"sticky";if(t&&We(t))return"fixed";if(!(t&&qt(t)))return"absolute"}function NO(e,t,o){if(ve(e)&&ze(o.tree.getScopeNodeFor(e))){let r=e.children?.findIndex(Nr);if(E(r))return!1;let i=o.tree.getIndex(t);return r<i}return!1}var dp=class{constructor(t,o,r){this.treeStore=t;this.variables=o;this.valueTransforms=r;k(this,"simulationContext");this.simulationContext=Tk(this.treeStore.tree,this.variables,this.valueTransforms)}getCSSWidth(t){return Ok(t,this.simulationContext)}getHeight(t){return Dk(t,this.simulationContext)}getYPosition(t){return Gk(t,this.simulationContext)}getComponentViewportContext(t){let o=this.getCSSWidth(t),r,i;return Rr(t)||(r=this.getHeight(t),i=this.getYPosition(t)),{width:o,height:r,y:i}}};var pp=class{constructor(t,o){this.tree=t;this.bindings=o;k(this,"ids",new Map)}create(t){let o=this.composeBaseId(t),r=this.tree.get(t);to(r,"AppearIdCollector: Node not found");let i=kc(r,this.tree);return i.length>0?this.composeRepeaterId(o,i):o}composeBaseId(t){let o=Ft(t),r=this.ids.get(o);if(E(r))return this.ids.set(o,0),o;let i=r+1;return this.ids.set(o,i),`${o}-${i}`}composeRepeaterId(t,o){let r=[t];for(let i of o){let n=this.tree.get(i);n&&r.push(this.bindings.createWithNode("index",n))}return Je.join(r,"-")}};var Zi,dh,ph,zn=class{constructor(t){this.assetMap=t;ie(this,Zi);k(this,"keys",new Set)}addAsset(t){this.keys.add(t)}resolve(t){if(!gt(this,Zi,dh).call(this,t))return;let o=gt(this,Zi,ph).call(this,t);if(o!==null)return o&&(t=o.identifier),{src:ty(t)}}resolveResponsiveImage(t,{layerMaxSidePixelSize:o,focalPoint:r}={}){if(!gt(this,Zi,dh).call(this,t))return;let i=gt(this,Zi,ph).call(this,t);if(i===null)return;i&&(t=i.identifier);let n=i?.preferredSize??"auto",a=this.assetMap.assetForKey(t),l=a?.properties?.image,s=i?.intrinsicSize??l,c=ry(l?.width,l?.height),u={src:a?iy(a,n,o,c).url:Dl(t,void 0,void 0,s),positionX:void 0,positionY:void 0,srcSet:Xe.isOn("fixedSizeImageSrcset")?void 0:this.generateSrcSet(a,c,n),preferredSize:Xe.isOn("fixedSizeImageSrcset")?n:void 0,pixelWidth:s?.width,pixelHeight:s?.height};return r&&R(r.positionX)&&R(r.positionY)&&(u.positionX=r.positionX,u.positionY=r.positionY),u}generateSrcSet(t,o,r){if(!t)return;to(!Xe.isOn("fixedSizeImageSrcset"),"This code path must only be executed with fixedSizeImageSrcset: off");let i;if((!r||r==="auto"||r==="lossless")&&o?.length&&t.properties?.image){i="";for(let{maxSideSize:a,width:l}of o)l<sy||(i+=`${au(t,a,r)} ${l}w,`);i+=`${au(t,void 0,r)} ${t.properties.image.width}w`}return i}};Zi=new WeakSet,dh=function(t){return!(Fo(t)||t.startsWith("https:"))},ph=function(t){let o=oy(t);return o&&(t=o.identifier),t===""?null:(this.addAsset(t),o)};var up=class{constructor(t,o,r){this.declarations=t;this.scope=o;this.primaryVariantId=r}create(t,o){if(t===!0&&E(o))return{condition:!0};if(!E(t)&&E(o))return{condition:t};if(o){if(Array.from(o.values()).every(({value:y})=>y===t))return{condition:t};let r=new Set,i=new V.Set;ca(this.scope)&&this.primaryVariantId&&_k(this.primaryVariantId,t,r,i);let n=new Map,a=new Map,l=new Map,s=VO(l),c=s(t);for(let[y,v]of o){if(ca(this.scope)&&_k(y,v.value,r,i),!v.isGesture&&v.value===t)continue;let b=v.isGesture?n:a;xO(y,s(v.value),b)}let d=[],u=[];for(let y of l.keys()){let v=l.get(y);v&&(u.push(new V(y)),d.push(ue(v)))}let f=this.declarations.dedupe("isDisplayed",new V(at.lines(m`(${new V(d.join(", "))}) => {`,ca(this.scope)&&m`if (!${V.fn(te.isBrowser)}) return true`,...this.createConditionStatementsForGroup(n,"gestureVariant"),...this.createConditionStatementsForGroup(a,"baseVariant"),m`return ${c}`,m`}`)));return{condition:V.fn(f,...u),classNames:r,classNameExpressions:i}}return{condition:!0}}createConditionStatementsForGroup(t,o){if(t.size===0)return[];let r=[],i=new V(o);for(let[n,a]of t){let l=new V(n);if(a.size===1){let s=Array.from(a)[0];if(E(s))continue;r.push(m`if (${i} === ${s}) return ${l}`)}else r.push(m`if (${Array.from(a)}.includes(${i})) return ${l};`)}return r}};function xO(e,t,o){let r=ue(t),i=o.get(r)??new Set;o.set(r,i.add(e))}function VO(e){let t=new Set;return o=>{if(!No(o))return o;let r=ue(o),i=e.get(r)??new V(Pc("value",t));return e.set(r,i),i}}function $k(e){return`hidden-${Ft(e)}`}function _k(e,t,o,r){if(t===!1){let i=$k(e);o.add(i)}else if(No(t)){let i=$k(e);r.add(m`!(${t}) && ${i}`)}}var el,Wn,tl,mp=class{constructor(t,o,r,i,n,a){this.scope=t;this.bindings=o;this.declarations=r;this.imports=i;this.variables=n;this.treeStore=a;ie(this,el,new Map);ie(this,Wn,null);ie(this,tl,new Map)}isLayoutTemplateRef(t){if(nt(F(this,Wn))){if(ee(this,Wn,new Set),!tc(this.scope)||!AS(this.scope))return!1;let o=M.componentForIdentifier(this.scope.layoutTemplateIdentifier)?.properties;if(!o)return!1;let r=this.scope.getControlProps(o);for(let i in r){let n=r[i];if(E(n?.value)||z(n.value)||n.type!=="scrollsectionref")continue;let a=n.value.target;E(a)||z(a)||F(this,Wn).add(a)}}return F(this,Wn).has(t)}getNodeInPrimary(t){if(!t)return;let o=t.originalid?this.treeStore.tree.get(t.originalid):t;if(o)return o}scrollTargetInfo({target:t,collectionItem:o}){if(!t)return;if(j(t))return{ref:this.variables.create(t)};let r=this.treeStore.tree.get(t);if(!r||!fn(r)||this.treeStore.treeIndex.getScopeIdFor(r.id)!==this.scope.id)return;let i=this.getNodeInPrimary(r);if(!i)return;let n=this.ref(i,o);if(n)return{ref:n,offset:r.scrollMarginTop}}ref(t,o){let r=this.getNodeInPrimary(t);if(!r)return;let i=F(this,el).get(r.id);if(i)return i;let n=kc(r,this.treeStore.tree),a=this.isLayoutTemplateRef(r.id);if(a||o||n&&n.length>0){let d=this.id(r,o);if(!d)return;let u=this.imports.addImport("framer",{exportSpecifier:a?"useSiteRefs":"useDynamicRefs"});return V.fn(this.declarations.component.dedupe("dynamicRef",V.fn(m`${u}<HTMLElement>`)),d)}let l=this.bindings.create("ref"),s=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),c=m`const ${l} = ${V.fn(m`${s}.useRef<HTMLElement>`,m`null`)}`;return this.declarations.component.create(c),F(this,el).set(r.id,l),l}getBaseId(t,o){if(J(o)){if(fn(t)){let r=[t.id];return o&&o.id!==this.scope.id&&r.push(o.id),this.declarations.component.dedupe("elementId",V.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteElementId"}),...r))}return Ft(t.id)}if(le(o))return Je`${te.layoutId}-${Ft(t.id)}`}getPortalAncestor(t){let o=this.treeStore.tree.getParent(t.id);if(o){if(ot(t))return this.treeStore.tree.get(o.getPrimaryId());if(We(o)){let r=this.treeStore.tree.getParent(o.id);return this.treeStore.tree.get(r?.getPrimaryId())}}}portalId(t){let o=this.getPortalAncestor(t);return o?this.id(o):void 0}id(t,o){let r=this.getNodeInPrimary(t);if(!r)return;let i=this.treeStore.treeIndex.getScopeIdFor(r.id),n=this.treeStore.tree.get(i);if(!J(n)&&!le(n))return;if(J(n)&&fn(r)){let l=_v(r,this.treeStore.tree);l&&F(this,tl).set(r.id,l)}let a=this.getBaseId(r,n);if(a)return jv(r,this.treeStore.tree,l=>{if(l.id===r.id)return a;if(j(o)&&o.id===l.id)return this.variables.create(o);if(kS(o)&&o.key===l.id)return o.value;if(l.type==="slug")return this.variables.create(Mt(l.id,l.providerId))})}annotation(){let t=Object.fromEntries(F(this,tl));return Gt(t)?"":JSON.stringify(t)}};el=new WeakMap,Wn=new WeakMap,tl=new WeakMap;function wO(e){return e instanceof Error?!!zf(e):!1}function kO(e){return R(e)?e:e instanceof Error?e.message:Fe(e)?JSON.stringify(e):"Unknown error"}var ol,fp=class{constructor(t,o,r){this.scopeId=t;this.sourceNodeId=o;this.type=r;ie(this,ol,[])}record(t,o,r){if(wO(o)){this.recordKnownError(t,o);return}F(this,ol).push({nodeId:t.id,reason:kO(o),moduleIdentifier:Ge(r)?r:void 0})}get errors(){return F(this,ol).map(t=>new vb({...t,sourceNodeId:this.sourceNodeId,sourceNodeModuleType:this.type,scopeId:this.scopeId,type:"CodeGeneration"}))}recordKnownError(t,o){if(zf(o)){let r=new Set;o.error.forEach(i=>{r.add(i),this.record(t,"CodeError",i)}),o.missing.forEach(i=>{r.has(i)||this.record(t,"MissingModule",i)})}}};ol=new WeakMap;function uh(e,t){let o=[],r=vy(e,n=>{let a=t.create(n);return o.push(n),"${"+a+"}"});return{templatedUrl:new V("`"+r+"`"),usedVariables:o}}function hp(e,t,o,r=void 0){if(z(e.value))return to(!$t(e.value),"Computed values should not be possible in fetch fallback"),t.create(e.value);switch(e.type){case"color":return e.value?m`${e.value}`:m`undefined`;case"string":return m`${e.value}`;case"boolean":return new V(e.value);case"number":return new V(e.value);case"image":{if(e.value===void 0)return m`undefined`;let i=o.resolveResponsiveImage(e.value);return i?m`${i.src}`:m`undefined`}case"link":{if(!e.value||!r)return m`undefined`;let i=r.create(e.value);return i?new V(ue(i)):m`undefined`}default:At(e)}}function gp(e,t,o,r=void 0){let{templatedUrl:i}=uh(e,t),n=Ll(e);return new Y({url:i,resultKeyPath:e.resultKeyPath,fallbackValue:hp(n.controlProp,t,o,r),errorFallbackValue:n.errorControlProp?hp(n.errorControlProp,t,o,r):void 0,resultOutputType:n.controlProp.type,cacheDuration:e.cacheDuration,credentials:e.credentials})}var Bn=class{constructor(t,o,r,i,n){this.bindings=t;this.variables=o;this.preload=r;this.assets=i;this.links=n;k(this,"fetchesByNode",new Map);k(this,"resultBindingsByNode",new Map)}createFetchBinding(t,o){let r=Ll(o);if(!Sy(r))return hp(r.controlProp,this.variables,this.assets,this.links);let i=t.getPrimaryId(),n=this.resultBindingsByNode.get(i)??this.bindings.create("fetchResult");this.resultBindingsByNode.set(i,n),this.preload.addFetch(t,r);let a=this.fetchesByNode.get(t.id)??[];return a.push(gp(r,this.variables,this.assets,this.links)),this.fetchesByNode.set(t.id,a),m`${n}[${a.length-1}]`}getResultBinding(t){return this.resultBindingsByNode.get(t.getPrimaryId())}getFetchesForNode(t){return this.fetchesByNode.get(t.id)}};var yp=class{constructor(t){this.declarationCollector=t;k(this,"fontObjects",new Set);k(this,"fontReferences",new Map);k(this,"referencedComponentIdentifiers",new Set);k(this,"fontObjectsBySelector",new Map)}createDedupedVariationAxesBinding(t){return t.variationAxes?this.declarationCollector.dedupe("variationAxes",[...t.variationAxes]):void 0}addFontObjectBySelector(t,o){let r=this.fontObjectsBySelector.get(t);if(r){if(!o)return;let n=r[0];if(!n)return;if(Ql(n.source,o)&&!n.openType)for(let a of r)a.openType=!0;return}let i=ny.getFontBySelector(t);if(!(!i||!i.file))if(i.subsets){let n=[];this.fontObjectsBySelector.set(t,n);for(let a of i.subsets){let l={url:a.file,uiFamilyName:i.family.name,cssFamilyName:i.cssFamilyName,style:i.style,weight:i.weight!==void 0?String(i.weight):void 0,source:i.family.source,unicodeRange:a.unicodeRange,variationAxes:this.createDedupedVariationAxesBinding(i),openType:Ql(i.family.source,o)};this.fontObjects.add(l),n.push(l)}}else{let n={url:i.file,uiFamilyName:i.family.name,cssFamilyName:i.cssFamilyName,style:i.style,weight:i.weight!==void 0?String(i.weight):void 0,source:i.family.source,variationAxes:this.createDedupedVariationAxesBinding(i),openType:Ql(i.family.source,o)};this.fontObjects.add(n),this.fontObjectsBySelector.set(t,[n])}}addFontReference({componentIdentifier:t,fontReference:o}){this.fontReferences.set(ue(o),o),this.referencedComponentIdentifiers.add(t)}};function RO(e){return e==="string"||e==="vectorsetitem"}var Hn,Cp=class{constructor(t,o){this.modulesStore=t;this.tree=o;ie(this,Hn,new Map)}get structure(){return Array.from(F(this,Hn).values())}addSection(t){if(!im(t)&&!Mc(t))return;let o=uw(t);if(!o)return;let r={_id:o,_layerId:t.id,content:[]};return F(this,Hn).set(r._id,r),r._id}addCustomizations(t,o){if(!im(t)||!o)return;let r=F(this,Hn).get(o);if(r&&($(t)&&DO(t,r,this.tree,this.modulesStore),!!eT(t))){for(let i of t.customizations)if(De(t))r.content.push({field:i.fieldPath,text:t.getTextContent()});else if($(t)&&t.isVectorInstance){if(!Ge(t.codeComponentIdentifier))return;let n=Ts(ce(t.codeComponentIdentifier),this.tree,this.modulesStore)?.name;if(!R(n))return;r.content.push({field:i.fieldPath,text:n})}F(this,Hn).set(o,r)}}};Hn=new WeakMap;function DO(e,t,o,r){let i=M.componentForIdentifier(e.codeComponentIdentifier)?.properties;if(!i)return;let n=e.getControlProps(i);for(let a in n){let l=n[a];if(!l)continue;let{type:s,value:c}=l;if(!R(s)||!RO(s))continue;let d=i[a]?.title??a;if(R(c))switch(s){case"string":t.content.push({field:d,text:c});break;case"vectorsetitem":{if(!Ge(c))continue;let u=Ts(ce(c),o,r)?.name;if(!R(u))continue;t.content.push({field:d,text:c});break}default:_(s,"Unknown control type")}}}var Gn,Sp=class{constructor(t){this.scopeNode=t;ie(this,Gn,new Map)}recordClassName(t,o,r){if(!ze(this.scopeNode)||t.parentid!==o||t.visible===!1||vn(t)&&t.locked)return;let i=o,n=F(this,Gn).get(i)??new Set;n.add("."+r),F(this,Gn).set(i,n)}annotation(){if(!ze(this.scopeNode)||F(this,Gn).size===0)return"{}";let t={};for(let[o,r]of F(this,Gn))t[o]=Array.from(r);return JSON.stringify(t)}};Gn=new WeakMap;var mh=class{constructor(t,o,r,i){this.moduleType=t;this.modulesStore=o;this.submoduleName=r;this.sourceCode=i;k(this,"submoduleFilename");k(this,"submoduleImport");k(this,"bindings",new Er);k(this,"imports");k(this,"declarations",new Tn(this.bindings));this.submoduleFilename=JI(this.submoduleName),this.submoduleImport=XI(this.submoduleFilename),this.imports=new ai(this.moduleType,this.modulesStore,this.bindings)}get estimatedSize(){return this.declarations.declarationsByteSize}serialize(){let t=at.linesFrom(this.imports.statements),o=this.declarations.list();return at.sections(t,this.sourceCode,...o)}},vp=class{constructor(t,o,r){this.moduleType=t;this.modulesStore=o;this.componentSourceNodeId=r;k(this,"submodules",new Set)}create(t){let o=UI(this.componentSourceNodeId,this.submodules.size),r=new mh(this.moduleType,this.modulesStore,o,t);return this.submodules.add(r),r}delete(t){this.submodules.delete(t)}serialize(){let t=new Map;for(let o of this.submodules){let r=o.serialize();t.set(o.submoduleName,r)}return t}};function jk(e){return`${e}ToDisplayName`}var Uk="enumToDisplayNameFunctions";function Jk(e){if(e?.type!=="enum"||!e.optionTitles)return m`(value) => value`;let t=e.optionTitles;return new V(at.lines(m`(value, _locale) => {`,m`switch (value) {`,...e.options.map((o,r)=>{let i=t[r];return m`case ${o}: return ${E(i)?m`undefined`:i};`}),m`default: return "";`,m`}`,m`}`))}function Xk(e){let{locale:t,grouping:o,notation:r,compactDisplay:i,style:n,currency:a,currencyDisplay:l,unit:s,unitDisplay:c,minimumFractionDigits:d,maximumFractionDigits:u,minimumIntegerDigits:f}=e,y={locale:t,notation:r,style:n};switch(rr(o)&&(y.useGrouping=o),K(d)&&(y.minimumFractionDigits=d),K(u)&&(y.maximumFractionDigits=u),K(f)&&(y.minimumIntegerDigits=f),r==="compact"&&(y.compactDisplay=i),n){case"currency":y.currency=a,y.currencyDisplay=l;break;case"unit":y.unit=s,y.unitDisplay=c;break}return new Y(y)}var Zk=m`(value, options = {}, activeLocale) => {
    const fallbackLocale = "en-US";
    const locale = options.locale || activeLocale || fallbackLocale;
    const {
        useGrouping,
        notation,
        compactDisplay,
        style,
        currency,
        currencyDisplay,
        unit,
        unitDisplay,
        minimumFractionDigits,
        maximumFractionDigits,
        minimumIntegerDigits,
    } = options;
    const formatOptions = {useGrouping, notation, compactDisplay, style, currency, currencyDisplay, unit, unitDisplay, minimumFractionDigits, maximumFractionDigits, minimumIntegerDigits};
    const number = Number(value);
    try {
        return number.toLocaleString(locale, formatOptions);
    } catch {
        try {
            return number.toLocaleString(fallbackLocale, formatOptions);
        } catch {
            return number.toLocaleString();
        }
    }
};
`;function Kk(e,t){if(t.length===0)return null;C(e);let o=new Set;for(let i of t){let n=e.create(i);o.add(ue(n))}let r=`{${Array.from(o).join(", ")}}`;return new V(r)}function Yk(e,t,o,r){let i=e.name;switch(i){case"contains":case"endsWith":case"equals":case"startsWith":case"greaterThan":case"lessThan":case"isBefore":case"isAfter":case"isIncludedIn":return j(e.value)?(C(o),[o.create(e.value)]):[E(e.value)?m`undefined`:e.value];case"prefix":case"suffix":{if(j(e.value))return C(o),[o.create(e.value)];let a=E(e.value)?m`undefined`:e.value;return e.valueLocalized?(C(r,"LocalizedValueCollector is required"),[r.add(a,e.valueLocalized,l=>e.valueLocalized?.[l]?.value)]):[a]}case"toDateString":return[t.getActiveLocaleCode()];case"extractDateSegment":return[e.segment];case"numberToString":return[Xk(e),t.getActiveLocaleCode()];case"offsetAndLimitArray":return[e.startOffset,K(e.limit)?e.limit:m`undefined`];case"isBetweenDates":{let a=[];return j(e.start)?(C(o),a.push(o.create(e.start))):a.push(E(e.start)?m`undefined`:e.start),j(e.end)?(C(o),a.push(o.create(e.end))):a.push(E(e.end)?m`undefined`:e.end),a}case"convertFromEnum":case"convertFromString":{let l=function(d){To(d)&&Jr(d,u=>l(u)),j(d)&&a.push(d)};var n=l;let a=[];l(e.default);for(let d of e.cases)l(d.to);let s=Kk(o,a),c=o?.getLocale()??m`undefined`;return s?[c,s]:[c]}case"convertFromBoolean":{let l=function(u){To(u)&&Jr(u,f=>l(f)),j(u)&&a.push(u)};var n=l;let a=[];l(e.truthy),l(e.falsy);let s=o?.getLocale()??m`undefined`,c=Kk(o,a);return c?[s,c]:[s]}case"enumToDisplayName":return t.variables?[t.variables.getLocale()]:[];case"toString":case"toBoolean":case"toNumber":case"isSet":case"negate":case"reverseArray":case"toResponsiveImage":case"toImageSrc":case"jsonStringify":case"htmlEscape":case"htmlUnescape":case"addImageAlt":case"toZIndex":case"toAxisOverflow":case"toOverflowWithClipFallback":case"numberToPixelString":case"radiusForCorner":case"arrayToArray":case"arrayLength":case"isEven":case"isOdd":case"getGridColumnCSSValue":case"getGridRowCSSValue":case"getNumericColumnGap":return[];default:_(i,"All value transforms should define their arguments")}}var qk=m`(image, alt) => {
    if (!image || typeof image !== "object") {
        return;
    };
    return { ...image, alt };
};
`;var Qk=m`(value) => {
    return Array.isArray(value) ? value.length : 0
}
`;function eR(e){let t=m`item`,o={[ci]:m`${t}?.[${ci}]`};for(let r in e.mapping){let i=e.mapping[r];if(C($o(i)),Ny(i.value)){o[r]=m`${t}?.[${i.value.id}]`;continue}i.value}return m`(value) => {
      if (!Array.isArray(value)) return
      return value.map((${t}) => (${o}))
    }`}var tR=m`(a, b) => {
    if (typeof a === "string" && typeof b === "string") {
        return a.toLowerCase().includes(b.toLowerCase());
    }

    if (Array.isArray(a) && typeof b === "string") {
        return a.includes(b);
    }

    return false;
};
`;function LO(e){let t=Vr(e.outputType);return ue(m`return ${Wt(t)?t:m`undefined`};`)}function oR(e,t,o,r,i,n,a){if(o==="link")return!a||!To(e)&&!j(e)?void 0:a.create(e);if(!To(e))return j(e)?i.create(e):CS(o,e,r)?n&&t&&o==="string"?n.add(e,t,l=>t?.[l]?.value):e:SS(o,r)}function FO(e,t,o,r,i){if(!yS(e.outputType))return LO(e);let n=oR(e.truthy,e.truthyLocalized,e.outputType,t,o,r,i),a=oR(e.falsy,e.falsyLocalized,e.outputType,t,o,r,i);return at.lines(m`if (value) {`,m`return ${n===void 0?m`undefined`:n};`,m`} else {`,m`return ${a===void 0?m`undefined`:a};`,m`}`)}function rR(e,t,o,r,i){C(o),C(r),C(i);let n=new Set;function a(s){if(To(s)&&Jr(s,c=>a(c)),j(s)){C(o);let c=o.create(s);n.add(ue(c))}}a(e.truthy),a(e.falsy);let l=[m`value`,te.activeLocale];if(n.size>0){let s=`{${Array.from(n).join(", ")}}`;l.push(new V(s))}return new V(at.lines(m`(${new V(l.map(ue).join(", "))}) => {`,new V(FO(e,t,o,r,i)),m`}`))}function Oa(e,t,o,r,i,n,a){if(o==="link")return!a||!To(e)&&!j(e)?void 0:a.create(e);if(!To(e))return j(e)?i.create(e):hS(o,e,r)?n&&o==="string"&&R(e)&&t?n.add(e,t,l=>t?.[l]?.value):e:gS(o,r)}function iR(e){let t=Vr(e.outputType);return ue(m`return ${Wt(t)?t:m`undefined`};`)}function EO(e,t,o,r,i,n){if(t?.type!=="enum"||!mS(e.outputType))return iR(e);let a=new Set,l=Oa(e.default,e.defaultLocalized,e.outputType,o,r,i,n);return at.lines(m`switch (value) {`,...e.cases.filter(s=>a.has(s.from)||!t.options.includes(s.from)?!1:(a.add(s.from),!0)).map(s=>{let c=Oa(s.to,s.toLocalized,e.outputType,o,r,i,n);return m`case ${s.from}: return ${c===void 0?m`undefined`:c};`}),m`default: return ${l===void 0?m`undefined`:l};`,m`}`)}function nR(e,t,o,r,i,n){C(r),C(i),C(n);let a=new Set;function l(c){if(To(c)&&Jr(c,d=>l(d)),j(c)){C(r);let d=r.create(c);a.add(ue(d))}}e.cases.forEach(c=>{l(c.to)}),l(e.default);let s=[m`value`,te.activeLocale];if(a.size>0){let c=`{${Array.from(a).join(", ")}}`;s.push(new V(c))}return new V(at.lines(m`(${new V(s.map(ue).join(", "))}) => {`,new V(EO(e,t,o,r,i,n)),m`}`))}function AO(e){let t=Vr(e.outputType);return ue(m`return ${Wt(t)?t:m`undefined`};`)}function MO(e,t,o,r,i){if(!fS(e.outputType))return AO(e);let n=new Set,a=Oa(e.default,e.defaultLocalized,e.outputType,t,o,r,i);return at.lines(m`switch (typeof value === "string" ? value.toLowerCase() : value) {`,...e.cases.filter(l=>{let s=l.from.toLowerCase();return n.has(s)?!1:(n.add(s),!0)}).map(l=>{let s=Oa(l.to,l.toLocalized,e.outputType,t,o,r,i);return m`case ${l.from.toLowerCase()}: return ${s===void 0?m`undefined`:s};`}),m`default: return ${a===void 0?m`undefined`:a};`,m`}`)}function aR(e,t,o,r,i){C(o),C(r),C(i);let n=new Set;function a(s){if(To(s)&&Jr(s,c=>a(c)),j(s)){C(o);let c=o.create(s);n.add(ue(c))}}e.cases.forEach(s=>{a(s.to)}),a(e.default);let l=[m`value`,te.activeLocale];if(n.size>0){let s=`{${Array.from(n).join(", ")}}`;l.push(new V(s))}return new V(at.lines(m`(${new V(l.map(ue).join(", "))}) => {`,new V(MO(e,t,o,r,i)),m`}`))}var sR=m`(a, b) => {
    return typeof a === "string" && typeof b === "string" && a.toLowerCase().endsWith(b.toLowerCase());
};
`;var lR=m`(a, b) => {
    return (typeof a === "string" && typeof b === "string") ? a.toLowerCase() === b.toLowerCase() : a === b;
};
`;var cR=m`(value, segment = "year") => {
    if (typeof value !== "string") return;
    const date = new Date(value);
    if (isNaN(date.getTime())) return;
    if (segment === "year") return date.getUTCFullYear();
    if (segment === "month") return date.getUTCMonth() + 1;
    if (segment === "day") return date.getUTCDate();
    if (segment === "hour24") return date.getUTCHours();
    if (segment === "hour12") {
        const hour = date.getUTCHours();
        return hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
    }
    if (segment === "minute") return date.getUTCMinutes();
};
`;var fh=m`spanCount`,Tp=m`optionalColumnCount`,dR=m`(columnSpan, ${Tp}) => {
    if (columnSpan === "all") return "-1 / 1";
    const ${fh} = Number.isFinite(columnSpan) && columnSpan > 0 ? columnSpan : 1;
    if (Number.isFinite(${Tp}) && ${fh} > ${Tp}) {
        return ${Je`span ${Tp}`};
    }
    return ${Je`span ${fh}`};
};
`;var pR=m`spanCount`,uR=m`(rowSpan) => {
    const ${pR} = Number.isFinite(rowSpan) && rowSpan > 0 ? rowSpan : 1;
    return ${Je`span ${pR}`}
};
`;var mR=m`(gap) => {
    if (Number.isFinite(gap) && gap >= 0) return gap;
    if (typeof gap !== "string") return 0;
    const firstSegment = gap.split(" ")[0];
    const parsedGap = parseFloat(firstSegment);
    return Number.isFinite(parsedGap) && parsedGap >= 0 ? parsedGap : 0;
};
`;var fR=m`(a, b) => {
    return (typeof a === "number" && typeof b === "number") ? a > b : false;
};
`;var hR=m`(value) => {
    if (typeof value !== "string") return "";
    return value.replaceAll("&", "&amp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;").replaceAll('"', "&quot;").replaceAll("'", "&#39;");
};
`;var gR=m`(value) => {
    if (typeof value !== "string") return "";
    const entities = /&(?:[gl]t|quot|#39|amp|#6[02]|#34|apos|#38);/gu;
    const replacers = { "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'", "&amp;": "&", "&#60;": "<", "&#62;": ">", "&#34;": '"', "&apos;": "'", "&#38;": "&" };
    return value.replace(entities, match => replacers[match]);
};
`;var yR=m`(dateString, minDateString) => {
    if (typeof dateString !== "string" || typeof minDateString !== "string") return false;

    const date = new Date(dateString);
    if (isNaN(date.getTime())) return false;

    const minDate = new Date(minDateString);
    if (isNaN(minDate.getTime())) return false;

    return date >= minDate;
};
`;var CR=m`(dateString, maxDateString) => {
    if (typeof dateString !== "string" || typeof maxDateString !== "string") return false;

    const date = new Date(dateString);
    if (isNaN(date.getTime())) return false;

    const maxDate = new Date(maxDateString);
    if (isNaN(maxDate.getTime())) return false;

    return date <= maxDate;
};
`;var SR=m`(value, start, end) => {
    if (typeof value !== "string" || typeof start !== "string" || typeof end !== "string") return false;

    const date = new Date(value);
    if (isNaN(date.getTime())) return false;

    const startDate = new Date(start);
    if (isNaN(startDate.getTime())) return false;

    const endDate = new Date(end);
    if (isNaN(endDate.getTime())) return false;

    return date >= startDate && date <= endDate;
};
`;var vR=m`(value) => {
    return typeof value === "number" && value % 2 === 0;
};
`;var TR=m`(a, b) => {
    return b.includes(a);
};
`;var bR=m`(value) => {
    return typeof value === "number" && value % 2 === 1;
};
`;var IR=m`(value) => {
    if (Array.isArray(value)) return value.length > 0;
    return value !== undefined && value !== null && value !== "";
};
`;var NR=m`(value) => {
    const result = JSON.stringify(value)
    if (typeof result === 'string') return result.replace(/<\\/(script|style)/gi, '<\\\\/$1')
    return result
};
`;var xR=m`(a, b) => {
    return (typeof a === "number" && typeof b === "number") ? a < b : false;
};
`;var VR=m`(value) => {
    return !value;
};
`;var PR=m`(value) => {
    if (typeof value !== "number") return value;
    if (!Number.isFinite(value)) return undefined;
    return Math.max(0, value) + "px";
};
`;var wR=m`(value, offset, limit) => {
    if (!Array.isArray(value)) return []
    const end = typeof limit === "number" ? offset + limit : undefined
    return value.slice(offset, end);
};
`;var kR=m`(value, prefix) => {
    if (typeof value === "string" && typeof prefix === "string") {
        return prefix + value;
    } else if (typeof value === "string") {
        return value;
    } else if (typeof prefix === "string") {
        return prefix;
    }
    return "";
};
`;var RR=m`(value, cornerIndex) => {
    if (typeof value === "number" && Number.isFinite(value)) return Math.max(0, value) + "px";
    if (typeof value !== "string" || typeof cornerIndex !== "number") return undefined;
    const segments = value.split(" ");
    return segments[cornerIndex] || segments[cornerIndex - 2] || segments[0];
};
`;var DR=m`(value) => {
    return Array.isArray(value) ? Array.from(value).reverse() : [];
}
`;var LR=m`(a, b) => {
    return typeof a === "string" && typeof b === "string" && a.toLowerCase().startsWith(b.toLowerCase());
};
`;var FR=m`(value, suffix) => {
    if (typeof value === "string" && typeof suffix === "string") {
        return value + suffix;
    } else if (typeof value === "string") {
        return value;
    } else if (typeof suffix === "string") {
        return suffix;
    }
    return "";
};
`;var ER=m`(value, overflow) => {
    const isNonScrollable = (o) => o === "visible" || o === "clip" || o === undefined
    return isNonScrollable(value) === isNonScrollable(overflow) ? value : undefined
}`;var AR=m`(value) => {
    return Boolean(value);
};
`;var MR=m`value`,OR=m`activeLocale`;function zR(e,t){let o=t.dedupe("sharedDateFormatter",new V(at.lines(m`(value, formatOptions, locale) => {`,m`  if (typeof value !== "string") return "";`,m`  const date = new Date(value);`,m`  if (isNaN(date.getTime())) return "";`,m`  const fallbackLocale = "en-US";`,m`  try {`,m`      return date.toLocaleString(locale || fallbackLocale, formatOptions);`,m`  } catch {`,m`      return date.toLocaleString(fallbackLocale, formatOptions);`,m`  }`,m`};`))),r=TS(e.display,e.format,e.dateStyle,!1),i={...vS[r].options,timeZone:"UTC"},n=t.dedupe("dateOptions",new V(ue(i)));return new V(at.lines(m`(${MR}, ${OR}) => {`,m`return ${V.fn(o,MR,n,e.locale||OR)};`,m`};`))}var WR=m`(value) => {
    if (typeof value === "object" && value !== null && typeof value.src === "string") {
        return value.src;
    };
    return typeof value === "string" ? value : undefined;
};
`;var BR=m`(value) => {
    if (typeof value === "number" && Number.isFinite(value)) return value;
    if (typeof value !== "string") return 0;
    const parsedNumber = parseFloat(value);
    return (typeof parsedNumber === "number" && Number.isFinite(parsedNumber)) ? parsedNumber : 0;
};
`;var OO=`var(${py}, clip)`,HR=m`(value) => {${m.joinLines(m`if (value === "clip") return ${OO}`,m`return value`)}};`;var GR=m`(value) => {
    if (typeof value === "object" && value !== null && typeof value.src === "string") {
        return value
    }
    return typeof value === "string" ? {src: value} : undefined;
};
`;var $R=m`(value) => {
    return typeof value === "string" ? value : String(value);
};
`;var _R=m`(value) => {${m.joinLines(m`if (value < -1) return -1`,m`if (value > 11) return 11`,m`return value`)}};`;function jR(e){switch(e){case"isAfter":return yR;case"isBefore":return CR;case"isBetweenDates":return SR;case"contains":return tR;case"endsWith":return sR;case"equals":return lR;case"isSet":return IR;case"greaterThan":return fR;case"lessThan":return xR;case"negate":return VR;case"numberToString":return Zk;case"startsWith":return LR;case"toString":return $R;case"toNumber":return BR;case"toBoolean":return AR;case"extractDateSegment":return cR;case"reverseArray":return DR;case"offsetAndLimitArray":return wR;case"arrayLength":return Qk;case"prefix":return kR;case"suffix":return FR;case"toResponsiveImage":return GR;case"toImageSrc":return WR;case"jsonStringify":return NR;case"htmlEscape":return hR;case"htmlUnescape":return gR;case"addImageAlt":return qk;case"toZIndex":return _R;case"toAxisOverflow":return ER;case"toOverflowWithClipFallback":return HR;case"numberToPixelString":return PR;case"radiusForCorner":return RR;case"isIncludedIn":return TR;case"isEven":return vR;case"isOdd":return bR;case"getGridColumnCSSValue":return dR;case"getGridRowCSSValue":return uR;case"getNumericColumnGap":return mR;default:_(e,"All constant transform names should be implemented")}}function UR(e,t,o,r,i,n,a){switch(e.name){case"enumToDisplayName":return Jk(t);case"convertFromEnum":return nR(e,t,o,r,i,n);case"convertFromString":return aR(e,o,r,i,n);case"convertFromBoolean":return rR(e,o,r,i,n);case"arrayToArray":return eR(e);case"toDateString":return zR(e,a);default:_(e,"All dynamic transform names should be implemented")}}var Do=oa(),zO={name:"toString"},WO={name:"toNumber"},BO={name:"toBoolean"},HO={name:"toResponsiveImage"},GO={name:"toImageSrc"},$O={name:"toZIndex"},_O={name:"numberToPixelString"},jO={name:"radiusForCorner"},UO={name:"toAxisOverflow"},JO={name:"toOverflowWithClipFallback"},XO={name:"jsonStringify"},ZO={name:"htmlEscape"},KO={name:"htmlUnescape"},YO={name:"addImageAlt"},qO={name:"getGridColumnCSSValue"},QO={name:"getGridRowCSSValue"},ez={name:"getNumericColumnGap"};function tz(e){return Vy(e.name)}var Br=class{constructor(t,o,r,i,n,a,l,s,c){this.fileDeclarations=t;this.componentDeclarations=o;this.imports=r;this.variables=i;this.localizedValues=n;this.links=a;this.fetches=l;this.modulesStore=s;this.type=c}wrapInTransformFunction(t,o,r,i,n){if(xy(o.name)){let a=this.fileDeclarations.dedupe(o.name,jR(o.name));return V.fn(a,t,...r)}if(tz(o)){if(o.name==="enumToDisplayName"&&i&&i.type==="enum"){let l=this.getImportedEnumToDisplayNameIfPossible(t,i);if(l)return l}let a=UR(o,i,n,this.variables,this.localizedValues,this.links,this.fileDeclarations);return V.fn(new V(this.fileDeclarations.dedupe(o.name,a)),t,...r)}_(o.name,"All value transforms should be handled in wrapInTransformFunction")}getImportedEnumToDisplayNameIfPossible(t,o){let r=this.imports,i=this.modulesStore;if(!r||!i)return;let n=UC(o);if(!n)return;let{dataIdentifier:a,enumFieldKey:l}=n;if(a===rv)return l===ov?this.variables?.getLayoutDirectionName()??m`undefined`:this.variables?.getLocaleName()??m`undefined`;let s=M.dataForIdentifier(a);if(!s||!s.annotations)return;let c="framerEnumToDisplayNameUtils",d=s.annotations?.[c];if(!R(d))return;let u=Number.parseInt(d,10);if(!K(u))return;let f=ce(a);if(!Ge(f))return;let{importSpecifier:y}=si(f,this.type,i);if(!y)return;let v=this.variables?.getLocale()??m`undefined`;switch(u){case 1:{let b=jk(l),x=r.addImport(y,{exportSpecifier:b});return V.optionalFn(x,t,v)}case 2:{let b=Uk,x=r.addImport(y,{exportSpecifier:b});return V.optionalFn(m`${x}[${l}]`,t,v)}default:throw new Error(`Enum to display name utils, unsupported version: ${u}`)}}wrapInValueTransform(t,o,r,i){return this.wrapInTransformFunction(t,o,Yk(o,this,this.variables,this.localizedValues),r,i)}makeTypeSafe(t,o){switch(o){case"string":case"color":return this.wrapInTransformFunction(t,zO,Do);case"number":return this.wrapInTransformFunction(t,WO,Do);case"boolean":return this.wrapInTransformFunction(t,BO,Do);case"array":case"enum":case"link":case"gap":case"padding":case"borderradius":case"image":return t;default:return t}}getActiveLocaleCode(){if(!this.componentDeclarations||!this.imports)return m`undefined`;let t=this.imports.addImport("framer",{exportSpecifier:"useLocaleCode"});return this.componentDeclarations.dedupe("activeLocaleCode",V.fn(t))}createComputedValue(t,o,r){C(this.variables);let i=vr(t)?o.cache.getVariableControlByReference(t.startValue):void 0,n=vr(t)?this.variables.create(t.startValue):this.fetches.createFetchBinding(o,t.startValue),a;t.transforms.forEach(s=>{Py(s.name)&&(n=this.wrapInValueTransform(n,s,i,r),a=s)});let l=a?wy(a.name):null;return!l||l.length>1||l[0]!==t.outputType?this.makeTypeSafe(n,t.outputType):n}wrapInToResponsiveImage(t){return this.wrapInTransformFunction(t,HO,Do)}wrapInToImageSrc(t){return this.wrapInTransformFunction(t,GO,Do)}wrapInToZIndex(t){return this.wrapInTransformFunction(t,$O,Do)}wrapInNumberToPixelString(t){return this.wrapInTransformFunction(t,_O,Do)}wrapInRadiusForCorner(t,o){return this.wrapInTransformFunction(t,jO,[o])}wrapInToAxisOverflow(t,o){return this.wrapInTransformFunction(t,UO,[o])}wrapInToOverflowWithClipFallback(t){return this.wrapInTransformFunction(t,JO,Do)}wrapInAddImageAlt(t,o){return this.wrapInTransformFunction(t,YO,[o])}wrapInClampRGB(t){return C(this.imports,"ValueTransformCollector: Must have imports to wrap in clampColor."),V.fn(this.imports.addImport("framer",{exportSpecifier:"clampRGB"}),t)}wrapInGetGridColumnCSSValue(t,o){return this.wrapInTransformFunction(t,qO,o?[o]:Do)}wrapInGetGridRowCSSValue(t){return this.wrapInTransformFunction(t,QO,Do)}wrapInGetNumericColumnGap(t){return this.wrapInTransformFunction(t,ez,Do)}wrapInTemplateFilters(t,o){return this.makeTypeSafe(Bb(t,o,{json:r=>this.wrapInTransformFunction(r,XO,Do),escape:r=>this.wrapInTransformFunction(r,ZO,Do),raw:r=>this.wrapInTransformFunction(r,KO,Do)}),"string")}};function oz(e){return J(e)||mo(e)||le(e)||Zr(e)||ze(e)}function JR(e,t){return m`(key, locale){${m.joinLines(m`while (locale) {${m.joinLines(m`const values = ${e}[locale.id]`,m`if (values) {${m.joinLines(m`const value = ${t?m`values.read()[key]`:m`values[key]`}`,m`if (value) return value`)}}`,m`locale = locale.fallback`)}}`)}}`}var il,bp=class{constructor(t,o,r){this.entryNode=t;this.variables=o;this.treeStore=r;k(this,"cache",{});k(this,"valueCounter",0);ie(this,il,!1)}freeze(){ee(this,il,!0)}add(t,o,r){C(!F(this,il),"Cannot add values to a frozen LocalizedValuesCollector.");let i={};if(!o||!oz(this.entryNode))return t;let n;if(this.variables){let u=new Er;n=new bn(this.entryNode,u)}let a=this.treeStore.tree.root.locales??[];for(let u of a){if(!(u.id in o))continue;let f=this.createLocalizedValue(u.id,n,r);Fo(f)||(i[u.id]=f)}if(Gt(i))return t;let l=ue({defaultValue:t,localizedValues:i}),s=this.cache[l];if(s)return s;let c=`v${this.valueCounter++}`,d=V.fn(this.getLocalizedValueBinding,c,te.activeLocale);if(this.variables&&n&&n.size>0){let u=[],f=[];for(let[v,b]of n){u.push(b);let x=this.variables.create(v);f.push(x)}for(let v in i){let b=i[v];C(!Fo(b),"Localized should not be null or undefined");let x=m.listFrom(u);i[v]=m`(${x}) => ${b}`}let y=m.listFrom(f);d=m`${d}?.(${y})`}for(let u in i){let f=i[u];C(!Fo(f),"Localized should not be null or undefined"),this.recordLocalizedValue(u,c,f)}return E(t)||(d=m`${d} ?? ${t}`),this.cache[l]=d}};il=new WeakMap;var Ki,Ip=class extends bp{constructor(o,r,i,n,a,l,s,c){super(o,r,i);this.imports=n;this.declarations=a;this.fetches=l;this.modulesStore=s;this.moduleType=c;k(this,"submoduleByLocaleId",new Map);k(this,"identifier",`../${_r("localization",this.entryNode.id)}`);k(this,"submodules");k(this,"bindings",new Er);ie(this,Ki);this.submodules=new vp(this.moduleType,this.modulesStore,this.entryNode.id)}get getLocalizedValueBinding(){return this.imports.addImport(this.identifier,{exportSpecifier:"default",importBinding:"getLocalizedValue"})}canPreloadWithSuspense(){return!le(this.entryNode)}preloadWithSuspense(){F(this,Ki)||(ee(this,Ki,this.bindings.create("usePreloadLocalizedValues")),this.declarations.component.create(V.fn(this.imports.addImport(this.identifier,{exportSpecifier:ue(F(this,Ki))}),te.activeLocale)))}createLocalizedValue(o,r,i){let n=this.submoduleByLocaleId.get(o)??this.submodules.create(),a=new zi(this.entryNode,n.imports,n.bindings,r,this.treeStore,this.modulesStore),l=i(o,{links:a,variables:r,imports:n.imports,declarations:n.declarations,valueTransforms:new Br(n.declarations,void 0,n.imports,r,this,a,this.fetches,this.modulesStore,this.moduleType)});if(Fo(l)){n&&!this.submoduleByLocaleId.has(o)&&this.submodules.delete(n);return}return this.submoduleByLocaleId.set(o,n),this.canPreloadWithSuspense()&&this.preloadWithSuspense(),l}recordLocalizedValue(o,r,i){let n=this.submoduleByLocaleId.get(o);C(n,"Localization submodule must exist"),n.declarations.create(m`export const ${new V(r)} = ${i}`)}maybeGetUsePreloadDeclarations(o){if(!this.canPreloadWithSuspense()||!F(this,Ki))return[];let r=this.bindings.create("preload"),i=F(this,Ki);return[m`function ${r}(locale) {${m.joinLines(m`const promises = []`,m`while (locale) {${m.joinLines(m`const values = ${o}[locale.id]`,m`if (values) {${m.joinLines(m`const promise = values.preload()`,m`if (promise) promises.push(promise)`)}}`,m`locale = locale.fallback`)}}`,m`if (promises.length > 0) return Promise.all(promises)`)}}`,m`export function ${i}(locale) {${m.joinLines(m`const preloadPromise = ${r}(locale)`,m`if (preloadPromise) throw preloadPromise`)}}`]}values(o){let r={};for(let[i,n]of this.submoduleByLocaleId)if(this.canPreloadWithSuspense()){let a=o.addImport("framer",{exportSpecifier:"LazyValue"});r[i]=V.fn(m`new ${a}`,m`() => import(${n.submoduleImport})`)}else r[i]=o.addImport(n.submoduleImport,{exportSpecifier:"*",importBinding:"localizedValues"});return r}module(o){if(this.freeze(),(this.treeStore.tree.root.locales??[]).length===0||this.submoduleByLocaleId.size===0)return;let i=new ai(this.moduleType,this.modulesStore,this.bindings),n=new Tn(this.bindings),a=n.dedupe("valuesByLocaleId",this.values(i));return{type:"localization",revision:o,source:m.joinSections(m.joinLines(...i.statements),...n.list(),m`export default function getLocalizedValue${JR(a,this.canPreloadWithSuspense())}`,...this.maybeGetUsePreloadDeclarations(a)),artifacts:{submodules:this.submodules.serialize()}}}};Ki=new WeakMap;var nl,rl=class extends bp{constructor(o,r,i,n,a,l,s,c,d){super(o,r,i);this.imports=n;this.bindings=a;this.declarations=l;this.fetches=s;this.modulesStore=c;this.moduleType=d;k(this,"valuesByLocaleId",{});ie(this,nl)}get getLocalizedValueBinding(){return F(this,nl)||ee(this,nl,this.bindings.create("getLocalizedValue")),F(this,nl)}recordLocalizedValue(o,r,i){let n=this.valuesByLocaleId[o]??{};n[r]=i,this.valuesByLocaleId[o]=n}createLocalizedValue(o,r,i){let n=new zi(this.entryNode,this.imports,this.bindings,r,this.treeStore,this.modulesStore);return i(o,{links:n,variables:r,imports:this.imports,declarations:this.declarations,valueTransforms:new Br(this.declarations,void 0,this.imports,r,this,n,this.fetches,this.modulesStore,this.moduleType)})}list(){if(this.freeze(),(this.treeStore.tree.root.locales??[]).length===0)return[];let r=this.bindings.create("valuesByLocaleId");return[m`const ${r} = ${this.valuesByLocaleId}`,m`function ${this.getLocalizedValueBinding} ${JR(r,!1)}`]}};nl=new WeakMap;function XR(e){e=[...e].sort((o,r)=>o[0]-r[0]||o[1]-r[1]);let t=[];for(let o of e){if(o[0]===o[1])continue;let r=t[t.length-1];if(!r){t.push(o);continue}if(o[0]<=r[1]){r[1]<o[1]&&(r[1]=o[1]);continue}t.push(o)}return t}function rde(e,t){let o=[],r=0;for(let[i,n]of e){if(i<=r){r=n;continue}o.push([r,i]),r=n}return t!==void 0&&r<t&&o.push([r,t]),o}var $n,_n,za,Np=class{constructor(t){ie(this,$n);ie(this,_n,new Set);ie(this,za,new Map);ee(this,$n,{...t})}count(t,o=1){F(this,$n)[t]+=o}measureLength(t,o){return(typeof o=="string"||o instanceof V)&&(F(this,$n)[t]+=o.length),o}get(){if(F(this,_n).size>0){let o=Array.from(F(this,_n),r=>r.metric).join(", ");throw Error(`Attempted to get metrics before completing timer(s): ${o}`)}let t={...F(this,$n)};for(let[o,r]of F(this,za)){let i=XR(r);t[o]+=Math.round(i.reduce((n,[a,l])=>n+(l-a),0))}return t}time(t){let o=performance.now(),r=!1,i={get metric(){return t},cancel:()=>{r||(F(this,_n).delete(i),r=!0)},done:()=>{C(!r,"Attempted to complete a cancelled timer");let n=F(this,za).get(t);n||(n=[],F(this,za).set(t,n)),n.push([o,performance.now()]),i.cancel()}};return F(this,_n).add(i),i}async timed(t,o){let r=this.time(t);try{return await o()}finally{r.done()}}};$n=new WeakMap,_n=new WeakMap,za=new WeakMap;var al,jn=class{constructor(t,o,r,i,n,a,l){this.entryNode=t;this.treeStore=o;this.variables=r;this.declarations=i;this.bindings=n;this.imports=a;this.assets=l;ie(this,al,new Map);k(this,"preloadDependencyTree",new Map)}command(t){let o=F(this,al).get(t);if(o)return o;let r=this.bindings.create("pre"+t);return F(this,al).set(t,r),r}addQuery(t,o,r){if(!le(this.entryNode))return;let{destructured:i,dependencies:n}=this.getVariableDependencies(r),a=m`(${KR(this.command("query"),i)}) => ${V.fn(this.command("query"),o)}`;this.addStatement("query",t,n,V.fn(this.declarations.dedupe("query",a),this.command("query"),i))}addFetch(t,o){if(!le(this.entryNode))return;let{usedVariables:r}=uh(o,this.variables);j(o.controlProp.value)&&r.push(o.controlProp.value);let{destructured:i,dependencies:n}=this.getVariableDependencies(r),a=m`(${KR(this.command("fetch"),i)}) => ${V.fn(this.command("fetch"),gp(o,this.variables,this.assets,void 0))}`;this.addStatement("fetch",t,n,V.fn(this.declarations.dedupe("query",a),this.command("fetch"),i))}createPromiseList({fetches:t,children:o},r=!1){let i=[];if(r)for(let n of t)i.push(n);for(let[,n]of o){for(let l of n.fetches)i.push(l);if(!n.value)continue;let a=n.value;if(n.children.size===0){i.push(a);continue}i.push(m`${a}.then(collection => Promise.all(collection.flatMap((${az(this.variables,n.usedVariables)}) => (${this.createPromiseList(n)}))))`)}return m`[${m.listFrom(i)}]`}getHook(){if(!le(this.entryNode))return{variants:new Set,hook:void 0};let t={},o=[],r=new Set;for(let[y,v]of this.preloadDependencyTree){if(v.children.size===0&&v.fetches.size===0||!v.variantHasAnyFetches)continue;r.add(y);let b=v.usedVariables.map(x=>this.variables.create(x));o.push(...b),t[y]=this.declarations.dedupe("preload",m`(${this.command("query")}, ${this.command("fetch")}, ${hh(b)??m`props`}) => Promise.all(${this.createPromiseList(v,!0)})`)}if(!r.size)return{variants:new Set,hook:void 0};let i=this.declarations.dedupe("preloadStatements",t),n=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a=this.imports.addImport("framer",{exportSpecifier:"usePreloadQuery"}),l=this.imports.addImport("framer",{exportSpecifier:"usePrefetch"}),s=m`variant`,c=m`gestures`,d=m`clearLoadingVariant`,u=m`setGestureState`,f=this.declarations.dedupe("useLoadingVariant",m`(${s}, ${c}, ${d}, ${u}, props?: Record<string, unknown>) => {${m.joinLines(m`const prequery = ${V.fn(a)}`,m`const prefetch = ${V.fn(l)}`,m`${n}.useEffect(() => {${m.joinLines(m`const promise = ${i}[${s}]`,m`if (!promise || !${c}?.[${s}]?.loading) return`,m`promise(prequery, prefetch, props)`,m`.then(() => ${V.fn(d)})`,m`.catch(() => ${V.fn(u,{isError:!0})})`)}}, [${s}])`)}}`);return{variants:r,hook:y=>V.fn(f,te.baseVariant,y,te.clearLoadingGesture,te.setGestureState,hh(o))}}addStatement(t,o,r,i){let n=this.treeStore.treeIndex.getGroundNodeIdFor(o.id),a=this.treeStore.tree.get(n);if(!a||!xe(a)||Pa(a.gesture))return;let l=ZR(this.preloadDependencyTree,a.id);t==="fetch"&&(l.variantHasAnyFetches=!0);let s=r.get(this.entryNode.id);s&&l.usedVariables.push(...s);let c=l;for(let d of rz(o,r,t==="fetch")){let u=ZR(c.children,d);if(d===o.id){t==="query"&&(u.value=i),t==="fetch"&&u.fetches.add(i);for(let[y,v]of r){let b=u.dependencies.get(y)??[];b.push(...v),u.dependencies.set(y,b)}}let f=r.get(d);f&&u.usedVariables.push(...f),c.children.set(d,u),c=u}this.preloadDependencyTree.set(a.id,l)}getVariableDependencies(t){let o=[],r=new Map;for(let i of t)o.push(this.variables.create(i)),iz(r,i.providerId??this.entryNode.id,i);return{destructured:hh(o),dependencies:r}}};al=new WeakMap;function rz(e,t,o){if(e.cache.ancestorRepeaterIds){if(o){let r=[...e.cache.ancestorRepeaterIds,e.id];for(let i=e.cache.ancestorRepeaterIds.length-1;i>=0;i--){let n=e.cache.ancestorRepeaterIds[i];if(n&&t.has(n))break;r.splice(i,1)}return r}return[...e.cache.ancestorRepeaterIds,e.id]}return[e.id]}function iz(e,t,o){let r=e.get(t)??[];r.push(o),e.set(t,r)}function nz(e){return{id:e,value:void 0,dependencies:new Map,usedVariables:[],children:new Map,fetches:new V.Set,variantHasAnyFetches:!1}}function ZR(e,t){return e.get(t)??nz(t)}function KR(...e){let t=[];for(let o of e)o&&t.push(ue(o));return new V(t.join(", "))}function hh(e){if(e.length===0)return;let t={};for(let o of e)t[ue(o)]=o;return t}function az(e,t){if(t.length===0)return m``;let o=new Y;for(let r of t)o[r.id]=e.create(r);return o}var Ba,xp=class{constructor(){ie(this,Ba,[])}add(t){let o=cz(t);o.length!==0&&F(this,Ba).push(...o)}annotation(){if(F(this,Ba).length===0)return;let t=new Set;for(let o of F(this,Ba))t.add(JSON.stringify(o));return`[${Array.from(t).join(",")}]`}};Ba=new WeakMap;function Wa(e){return R(e)&&e.length>0}function sz(e){return Fe(e)?"id"in e&&Wa(e.id)&&(e.type===void 0||e.type==="click"||e.type==="form_submit"):!1}function wde(e){return ft(e)?e.every(sz):!1}function lz(e,t,o){if(e.includes(ic))try{let i=Ia(e).querySelectorAll(`[${ic}]`);for(let n of i){let a=n.getAttribute(ic);Wa(a)&&o.push({id:a,nodeId:t,type:"click"})}}catch{}}function cz(e){let t=[],o=e.getPrimaryId();if(Wi(e)&&Wa(e.linkClickTrackingId)&&t.push({id:e.linkClickTrackingId,nodeId:o,type:"click"}),De(e)){for(let r of e.getLinkClickTrackingId(!1))Wa(r)&&t.push({id:r,nodeId:o,type:"click"});if(e.htmlLocalized)for(let r in e.htmlLocalized){let i=e.htmlLocalized[r]?.value;i&&lz(i,o,t)}}if($(e)){let r=M.reactComponentForIdentifier(e.codeComponentIdentifier);if(r?.properties){let i=e.getControlProps(r.properties);for(let n in i){if(!i[n])continue;let a=i[n];a.type==="trackingid"&&Wa(a.value)&&t.push({id:a.value,nodeId:void 0,type:void 0})}}}return Vo(e)&&Wa(e.formSubmitTrackingId)&&t.push({id:e.formSubmitTrackingId,nodeId:o,type:"form_submit"}),t}var Vp=class{constructor(t,o,r,i){this.imports=t;this.treeStore=o;this.modulesStore=r;this.createBinding=i;k(this,"sets",new Set)}resolveVariableInstance(t){C(j(t.dynamicVectorSetIdentifier),"Vector set identifier must be a variable reference"),C(Ge(t.codeComponentIdentifier),"Code component identifier must be a module");let o=ce(t.codeComponentIdentifier),r=Ts(o,this.treeStore.tree,this.modulesStore)?.set.moduleId;return r&&this.sets.add(r),this.createBinding(t.dynamicVectorSetIdentifier,t,"Icon")}resolveControl(t,o,r){if(j(t))return this.sets.add(o.setModuleId),this.createBinding(t,r,"Icon");C(Ge(t),"Vector set item must be a module export identifier");let i=Qv(this.treeStore.tree,o,t);if(i)return this.imports.addModuleImport(i)}annotation(){if(this.sets.size!==0)return JSON.stringify(Array.from(this.sets))}};var sl,ll,gh,Pp=class{constructor(){ie(this,ll);ie(this,sl,new Map)}set(t,o){F(this,sl).set(gt(this,ll,gh).call(this,t),o)}get(t){return F(this,sl).get(gt(this,ll,gh).call(this,t))}};sl=new WeakMap,ll=new WeakSet,gh=function(t){return t.getPrimaryId()};function YR(e,t){let o=new Map(t.map(i=>[i.id,i])),r=[];for(let i of e.getRouteSegmentRootNode().getWebPageIdToRawPathMap(e).keys()){let n=o.get(i);n&&r.push(n)}return r}function qR(e,t){let o,r,i,n,a;for(let s of e)J(s,!0)?(t===s.id&&(o=o??s),s.dataIdentifier?i=i??s:r=r??s):It(s,!0)?a=a??s:ct(s,!0)&&(n=n??s);let l=o??r??i??a??n;return C(l,"getFirstPageNodeAccordingToUI: Tree must contain at least one Web Page, Design Page or Canvas Page"),l}function QR(e){for(let t of e)if(It(t,!0))return t}function eD(e){return e?J(e,!0)||ct(e,!0)||le(e,!0)||It(e,!0):!1}function tD(e,t,o=!1,r=!1){let i=t?.[e];if(i)return i;if(e===cc&&o)return r?"Key":"Key & Gamepad";if(r&&e==="onMouseEnter")return"Enter";let a=(e.startsWith("on")&&e.length>2?e.substring(2):e).replace("Tap","Click");return Ur(a)}function dz(){let e=null,t=null;return o=>{let r=M.componentForIdentifier(o.codeComponentIdentifier);if(r===e)return t;if(!r||!r.properties)return null;let i={},n=Object.keys(r.properties);for(let a=0,l=n.length;a<l;a++){let s=n[a],c=r.properties[s];c?.type==="eventhandler"&&c.title&&(i[s]=c.title)}return e=r,t=i,i}}var Jde=dz();function pz(e,t){let o=new Set(e.variables.map(r=>r.name));return Mr(Ur(t),o)}function uz(e){switch(e.type){case"controlReference":case"nodePropertyControlReference":switch(e.expectedType){case"enum":return"Type";case"file":return"File";default:throw Error(`getFallbackNameForCreateVariableOptions(), unsupported file reference type: ${e.expectedType}`)}default:return OC(e.type)}}function mz(e,t){if(e==="richtext")return t.length;let o=Gy;return t.forEach((r,i)=>{if(!nn(o)){if(r.type!=="richtext"){K(o)&&(o=Jg);return}$y(o)||(o=i)}}),K(o)?o:t.length}function fz(e){return mo(e)?"collection":ze(e)?"layout_template":le(e)?"canvas_component":J(e)?"web_page":(C(!0,"Should not be able to create variables on invalid scope",e.__class),"canvas_component")}function yh(e,t){let{scopeId:o,isAssigned:r=!0,useUniqueName:i=!0,...n}=t,a=e.get(o);if(!a||!qr(a))return null;let l=t.name.trim(),s=l||uz(t),c=i?pz(a,s):s,d=Js({...n,name:c},fz(a));if(d.type==="eventhandler"&&!le(a))return null;let u=mz(d.type,a.variables),f=yr.insert(a.variables,u,d);return a.set({variables:f}),r&&LV({variableType:d.type,variableId:d.id}),Mt(d.id,a.id)}function cpe(e){let{engine:t,showModal:o=!0,...r}=e,i=yh(t.tree,r);if(!i)return null;let n=t.tree.get(e.scopeId);return!n||!qr(n)?null:(pa(t)&&o&&(t.stores.variablesStore.selectedVariableId=i.id,t.stores.modalStore.set({type:"Variables",source:"properties"})),Mt(i.id,n.id))}var hz=Ke("createAndAssignActionVariableToNode");function oD(e,t,o,r,i){if(!(zt(t)||$(t)))return null;let n=e.getScopeNodeFor(t);if(!n||!le(n))return null;let a=e.getGroundNodeFor(t);if(!a||!Pr(a))return null;let l=M.componentForIdentifier("framer/useTriggerEvent");if(!l)return null;let s=yh(e,{scopeId:n.id,type:"eventhandler",name:r??tD(o,null),initialValue:void 0});if(!s)return null;Lc(e,t,o,l,{id:{type:"string",value:s.id}});let c=n.getTopLevelReplicaVariants();for(let d of c){let{overrides:u}=d.replicaInfo;u[t.id]&&oT(e,d,t.id,o,l,{id:{type:"string",value:s.id}})}return i&&i.updateComponent(n.id).catch(d=>hz.error(d)),s.id}function gz(e){let t=Dc(e);if(Object.keys(t).length!==0)for(let r in t){let i=t[r];if(i&&i.length===0)return r}}function yz(e,t,o){switch(t){case"framer/useShowOverlay":return e.create(qb,o);case"framer/useShowRelativeOverlay":return e.create(di,o,{width:200,height:150,radius:10,boxShadows:[Wy({x:0,y:10,blur:20,color:"rgba(0,0,0,0.05)",spread:0})],floatingPositionEnabled:!0,floatingPlacement:ZS,floatingAlignment:KS,floatingOffsetX:JS,floatingOffsetY:XS,floatingCollisionDetection:!0,floatingCollisionPadding:uc});default:_(t)}}function Cz(e,t,o,r){o&&C(t==="framer/useShowOverlay"&&We(o)||t==="framer/useShowRelativeOverlay"&&(Pe(o)||$(o)),"Invalid overlay type: ",o.__class,"for overlay action: ",t);let i=o??yz(e,t,r.id);return Ye(i)&&i.set({zIndex:oS,styleAppearEffectEnabled:!0,styleAppearEffectTrigger:"onMount",overflow:"clip",position:"absolute",...gT.fadeIn()}),i}function Sz(e,t,o,r,i){C(gs(o),"Parent is not a local smart component instance, events can't be created");let n=sv(e,o);e.loadScopes([n],([a])=>{if(!a)return;let l=a.getPrimaryVariant();C(l,"SmartComponentNode should have a primary variant");let s=oD(e,l,r,r==="onMouseEnter"?"Hover":void 0,t);C(s,"Should be able to create event key for local smart component node"),i(s)})}function rD(e,t,o,r,i){let n=M.componentForIdentifier(t);C(n,"Cannot find overlay action definition"),Lc(e,i,r,n,{overlay:{type:"string",value:o.id}},!0)}function vz(e){switch(e){case"framer/useShowOverlay":return"fixed";case"framer/useShowRelativeOverlay":return"relative";default:_(e)}}function iD({treeStore:e,codeGenerationStore:t},o,r,i){let n=e.tree.get(r);if(!n)return;let a=ht(n)?e.tree.get(n.originalid):n;if(!a||!zt(a)&&!$(a))return;let l=o==="framer/useShowRelativeOverlay"?"onMouseEnter":"onTap",s=$(a)?gz(a):l,c=gs(a);if(!s&&!c)return;let d=Cz(e.tree,o,i,a);return s?rD(e.tree,o,d,s??l,a):Sz(e.tree,t,a,l,u=>rD(e.tree,o,d,u,a)),Ct("overlay_create",{source:i?"duplicate":"events_panel",overlayType:vz(o)}),d}var nD=Ke("ScopeStore");function Ch(e){return ct(e,!0)||J(e,!0)||It(e,!0)}function wp(e){if(ct(e))return"CanvasPage";if(J(e))return"WebPage";if(le(e))return"SmartComponent";if(wi(e))return"ContentManagement";if(ze(e))return"LayoutTemplate";if(bo(e))return"VectorSet";if(pC(e))return"Analytics";if(uC(e))return"LocalizationGlossary";if(It(e))return"DesignPage";if(Gl(e))return"Routes";if(mC(e))return"CustomCode";throw Error(`Failed to return scope type, invalid scope: ${e.__class}`)}var Un,Jn,Xn,Zn,Ha,Bo,gi,Yi,Ga,$a,_a,aD=class extends Fr{constructor(o,r,i,n,a,l,s,c,d,u,f){super();this.treeStore=o;this.canvasStore=r;this.selection=i;this.chromeStore=n;this.contentManagementStore=a;this.modalStore=l;this.overlayStore=s;this.codeGenerationStore=c;this.insertSidebarStore=d;this.modulesStore=u;this.aiGenerationStore=f;ie(this,Un,0);k(this,"isCheckingActivePage",!0);ie(this,Jn,"");ie(this,Xn,"");ie(this,Zn,"");ie(this,Ha,"");ie(this,Bo,[]);ie(this,gi,!1);ie(this,Yi,!1);ie(this,Ga,new Map);ie(this,$a,new Map);k(this,"loadingActiveId");k(this,"_activeId");k(this,"scopeSwitchStart",0);k(this,"scopeSwitchPending",!1);k(this,"scopeIdToSelectedCollectionItem",new Map);k(this,"rootScopeType","CanvasPage");ie(this,_a,[]);k(this,"canGoBack",()=>F(this,gi));k(this,"goBack",()=>{let o=Array.from(this.isolatedCanvasNodes());o.pop();let r=o.pop();r&&this.select(r.id,{keepHistory:!1})});let y=this.getFirstPageNodeAccordingToUI();this._activeId=y.id,Ou(y),ct(y)?ee(this,Jn,y.id):J(y)?ee(this,Xn,y.id):It(y)&&ee(this,Zn,y.id);let v=this.getScopeNodes();ee(this,Un,v.indexOf(y)),C(y.loaded,"Scope must be fully loaded"),d.onScopeChange({scope:y.loaded,hasCanvasPageNodes:this.hasCanvasPageNodes(),hasWebPageNodes:this.hasWebPageNodes()}),this.modulesStore.setActiveScope(this._activeId)}get activeId(){return this._activeId}get active(){let o=this.getScopeNode(this._activeId);return C(o.isLoaded(),"Scope must be fully loaded"),o}get rootNode(){return this.treeStore.tree.root}get checkingActivePage(){return this.isCheckingActivePage}documentDidLoad(){this.isCheckingActivePage=!1}get scopeType(){return wp(this.active)}getScopeNode(o){let r=this.treeStore.tree.get(o);return C(r instanceof zu,"Node, ",o,"is not a ScopeNode"),r}getScopeNodes(){return this.rootNode.children.filter(Dr)}getCanvasPageNodes(){return this.rootNode.children.filter(ct)}getDesignPageNodes(){return this.rootNode.children.filter(It)}getKitPageNodes(){let o=[];for(let r of this.rootNode.children)J(r)&&r.kitPage&&o.push(r);return o}getSmartComponentNodes(){return this.rootNode.children.filter(le)}getLayoutTemplateNodes(){return this.rootNode.children.filter(ze)}getWebPageNodes(){return this.rootNode.children.filter(o=>J(o,!0)&&!o.kitPage)}getWebPageNodesWithoutCollection(){return this.rootNode.children.filter(o=>J(o,!0)&&!o.dataIdentifier&&!o.kitPage)}getWebPageNodesWithCollection(o=!1){let r=this.rootNode.children.filter(i=>!!(J(i)&&i.dataIdentifier));return o?YR(this.treeStore.tree,r):r}hasPages(){let o=!1,r=!1,i=!1,n=!1,a=!1;for(let l of this.rootNode.children)if(ct(l)&&(i=!0),It(l)&&(n=!0),J(l)&&(l.kitPage?a=!0:l.dataIdentifier?r=!0:o=!0),o&&r&&i&&n&&a)break;return{hasSitesPages:o,hasCMSPages:r,hasCanvasPages:i,hasDesignPages:n,hasKitPages:a}}hasCanvasPageNodes(){return this.rootNode.children.some(ct)}hasWebPageNodes(){return this.rootNode.children.some(J)}getRootScopeNodes(){return this.rootNode.children.filter(Ch)}getFirstPageNodeAccordingToUI(o=this.treeStore.tree){let{children:r,homePageNodeId:i}=o.root,n=qR(r,i);if(Iz(n)){let a=QR(r);if(a)return a}return n}getFirstWebPageNode(){try{let o=this.getFirstPageNodeAccordingToUI();if(J(o))return o}catch{}}changeActive(o,r,i){if(this._activeId){let s=o.get(this._activeId),c=J(s)&&s.abTestingParentId?s.abTestingParentId:this._activeId;F(this,Ga).set(c,{zoom:this.canvasStore.zoom,offset:this.canvasStore.offset}),F(this,$a).set(this._activeId,this.selection.ids),le(s)&&Ct("component_canvas_exit",{componentId:this._activeId})}if(ee(this,Ha,this._activeId),ee(this,Un,i),this._activeId=r.id,Ou(r),this.codeGenerationStore.changeScope(),this.modulesStore.changeScope(r),It(r))this.rootScopeType="DesignPage",ee(this,Zn,r.id),ee(this,Bo,[]),ee(this,gi,!1),ee(this,Yi,!1);else if(ct(r))this.rootScopeType="CanvasPage",ee(this,Jn,r.id),ee(this,Bo,[]),ee(this,gi,!1),ee(this,Yi,!1);else if(J(r))this.rootScopeType="WebPage",ee(this,Xn,r.id),ee(this,Bo,[]),ee(this,gi,!1),ee(this,Yi,Tt(r));else if(le(r)||ze(r)||bo(r)){let s=F(this,Bo).indexOf(r.id);s===-1?F(this,Bo).push(r.id):F(this,Bo).splice(s+1),ee(this,gi,F(this,Bo).length>0),ee(this,Yi,!1),kV({componentId:r.id}),le(r)&&this.chromeStore.mainView===0&&this.modalStore.displayComponentIsolationModal({source:"automatic"})}let n=F(this,Ga).get(J(r)&&r.abTestingParentId?r.abTestingParentId:r.id);n?this.canvasStore.updateCanvas(n.offset,n.zoom):this.canvasStore.zoomAfterScopeSwitch(o,r);let a=F(this,$a).get(r.id);a?this.selection.set(a):this.selection.clear(),this.overlayStore.hideAll(),this.insertSidebarStore.onScopeChange({scope:r,hasWebPageNodes:this.hasWebPageNodes(),hasCanvasPageNodes:this.hasCanvasPageNodes()}),this.treeStore.setHighlight(null);let l=wp(r);this.chromeStore.onChangeScopeType(l),this.contentManagementStore.onChangeScopeType(l),this.aiGenerationStore.setCurrentSessionId(l==="DesignPage"?r.id:void 0)}select(o,{keepHistory:r,activateContentPanel:i,collectionItemId:n}){this.loadingActiveId=o,this.scopeSwitchStart=performance.now();let a=()=>{if(this.scopeSwitchPending=!1,this.loadingActiveId!==o||this._activeId===o)return;let c=this.getScopeNodes().findIndex(y=>y.id===o);C(c!==-1,"Tree must contain scope node");let u=this.treeStore.tree.latestTree().getNode(o);C(Dr(u),"Tree must contain scope node",o);let f;if(u.isLoaded())f=u.loaded;else if(!this.treeStore.tree.getService("loader"))nD.reportError(new ReferenceError("Loader service is not available in the tree but scope is not loaded"),{message:"Scope must be fully loaded"},{shallowScopes:"true"}),f=u;else throw new TypeError("Scope must be fully loaded");r||ee(this,Bo,[]),R(n)&&J(u)&&this.setSelectedCollectionItemForWebPage(u.id,n),i&&(this.chromeStore.contentPanelTab=i),this.changeActive(this.treeStore.tree,f,c)},l=this.treeStore.tree.getService("loader");if(l&&!l.hasLoadedScope(o)){this.scopeSwitchPending=!0,l.prioritizeLoadingScope(o,()=>this.scheduler.processWhenReady(a));return}a()}selectByNode(o){let r=this.treeStore.tree.get(o);if(r===null)return;let i=this.treeStore.tree.getScopeNodeFor(r);i!==null&&this.select(i.id,{keepHistory:!1})}selectPreviousActiveScope(){let o=this.treeStore.tree.get(F(this,Ha));this.select(o?.id??this.getFirstPageNodeAccordingToUI().id,{keepHistory:!1})}findNextActiveScope(o=this.treeStore.tree){let r=o.root,i=r.children.filter(Dr);C(r.children.some(Ch),"validateActiveScope: Tree must contain at least one Canvas Page or Web Page");let n=i.findIndex(a=>a.id===this._activeId);return n===-1&&(n=this.findNextAvailablePageIndex(i,F(this,Un))),[i[n],n]}validateActiveScope(o=this.treeStore.tree,r=!1){let[i,n]=this.findNextActiveScope(o);C(i,"ScopeNode must be defined"),r||C(i.isLoaded(),"Scope must be fully parsed"),ee(this,Un,n);let a=i;return i.id!==this._activeId&&(this.scopeSwitchStart=performance.now(),this.scopeSwitchPending=!1,this.changeActive(o,a,n)),a}findNextAvailablePageIndex(o,r){let i=[],n=[];for(let c=0;c<o.length;c++){let d=o[c];J(d)?n.push(c):ct(d)&&i.push(c)}let a=this.rootScopeType==="WebPage",l=a?n:i,s=a?i:n;return bz(l.length>0?l:s,r)}renameScope(o,r){this.getScopeNode(o).set({name:r})}getActiveScopeNodeForReset(o=this.treeStore.tree,r=null){if(r){let n=o.getScopeNodeFor(o.get(r));if(eD(n)&&n?.isValid())return n}let i=this.getFirstPageNodeAccordingToUI(o);if(J(i)&&i.isValid()&&i.loaded||(ct(i)||It(i))&&i.loaded)return i.loaded;nD.warn("getActiveScopeNodeForReset: falling back to scanning for a useful scope to make active");for(let n of o.root.children)if(ct(n)&&n.isValid()&&n.loaded||J(n)&&n.isValid()&&n.loaded)return n.loaded;for(let n of o.root.children)if(le(n)&&n.isValid()&&n.loaded)return n.loaded;throw Error("Document does not have any scopes that can be set to active.")}resetActiveScope(o=this.treeStore.tree,r=void 0){let i=this.getActiveScopeNodeForReset(o,r);if(i.id===this._activeId)return;this._activeId="",ee(this,Jn,""),ee(this,Zn,""),ee(this,Xn,""),ee(this,Ha,""),F(this,Ga).clear(),F(this,$a).clear(),C(i.isLoaded(),"Scope must be fully parsed");let n=o.root.children.indexOf(i);this.scopeSwitchStart=performance.now(),this.scopeSwitchPending=!1,this.changeActive(o,i,n)}movePage(o,r){let i=this.getScopeNode(o),n=this.getAllPageNodesOfScope(i),a=n[r];C(a,`Trying to move a page node to an invalid index: ${r}, total: ${n.length} page nodes.`);let l=this.rootNode.children.findIndex(s=>s.id===a.id);C(i.parentid,"Scope node has no parentid"),C(l!==-1,"Cant find scope in root node"),this.treeStore.tree.moveNode(i,i.parentid,l)}getAllPageNodesOfScope(o){return It(o)?this.getDesignPageNodes():ct(o)?this.getCanvasPageNodes():J(o)&&o.kitPage?this.getKitPageNodes():(C(!o,"Scope is not movable"),oa())}getParentId(o,r){let i=this.rootNode.id;if(o instanceof zu||Vi(o))return i;let n=this.active,a=n.id;return wi(n)&&C(Zl(o),"ContentManagementNode only accepts content nodes"),r===i?a:r??a}insertNode(o,r,i,n){r=this.getParentId(o,r),ot(o)&&iD({codeGenerationStore:this.codeGenerationStore,treeStore:this.treeStore},Ye(o)?"framer/useShowRelativeOverlay":"framer/useShowOverlay",r,o),this.treeStore.tree.insertNode(o,r,i,n)}insertNodes(o){for(let r of o)this.insertNode(r,r.parentid)}moveNode(o,r,i,n){r=this.getParentId(o,r),this.treeStore.tree.moveNode(o,r,i,n)}removeNode(o){this.treeStore.tree.removeNode(o),o.id===this._activeId&&this.validateActiveScope(this.treeStore.tree,!0)}setSelectedCollectionItemForWebPage(o,r){if(this.scopeIdToSelectedCollectionItem.get(o)===r)return;let n=new Map(this.scopeIdToSelectedCollectionItem);n.set(o,r),this.scopeIdToSelectedCollectionItem=n}getSelectedCollectionItemForScope(o){if(J(o))return this.scopeIdToSelectedCollectionItem.get(o.id)}getMostRecentPage(){switch(this.rootScopeType){case"CanvasPage":{let o=this.treeStore.tree.get(F(this,Jn));if(ct(o))return o;break}case"DesignPage":{let o=this.treeStore.tree.get(F(this,Zn));if(It(o))return o;break}case"WebPage":{let o=this.treeStore.tree.get(F(this,Xn));if(o&&Dr(o)&&J(o))return o;break}}return this.getFirstPageNodeAccordingToUI()}getComponentHistory(){if(F(this,Bo).length===0)return[];let o=this.active;if(!(le(o)||ze(o)||bo(o)))return[];let r=[],i;for(let n of F(this,Bo)){let a=this.treeStore.tree.getNode(n);(le(a)||ze(a)||bo(a))&&a.isLoaded()&&(r.push(a),i=a)}return i===o?r:[o]}get onIsolatedCanvas(){return F(this,gi)}get onCollectionPage(){return F(this,Yi)}isolatedCanvasNodes(){let o=this.active,r;return Ch(o)?r=[o]:r=[this.getMostRecentPage(),...this.getComponentHistory()],sn(F(this,_a),r)?F(this,_a):(ee(this,_a,r),r)}getTopMostWebPageNode(){for(let o of this.isolatedCanvasNodes())if(J(o))return o}};Un=new WeakMap,Jn=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,Ha=new WeakMap,Bo=new WeakMap,gi=new WeakMap,Yi=new WeakMap,Ga=new WeakMap,$a=new WeakMap,_a=new WeakMap;function bz(e,t){for(let o of e)if(!(o<t))return o;return Math.max(...e)}function Iz(e){if(!J(e)||!e.isLoaded())return!1;for(let t of e.children)if(!Pe(t)||t.children.length>0)return!1;return!0}function sD(e){return Eo(e)&&e.layout==="stack"&&e.stackDirection==="vertical"}function lD(e){return sD(e.getPrimaryVariant())&&e.getReplicaVariants().every(sD)}function Nz(e,t,o){if(!Array.from(t).some(a=>{let l=o.get(a);return bt(l)}))return;let i=o.get(e.parentid),n=e;for(;i;){if(t.has(i.getPrimaryId())){let a=o.get(i.getPrimaryId()),l=Gv(o,a),s=n.getPrimaryId();if(bt(a)&&s===l?.id)return a}n=i,i=o.get(i.parentid)}}function xz(e){return e}function Vz(e){let t=new Set;return _b(e,o=>{o.providerId&&t.add(o.providerId)}),t}var cD=(e,t,o,r)=>(i,n,a,l=xz,s=void 0)=>{if(j(i))return l(o.create(i));if($t(i)){let c=l(r.createComputedValue(i,n,s));return Dy(i)?c:t.component.dedupe(a,c,Nz(n,Vz(i),e.tree))}_(i)};function Pz(e){if(ct(e))return"screen";if(bo(e))return"vector";if(It(e))return"design";let{type:t}=ce(e.instanceIdentifier);return t}function dD(e,t,{treeStore:o,modulesStore:r,engineChanges:i,assetMap:n},a=new Set,l=`framer-${yd(5)}`,s=!1){let c=Pz(t),d=new Er(...a),u=new ai(c,r,d);u.addImport("react",{exportSpecifier:"*",importBinding:"React"});let f=new fp(t.id,ct(t)?e.id:t.id,c),y=wp(t);to(y!=="ContentManagement"&&y!=="Analytics"&&y!=="LocalizationGlossary"&&y!=="Routes"&&y!=="CustomCode","Content management, Analytics, Localization glossary, Routes & Custom Code nodes cannot be code-generated");let v=new xT(d),b=new bn(t,d),x=new zn(n),D=new zi(t,u,d,b,o,r,()=>{let Rt=u.addImport("framer",{exportSpecifier:"useRouter"});return v.component.dedupe("router",V.fn(Rt))}),B=new jn(t,o,b,v.file,d,u,x),H=new Bn(d,b,B,x,D),A=new Ip(t,b,o,u,v,H,r,c),Z=new Br(v.file,v.component,u,b,A,D,H,r,c),re=new mp(t,d,v,u,b,o),Ie=new xp,se=new up(v.component,t,e.id),ke=cD(o,v,b,Z),ne=new NT(t,b,o,Z,ke),lt=new Gd(t,e,l,ne),pt=new Set,U=new zd(e,b,o,d,u,{type:c}),it=new yp(v.font),ao=new Np(yv()),so=new Set,Ci={dependencies:so,addDependency:Rt=>so.add(Rt)},tr=hn(t)&&!s?t.getReplicaVariants():[],Hr={};if(le(t))for(let Rt of tr)!sr(Rt)||Pa(Rt.gesture)||(Hr[Rt.replicaInfo.inheritsFrom??Rt.replicaInfo.master]=!0);let Qe=new pp(o.tree,d),he=new zv(t,it,u,v.file,b,r,o),Xt=new Cp(r,o.tree),Gr=new Sp(t),or=new Vp(u,o,r,ke),Si=new dp(o,b,Z),So=ze(t)?te.children:void 0;return{type:"jsxContext",treeStore:o,modulesStore:r,engineChanges:i,assetMap:n,simulatedDOM:Si,variants:tr,topLevelVariantsWithGestures:Hr,imports:u,errors:f,variables:b,fetches:H,assets:x,valueTransforms:Z,elementIds:re,css:lt,renderFunctions:se,events:U,links:D,fonts:it,metrics:ao,packages:Ci,appearIds:Qe,bindings:d,declarations:v,preload:B,localizedValues:A,componentPresetIds:pt,renderAsListNodes:new Map,repeaterInfo:new Map,renderConditions:new Map,nodesWithAnyGradientFill:new Map,customCursors:he,cssVariableDefinitions:ne,formIds:new Set,hitTargets:Gr,createDeduplicatedDynamicValueBinding:ke,trackingIds:Ie,vectorSets:or,kitSectionsStructure:Xt,overlayProps:new Map,llmSnapshot:s,scopeId:t.id,scopeType:y,moduleType:c,rootId:e.id,linkClassName:lt.addRule({display:"block"},t),layoutTemplateSlotBinding:So,nodeRendersWithMotion:new Pp,serializationId:l,acceptsLayoutTemplate:J(t)&&t.isLoaded()&&t.baseVariantId?lD(t):void 0}}function pD({ctx:e,ancestorInfo:t,jsxAttributes:o,usedVariableIds:r,dataRepeater:i,primaryVariantControlMap:n,shouldInlineQuery:a,variantId:l}){let s=[],c=o.subqueries,d=t.subqueries,u=YI(i,n,r,b=>{if(a){let x=d;for(;x;){if(b.providerId===x.repeaterNode.id){let D=Xc(x.repeaterNode),[B,H]=qI(b.id,D);return{type:"Identifier",name:H,collection:B}}x=x.parent}}return C(e.variables,"VariableCollector is required"),s.push(b),{type:"LiteralValue",value:e.variables.create(b)}},b=>{let x=e.imports.addModuleImport(b);return C(x,"Can't import collection"),x});C(c,"Subqueries must exist");let f=c.getSubqueries(l);for(let[b,x]of f)u.select.push({type:"FunctionCall",functionName:"ARRAY",alias:b,arguments:[{type:"Select",...x}]});let y=c.getVariableDependencies(l);s.push(...y);let v=u;return a?(C(d,"Parent subqueries must exist"),d.addSubquery(l,i.getPrimaryId(),u),d.addVariableDependencies(l,s)):e.preload.addQuery(i,v,s),new Y({query:v,pageSize:i.collectionPaginationPageSize})}function wz(e,t){return E(e.subqueries)||t.isAnyVariantPaginated?!1:e.inRepeatedItem??!1}function uD(e,t,o,r,i){let n=r.inheritedControlMap?.get(e.id);C(n,"Primary variant control map must be defined.");let a=wz(o,r),l=pD({ctx:t,ancestorInfo:o,jsxAttributes:r,usedVariableIds:i,dataRepeater:e,primaryVariantControlMap:n,shouldInlineQuery:a,variantId:"primary"}),s={};for(let c of t.variants){let d=An(c,e.id,t.treeStore.tree)??e;C(bt(d),"Node must be a data repeater");let u=pD({ctx:t,ancestorInfo:o,jsxAttributes:r,usedVariableIds:i,dataRepeater:d,primaryVariantControlMap:n,shouldInlineQuery:a,variantId:c.id});Sr(l,u)||(s[c.id]=u)}return a?null:{props:l,overrides:Gt(s)?void 0:s}}function kz(e,t){let o=t.imports.addImport("framer",{exportSpecifier:"useQueryData"});if(dr(e)){let r=t.imports.addImport("framer",{exportSpecifier:"useLoadMorePaginatedQuery"}),i=m`paginatedQuery`;return m.joinLines(m`const { ${i}, paginationInfo, loadMore } = ${r}(query, pageSize, ${e.id})`,m`const data = ${V.fn(o,i)}`,m`return children(data, paginationInfo, loadMore)`)}return m.joinLines(m`const data = ${V.fn(o,m`query`)}`,m`return children(data)`)}function mD(e,t){return m`({ query, pageSize, children }) => {
        ${kz(e,t)}
    }`}function fD({renderAsListNodes:e},t){return t.parentid?e.has(t.parentid):!1}function hD(e,t,{isAnyVariantALink:o},r){let i=r?"motion.":"";return Wi(t)&&(Jt(t)||o)?`${i}a`:fD(e,t)?`${i}li`:Bi(t)&&t.htmlTag&&Va(e.scopeType)?`${i}${t.htmlTag}`:`${i}${Ac}`}function gD(e,t,{isAnyVariantAnEffect:o,isAnyVariantOptimizedAppearEffect:r},i){let n=[];o&&n.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),r&&n.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}));let a=t.treeStore.tree.get(i.lastRepeaterId);return Ir(a)&&dr(a)&&li(e,a)&&n.push(t.imports.addImport("framer",{exportSpecifier:"withInfiniteScroll"})),t.scopeType==="SmartComponent"?t.imports.addImport("framer",{exportSpecifier:"SmartComponentScopedContainer",composeWithImports:n}):t.imports.addImport("framer",{exportSpecifier:"Container",composeWithImports:n})}function Rz(e,t){if(!cv(t.treeStore.tree,e)||!!!M.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerImmutableVariables)return;let r=ce(e.codeComponentIdentifier);if(!Ge(r))return;let{importSpecifier:i,importBinding:n}=si(r,t.moduleType,t.modulesStore);if(!i)return;let a=t.imports.addImport(i,{exportSpecifier:"*",importBinding:`${n}Info`});return[t.imports.addImport("framer",{exportSpecifier:"withMappedReactProps"}),a]}function Dz(e,t,o,r){let i=[];Pe(e)&&t.scopeType==="CanvasPage"&&i.push(t.imports.addImport("framer",{exportSpecifier:"withGeneratedLayoutId"})),r.isAnyVariantColumnMasonryLayout&&i.push(t.imports.addImport("framer",{exportSpecifier:"withColumnMasonryLayout"}));let n=Lz(e,t,o);n&&i.push(n);let a=jd(e,t);if(i.push(...a),n||a.length>0){let l=Rz(e,t);l&&i.push(l)}return r.isAnyVariantAVariantAppearEffect&&i.push(t.imports.addImport("framer",{exportSpecifier:"withVariantAppearEffect"})),$(e)&&!e.isVectorInstance||(r.isAnyVariantATickerEffect&&i.unshift(t.imports.addImport("framer",{exportSpecifier:"withTickerFX"})),r.isAnyVariantAnEffect&&i.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),r.isAnyVariantOptimizedAppearEffect&&i.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}))),i}function Lz(e,t,o){let r=_d(e,t);if(!r)return;let{importSpecifier:i,exportSpecifier:n}=r,a={scopeId:t.scopeId,nodeId:e.getPrimaryId(),override:t.imports.addImport(i,{exportSpecifier:n}),inComponentSlot:o.inComponentSlot?!0:void 0};return[t.imports.addImport("framer",{exportSpecifier:"withCodeBoundaryForOverrides"}),a]}function Fz(e,t){if(e.kind!=="localModuleExport")return;let{localId:o}=e,i=t.modulesStore.getPersistedModuleByLocalId(o)?.metadata.packageDependencies;Array.isArray(i)&&i.forEach(n=>{R(n)&&t.packages.addDependency(n)})}function yD(e,t){let o=Uc(e,M);if(!o)return;let r=_r("prototype",o);return t.imports.addImport(`../${r}`,{exportSpecifier:"default",importBinding:"Prototype"})}function Ez(e){switch(e){case"BooleanShapeNode":case"CodeComponentNode":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FrameNode":case"OvalShapeNode":case"OverlayNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"RichTextNode":case"ShapeContainerNode":case"ShapeGroupNode":case"StarShapeNode":case"SVGNode":case"TextNode":{let t=e;return!0}case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BlockquoteStylePresetNode":case"BoxShadow":case"CanvasNode":case"CanvasPageNode":case"CanvasScopeNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeFileEntityTypeRootNode":case"CollectionReferenceVariableEditTool":case"CollectionItemNode":case"CollectionNode":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ComponentPresetNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"CustomCodeScopeNode":case"CustomCodeNode":case"DateVariableEditTool":case"DesignPageNode":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"EnumVariableEditTool":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HeaderRouteNode":case"HighlightStackItemTool":case"HighlightTool":case"ImageStylePresetNode":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"InlineCodeStylePresetNode":case"LayoutTemplateEntityTypeRootNode":case"LayoutTemplateNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkStylePresetNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"MoveTool":case"MutableNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PresetsListNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextVariableEditTool":case"RootNode":case"RotateTool":case"RouteNode":case"RouteLocaleNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"SmartComponentNode":case"StringVariableEditTool":case"StyledTextDraft":case"TableStylePresetNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextStylePresetNode":case"VectorSetEntityTypeRootNode":case"VectorSetNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"WebPageNode":case"ZoomSelectTool":case"ZoomTool":{let t=e;return!1}default:_(e)}}function CD(e,t,o,r){if(!Ez(e.__class))throw Error(`jsxTagNameForNode: ${e.__class} does not support serialization to JSX.`);let i=Dz(e,t,o,r);switch(e.__class){case"SVGNode":case"ShapeContainerNode":case"BooleanShapeNode":case"OvalShapeNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"ShapeGroupNode":case"StarShapeNode":return t.imports.addImport("framer",{exportSpecifier:"SVG",composeWithImports:i});case"TextNode":return t.imports.addImport("framer",{exportSpecifier:"Text",composeWithImports:i});case"RichTextNode":return t.imports.addImport("framer",{exportSpecifier:"RichText",composeWithImports:i});case"FrameNode":{if(Vo(e))return t.imports.addImport("framer",{exportSpecifier:"FormContainer",composeWithImports:i});if(Ut(e)||r.isAnyVariantAnImage)return t.imports.addImport("framer",{exportSpecifier:"Image",composeWithImports:i});let n=t.nodeRendersWithMotion.get(e);C(!E(n),"Node must have had `rendersWithMotion` computed for it.");let a=hD(t,e,r,n);return n?t.imports.addImport("framer-motion",{exportSpecifier:a,composeWithImports:i}):new V(a)}case"CodeComponentNode":{if(C(Io(e),"Nodes with a ClassDiscriminator of CodeComponentNode must be a Code Component"),ew(e))return t.imports.addImport("framer",{exportSpecifier:tw(e)});if(Di(e)||r.identifiers&&r.identifiers.size>1)return t.imports.addImport("framer",{exportSpecifier:"Instance",composeWithImports:i});let n=ce(e.codeComponentIdentifier);if(!Ge(n)){let d=Qg(e.codeComponentIdentifier);return C(d,"A package must have module information to be included in code-generation."),t.packages.addDependency(d.packageName),t.imports.addImport(d.moduleURL,{exportSpecifier:d.exportIdentifier,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"withMeasuredSize"})]})}C(Ge(n),"A code component that is not a package must be a module.");let a=t.llmSnapshot&&$(e)&&e.isVectorInstance?"Icon":void 0,{importSpecifier:l,exportSpecifier:s,importBinding:c}=si(n,t.moduleType,t.modulesStore,void 0,a);return C(l,"A module must have an import specifier."),Fz(n,t),t.fonts.addFontReference({componentIdentifier:e.codeComponentIdentifier,fontReference:t.imports.addImport(l,{exportSpecifier:s,importBinding:c,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"getFonts"})]})}),t.imports.addImport(l,{exportSpecifier:s,importBinding:c,composeWithImports:i})}case"OverlayNode":return t.imports.addImport("framer",{exportSpecifier:"ResetOuterLinkContext"});case"FormBooleanInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormBooleanInput",composeWithImports:i});case"FormPlainTextInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormPlainTextInput",composeWithImports:i});case"FormSelectNode":return t.imports.addImport("framer",{exportSpecifier:"FormSelect",composeWithImports:i});default:_(e.__class)}}function SD(e,t){if(Tt(t)){let o=e.dataForIdentifier(t.dataIdentifier);return C(o,"A Data Repeater must have an evaluated data entity in the sandbox."),{id:t.id,annotations:o.annotations}}if(Rs(t))return{id:t.id,annotations:void 0};_(t,"A data repeater must have either an identifier or array variable")}function Az(e,t){let o=[];for(let[r,i]of e){if(xu(r))continue;let n=t?.get(r);if(!n)continue;let a=Vr(n.type);Wt(a)&&o.push(m`${i} ??= ${a}`)}return o}function Mz(e,t,o,r){if(Tt(e)){let i=o?.framerRecordIdKey;return i?t.variables.create(Mt(i,e.id)):r}return t.bindings.create("id")}function Oz(e,t){if(Tt(e))return t.bindings.createWithNode("collection",e);if(Rs(e))return t.variables.create(e.dataRepeaterArray);_(e,"parent should be a collection or array repeater")}function zz(e,t,o,r,i){let n={};for(let[a,l]of o)xu(a)||(n[a]=l);if(Tt(e)){C(r,"Subqueries must exist");for(let a of r.childRepeaterIds){let l=i.treeStore.tree.get(a);C(l,"Repeater node must exist");let s=i.bindings.createWithNode("collection",l);n[a]=s}}else n[ci]=t;return n}function vD(e,t,o,r,i){let n=Mz(e,r,t,i),a=Oz(e,r),l=r.variables.getBindings(e.id),s=zz(e,n,l,o.subqueries,r),c=o.inheritedControlMap?.get(e.id),d=Bl(e);return{args:m`${s}, ${i}`,variableFallbackList:Az(l,c),data:a,key:d?m`${n} ?? ${i}`:n}}var Wz=Ke("jsxForNode");async function Bz(e,t,o,r){let i=DI(t.treeStore.tree,e,M);for(let n in i){if(n==="children")continue;let a=[],l=i[n];if(l){for(let s=0;s<l.length;s++){let c=l[s];if(!c)continue;let d=await Rp(c.node,e,t,{...r,inComponentSlot:!0});d&&d.length>0&&a.push(d)}o.props[n]=a}}}function Hz(e,t,o){if(We(e))return ue(er(t.imports.addImport("framer-motion",{exportSpecifier:"motion.div"}),t,o));if($(e)&&e.codeComponentIdentifier==="framer/Prototype"){let r=yD(e,t);if(r)return ue(tt.tag(r,void 0))}return""}function Gz(e,t,o){if(bt(t)){let r=SD(M,t);return o.repeaterInfo.set(t.id,r),t.id}return e.lastRepeaterId}function $z(e,t,o){return bt(t)?!1:!!(Ca(o.treeStore.tree,t)||e.inRepeatedItem)}function _z(e,t,o,{itemsOrderOverrides:r,hiddenInVariants:i,inheritedControlMap:n,inCodeOverride:a,subqueries:l,kitSectionId:s}){return{...e,lastRepeaterId:Gz(e,t,o),inRepeatedItem:$z(e,t,o),subqueries:l,itemsOrderOverrides:r,hiddenInVariants:i,inheritedControlMap:n,inCodeOverride:a,kitSectionId:e.kitSectionId??s,inComponentSlot:e.inComponentSlot||$(t)&&t.codeComponentIdentifier!=="framer/Prototype"}}function jz(e,t,o,r,i){let n=[],l=r.treeStore.tree.getPresetsListNode()?.getComponentPresets();if(De(e)&&j(e.htmlContent)&&l&&l.length>0){let f=r.imports.addImport(`../${rw}`,{exportSpecifier:"*",importBinding:"componentPresets"}),y={},v=e.getComponentPresets();for(let[b,x]of v)r.componentPresetIds.add(x),y[b]=m`${f}.props[${x}]`;n.push(b=>tt.tag(r.imports.addImport("framer",{exportSpecifier:"ComponentPresetsProvider"}),new Y({presets:y}),b))}$(e)&&Yo(e)&&n.push(f=>er(gD(e,r,o,i),r,o.propsForContainer,f)),$(e)&&!e.isVectorInstance&&n.push(f=>er(r.imports.addImport("framer",{exportSpecifier:"ComponentViewportProvider"}),r,o.propsForComponentViewport,f));let s=r.links.getUnresolvedLinksForNode(e);if(s){let{unresolvedLinks:f,binding:y}=s;if(Wt(f)||my(f)){let v=r.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),b=new Y({links:f});n.push(x=>er(v,r,{props:b},m`(${y}) => (${x})`))}}if(o.isAnyVariantALink&&n.push(f=>er(r.imports.addImport("framer",{exportSpecifier:"Link"}),r,o.propsForLink,f)),bt(e)&&(Li(e)||Pi(e))&&bD(e,r,i,o,n),o.isAnyVariantATransitionOverride){let f=r.imports.addImport("framer-motion",{exportSpecifier:"MotionConfigContext"}),y=r.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),v=r.declarations.file.dedupe("Transition",new V(at.lines(m`({value, children}) => {`,m`const config = ${y}.useContext(${f})`,m`const transition = value ?? config.transition`,m`const contextValue = ${y}.useMemo(() => ({ ...config, transition }), [JSON.stringify(transition)])`,m`return <${f}.Provider value={contextValue}>{children}</${f}.Provider>`,m`}`)));n.push(b=>er(v,r,o.propsForTransition,b))}let c=r.events.overlayTriggerOverlayBindings.get(e.id);if(c&&c.size>0){n.push(D=>tt`<>${D}</>`);let f=m`visible`,y=m`setVisible`,v={visible:m`enabled && ${f}`,[Wd.show]:m`() => ${V.fn(y,m`true`)}`,[Wd.hide]:m`() => ${V.fn(y,m`false`)}`,[Wd.toggle]:m`() => ${V.fn(y,m`!${f}`)}`},b=r.imports.addImport("framer",{exportSpecifier:"useOverlayState"}),x=r.declarations.file.dedupe("Overlay",new V(at.lines(m`({ children, blockDocumentScrolling, dismissWithEsc, enabled = true }) => {`,m`const ${[f,y]} = ${V.fn(b,m`{ blockDocumentScrolling, dismissWithEsc: enabled && dismissWithEsc }`)}`,m`return children(${v})`,m`}`)));for(let[D,B]of c){let H=r.treeStore.tree.get(D);if(!H)continue;let A=r.overlayProps.get(D),Z=r.renderConditions.get(D),re=We(H),Ie=new Y({enabled:No(Z)?Z:void 0,blockDocumentScrolling:re?A?.props?.blockDocumentScrolling:!1,dismissWithEsc:re?A?.props?.dismissWithEsc:!1});n.push(se=>er(x,r,{props:Ie,overrides:re?A?.overrides:void 0},m`${B} => (${se})`))}}let d=r.events.overlayState.get(e.id);if(d&&We(e)){let f=t?r.elementIds.id(t):m`undefined`;n.push(D=>tt.tag(r.imports.addImport("framer",{exportSpecifier:"InjectSelectionStyle"}),new Y({triggerId:f}),D));let y=r.imports.addImport("react-dom",{exportSpecifier:"*",importBinding:"ReactDOM"}),v=`#${yC}`,b=`#${gC}`,x=r.declarations.file.dedupe("getContainer",m`() => {${m.joinLines(m`return document.querySelector(${v}) ?? document.querySelector(${b}) ?? document.body`)}}`);n.push(D=>tt`<>{${y}.createPortal(${D}, ${V.fn(x)})}</>`)}t&&d&&Ye(e)&&o.isAnyVariantFloating&&n.push(f=>er(r.imports.addImport("framer",{exportSpecifier:"Floating"}),r,o.propsForFloating,f)),d&&ot(e)&&n.push(f=>tt.tag(r.imports.addImport("framer-motion",{exportSpecifier:"AnimatePresence"}),void 0,m`${d}.visible && (${f})`)),o.renderCondition!==!0&&n.push(f=>m`${o.renderCondition} && (${f})`);let u=r.fetches.getResultBinding(e);if(o.propsForFetcher&&u&&n.push(f=>er(r.imports.addImport("framer",{exportSpecifier:"Fetcher"}),r,o.propsForFetcher,m`${u} => (${f})`)),Xl(e)&&o.propsForTickerItem&&n.push(f=>er(r.imports.addImport("framer",{exportSpecifier:"TickerItem"}),r,o.propsForTickerItem,f)),bt(t)&&Ca(r.treeStore.tree,e)){let f=r.repeaterInfo.get(t.id);if(C(f,"jsxForNode: `repeaterInfo` must exist when transforming the child of a repeater."),Tt(t)){let H=r.links.getPathVariablesForRepeaterInfo(f);H&&n.push(A=>tt.tag(r.imports.addImport("framer",{exportSpecifier:"PathVariablesContext.Provider"}),new Y({value:H}),A))}let y=r.bindings.createWithNode("index",t),{data:v,args:b,variableFallbackList:x,key:D}=vD(t,f.annotations,o,r,y),B=r.variables.getBinding(t.id,WC);n.push(H=>m`${v}?.map((${b}) => {${m.joinLines(...x,B&&m`const ${B} = ${y} + 1`,...r.declarations.component.list(t),m`return (${tt.tag(r.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),new Y({key:D,id:Je`${t.id}-${D}`}),H)})`)}})`)}return n}function Uz(e,t,o){let i=Yo(e)?t.propsForContainer:t.propsForElement,n=o.events.overlayTriggerOverlayBindings.get(e.id);if(n&&n.size>0){let s=i.props;s||(s=new Y),s.id=s.id??o.elementIds.id(e)}let l=o.cssVariableDefinitions.getDefinitionsForNode(e)??{};if(!Gt(l)){let s=i.props;s||(s=new Y),s.style?Object.assign(s.style,l):s.style=l}}async function Rp(e,t,o,r){try{if(Nr(e)){C(t&&o.layoutTemplateSlotBinding,"A SlotNode must be in a Layout Template and have a parent.");let s=vk(e,t,o);return tt`${m.joinLines(tt.children(o.layoutTemplateSlotBinding),tt.tag(m`div`,new Y({className:s})))}`}await Zz(e,o),o.metrics.count("nodes");let i=Sk(e,t,o,r);if(We(e)&&o.overlayProps.set(e.id,i?.propsForOverlay),!i)return tt``;$(e)&&await Bz(e,o,i.propsForElement,r);let n=Hz(e,o,i.propsForElement),a=_z(r,e,o,i);for(let s of Kz(e,o)){if(ot(s)&&!o.events.overlayState.has(s.id))continue;let c=await Rp(s,e,o,a);c&&(n+=ue(tt.children(c)))}Uz(e,i,o);let l=await qz(e,o,r,a,i,tt.fromTrustedString(n));return tt.applyTransforms(l,jz(e,t,i,o,r))}catch(i){return Wz.reportError(i,{node:e.id,primaryVariant:o.rootId}),o.errors.record(e,i),tt``}}async function TD(e,t,o,r,i=`framer-${yd(5)}`,n=!1){let{combinedVariableControlMap:a}=t.combineVariableControlMap(o.treeStore.tree,void 0,M,M.activeBundleHash),l={inheritedControlMap:a},s=dD(e,t,o,r,i,n);return{ctx:s,jsx:await Rp(e,null,s,l)}}async function kp(e,t,{modulesStore:o,errors:r,treeStore:i,rootId:n}){let a=i.tree.get(n),l=i.tree.getScopeNodeFor(a);if(zS(i.tree,l,e))return;for(let c of t)if(Ho(c)&&c.type==="codeFile"){let u=M.componentForIdentifier(c.value),f=M.errorForIdentifier(c.value);u?f&&r.record(e,"CodeError",c.value):r.record(e,"MissingModule",c.value);return}let s=Jz(t);s.length>0&&await o.preloadExternalModules(s),await Hd(M,t.map(c=>c.value),o)}function Jz(e){let t=[];for(let o of e)Ii(o)&&t.push(o);return t}function Xz(e,t){if(!Ge(e.codeComponentIdentifier))return;let o=new Set([e.codeComponentIdentifier]);for(let r of t.variants){let i=An(r,e.id,t.treeStore.tree);i&&(C($(i),"Expected a CodeComponentNode in the variant",i?.id),Ge(i.codeComponentIdentifier)&&o.add(i.codeComponentIdentifier))}return o}async function Zz(e,t){if($(e)){if(e.codeComponentIdentifier==="framer/Prototype"){let i=Uc(e,M);if(!i)return;await kp(e,[an("prototype",i,"default")],t)}let o=Xz(e,t);if(!o)return;let r=[];for(let i of o)r.push(ce(i));await kp(e,r,t)}if(LS(e)){if(!Ge(e.codeOverrideIdentifier))return;await kp(e,[ce(e.codeOverrideIdentifier)],t)}Tt(e)&&await kp(e,[ce(e.dataIdentifier)],t)}function Kz(e,t){return!yt(e)||Ee(e)||De(e)?oa():$(e)&&e.codeComponentIdentifier!=="framer/Prototype"?LI(t.treeStore.tree,e,M).map(o=>o.node):e.children}function bD(e,t,o,r,i){if(!Bl(e)){if(Tt(e)){let n=t.variables.getBindings(e.id),a=new Set(n.keys()),l=uD(e,t,o,r,a);if(l){let s=t.declarations.file.dedupe("QueryData",mD(e,t)),c=t.bindings.createWithNode("collection",e),d=t.bindings.createWithNode("paginationInfo",e),u=t.bindings.createWithNode("loadMore",e);i.push(f=>tt.tag(t.imports.addImport("framer",{exportSpecifier:"ChildrenCanSuspend"}),void 0,er(s,t,l,m`(${c}, ${d}, ${u}) => (<>${f}</>)`)))}return}_(e,"All data repeater types should be handled")}}function Yz(e,t,o,r){let i=[];return Vo(e)&&i.push(n=>m`(${Zf}) => (<>${n}</>)`),bt(e)&&!Li(e)&&!Pi(e)&&bD(e,t,o,r,i),i}async function qz(e,t,o,r,i,n){let a=er(CD(e,t,o,i),t,We(e)?void 0:i.propsForElement,tt.applyTransforms(n,Yz(e,t,o,i)));if(($(e)||De(e))&&ev(e,"framer/useShowRelativeOverlay")){let l=ue(a);for(let s of e.children){if(!ot(s)||!t.events.overlayState.has(s.id))continue;let c=await Rp(s,e,t,r);c&&(l+=ue(tt.children(c)))}return tt.fromTrustedString(l)}return a}function er(e,t,o,r){if(!o)return tt.tag(e,void 0,r);let{props:i=new Y,overrides:n}=o,a=[];if(n)switch(t.scopeType){case"SmartComponent":Y.addSpreadAtEnd(i,V.fn(m`addPropertyOverrides`,n,m`baseVariant`,m`gestureVariant`));break;case"WebPage":case"LayoutTemplate":a.push(l=>tt.tag(t.imports.addImport("framer",{exportSpecifier:"PropertyOverrides"}),new Y({breakpoint:m`baseVariant`,overrides:n}),l));break;default:break}return tt.applyTransforms(tt.tag(e,i,r),a)}var Kn={};ou(Kn,{$brand:()=>Rm,$input:()=>Fx,$output:()=>Lx,NEVER:()=>QI,TimePrecision:()=>Ox,ZodAny:()=>DD,ZodArray:()=>AD,ZodBase64:()=>Kh,ZodBase64URL:()=>Yh,ZodBigInt:()=>fl,ZodBigIntFormat:()=>eg,ZodBoolean:()=>ml,ZodCIDRv4:()=>Xh,ZodCIDRv6:()=>Zh,ZodCUID:()=>Hh,ZodCUID2:()=>Gh,ZodCatch:()=>eL,ZodCodec:()=>dg,ZodCustom:()=>_p,ZodCustomStringFormat:()=>pl,ZodDate:()=>Hp,ZodDefault:()=>XD,ZodDiscriminatedUnion:()=>MD,ZodE164:()=>qh,ZodEmail:()=>zh,ZodEmoji:()=>Wh,ZodEnum:()=>cl,ZodError:()=>eW,ZodFile:()=>jD,ZodFirstPartyTypeKind:()=>pg,ZodFunction:()=>cL,ZodGUID:()=>Mp,ZodIPv4:()=>Uh,ZodIPv6:()=>Jh,ZodISODate:()=>Lp,ZodISODateTime:()=>Dp,ZodISODuration:()=>Ep,ZodISOTime:()=>Fp,ZodIntersection:()=>OD,ZodIssueCode:()=>pB,ZodJWT:()=>Qh,ZodKSUID:()=>jh,ZodLazy:()=>aL,ZodLiteral:()=>_D,ZodMap:()=>GD,ZodNaN:()=>oL,ZodNanoID:()=>Bh,ZodNever:()=>FD,ZodNonOptional:()=>lg,ZodNull:()=>kD,ZodNullable:()=>JD,ZodNumber:()=>ul,ZodNumberFormat:()=>Ua,ZodObject:()=>$p,ZodOptional:()=>sg,ZodPipe:()=>cg,ZodPrefault:()=>KD,ZodPromise:()=>lL,ZodReadonly:()=>rL,ZodRealError:()=>Lo,ZodRecord:()=>ig,ZodSet:()=>$D,ZodString:()=>dl,ZodStringFormat:()=>st,ZodSuccess:()=>QD,ZodSymbol:()=>PD,ZodTemplateLiteral:()=>nL,ZodTransform:()=>UD,ZodTuple:()=>WD,ZodType:()=>Te,ZodULID:()=>$h,ZodURL:()=>Bp,ZodUUID:()=>yi,ZodUndefined:()=>wD,ZodUnion:()=>og,ZodUnknown:()=>LD,ZodVoid:()=>ED,ZodXID:()=>_h,_ZodString:()=>Oh,_default:()=>ZD,_function:()=>iB,any:()=>zW,array:()=>Gp,base64:()=>TW,base64url:()=>bW,bigint:()=>FW,boolean:()=>VD,catch:()=>tL,check:()=>nB,cidrv4:()=>SW,cidrv6:()=>vW,clone:()=>As,codec:()=>tB,coerce:()=>ug,config:()=>Gi,core:()=>$i,cuid:()=>uW,cuid2:()=>mW,custom:()=>aB,date:()=>BW,decode:()=>wh,decodeAsync:()=>Rh,discriminatedUnion:()=>jW,e164:()=>IW,email:()=>oW,emoji:()=>dW,encode:()=>Ph,encodeAsync:()=>kh,endsWith:()=>nd,enum:()=>ng,file:()=>YW,flattenError:()=>Zc,float32:()=>kW,float64:()=>RW,formatError:()=>Kc,function:()=>iB,getErrorMap:()=>mB,globalRegistry:()=>wn,gt:()=>Rn,gte:()=>Ko,guid:()=>rW,hash:()=>wW,hex:()=>PW,hostname:()=>VW,httpUrl:()=>cW,includes:()=>rd,instanceof:()=>sB,int:()=>Mh,int32:()=>DW,int64:()=>EW,intersection:()=>zD,ipv4:()=>yW,ipv6:()=>CW,iso:()=>Ap,json:()=>cB,jwt:()=>NW,keyof:()=>HW,ksuid:()=>gW,lazy:()=>sL,length:()=>zs,literal:()=>KW,locales:()=>Dx,looseObject:()=>_W,lowercase:()=>td,lt:()=>kn,lte:()=>Or,map:()=>JW,maxLength:()=>Os,maxSize:()=>Ms,mime:()=>ad,minLength:()=>Dn,minSize:()=>ka,multipleOf:()=>wa,nan:()=>eB,nanoid:()=>pW,nativeEnum:()=>ZW,negative:()=>uV,never:()=>tg,nonnegative:()=>fV,nonoptional:()=>qD,nonpositive:()=>mV,normalize:()=>ld,null:()=>RD,nullable:()=>zp,nullish:()=>qW,number:()=>xD,object:()=>GW,optional:()=>Op,overwrite:()=>sd,parse:()=>Ih,parseAsync:()=>Nh,partialRecord:()=>UW,pipe:()=>Wp,positive:()=>pV,prefault:()=>YD,preprocess:()=>dB,prettifyError:()=>rN,promise:()=>rB,property:()=>hV,readonly:()=>iL,record:()=>HD,refine:()=>dL,regex:()=>ed,regexes:()=>Pn,registry:()=>Ex,safeDecode:()=>Lh,safeDecodeAsync:()=>Eh,safeEncode:()=>Dh,safeEncodeAsync:()=>Fh,safeParse:()=>xh,safeParseAsync:()=>Vh,set:()=>XW,setErrorMap:()=>uB,size:()=>Qc,startsWith:()=>id,strictObject:()=>$W,string:()=>Ah,stringFormat:()=>xW,stringbool:()=>lB,success:()=>QW,superRefine:()=>pL,symbol:()=>MW,templateLiteral:()=>oB,toJSONSchema:()=>bV,toLowerCase:()=>dd,toUpperCase:()=>pd,transform:()=>ag,treeifyError:()=>oN,trim:()=>cd,tuple:()=>BD,uint32:()=>LW,uint64:()=>AW,ulid:()=>fW,undefined:()=>OW,union:()=>rg,unknown:()=>ja,uppercase:()=>od,url:()=>lW,util:()=>we,uuid:()=>iW,uuidv4:()=>nW,uuidv6:()=>aW,uuidv7:()=>sW,void:()=>WW,xid:()=>hW});var Ap={};ou(Ap,{ZodISODate:()=>Lp,ZodISODateTime:()=>Dp,ZodISODuration:()=>Ep,ZodISOTime:()=>Fp,date:()=>vh,datetime:()=>Sh,duration:()=>bh,time:()=>Th});var Dp=X("ZodISODateTime",(e,t)=>{kN.init(e,t),st.init(e,t)});function Sh(e){return zx(Dp,e)}var Lp=X("ZodISODate",(e,t)=>{RN.init(e,t),st.init(e,t)});function vh(e){return Wx(Lp,e)}var Fp=X("ZodISOTime",(e,t)=>{DN.init(e,t),st.init(e,t)});function Th(e){return Bx(Fp,e)}var Ep=X("ZodISODuration",(e,t)=>{LN.init(e,t),st.init(e,t)});function bh(e){return Hx(Ep,e)}var ND=(e,t)=>{tN.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:o=>Kc(e,o)},flatten:{value:o=>Zc(e,o)},addIssue:{value:o=>{e.issues.push(o),e.message=JSON.stringify(e.issues,Dm,2)}},addIssues:{value:o=>{e.issues.push(...o),e.message=JSON.stringify(e.issues,Dm,2)}},isEmpty:{get(){return e.issues.length===0}}})},eW=X("ZodError",ND),Lo=X("ZodError",ND,{Parent:Error});var Ih=iN(Lo),Nh=nN(Lo),xh=aN(Lo),Vh=sN(Lo),Ph=lN(Lo),wh=cN(Lo),kh=dN(Lo),Rh=pN(Lo),Dh=uN(Lo),Lh=mN(Lo),Fh=fN(Lo),Eh=hN(Lo);var Te=X("ZodType",(e,t)=>(Lm.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...o)=>e.clone(we.mergeDefs(t,{checks:[...t.checks??[],...o.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),e.clone=(o,r)=>As(e,o,r),e.brand=()=>e,e.register=(o,r)=>(o.add(e,r),e),e.parse=(o,r)=>Ih(e,o,r,{callee:e.parse}),e.safeParse=(o,r)=>xh(e,o,r),e.parseAsync=async(o,r)=>Nh(e,o,r,{callee:e.parseAsync}),e.safeParseAsync=async(o,r)=>Vh(e,o,r),e.spa=e.safeParseAsync,e.encode=(o,r)=>Ph(e,o,r),e.decode=(o,r)=>wh(e,o,r),e.encodeAsync=async(o,r)=>kh(e,o,r),e.decodeAsync=async(o,r)=>Rh(e,o,r),e.safeEncode=(o,r)=>Dh(e,o,r),e.safeDecode=(o,r)=>Lh(e,o,r),e.safeEncodeAsync=async(o,r)=>Fh(e,o,r),e.safeDecodeAsync=async(o,r)=>Eh(e,o,r),e.refine=(o,r)=>e.check(dL(o,r)),e.superRefine=o=>e.check(pL(o)),e.overwrite=o=>e.check(sd(o)),e.optional=()=>Op(e),e.nullable=()=>zp(e),e.nullish=()=>Op(zp(e)),e.nonoptional=o=>qD(e,o),e.array=()=>Gp(e),e.or=o=>rg([e,o]),e.and=o=>zD(e,o),e.transform=o=>Wp(e,ag(o)),e.default=o=>ZD(e,o),e.prefault=o=>YD(e,o),e.catch=o=>tL(e,o),e.pipe=o=>Wp(e,o),e.readonly=()=>iL(e),e.describe=o=>{let r=e.clone();return wn.add(r,{description:o}),r},Object.defineProperty(e,"description",{get(){return wn.get(e)?.description},configurable:!0}),e.meta=(...o)=>{if(o.length===0)return wn.get(e);let r=e.clone();return wn.add(r,o[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Oh=X("_ZodString",(e,t)=>{Fm.init(e,t),Te.init(e,t);let o=e._zod.bag;e.format=o.format??null,e.minLength=o.minimum??null,e.maxLength=o.maximum??null,e.regex=(...r)=>e.check(ed(...r)),e.includes=(...r)=>e.check(rd(...r)),e.startsWith=(...r)=>e.check(id(...r)),e.endsWith=(...r)=>e.check(nd(...r)),e.min=(...r)=>e.check(Dn(...r)),e.max=(...r)=>e.check(Os(...r)),e.length=(...r)=>e.check(zs(...r)),e.nonempty=(...r)=>e.check(Dn(1,...r)),e.lowercase=r=>e.check(td(r)),e.uppercase=r=>e.check(od(r)),e.trim=()=>e.check(cd()),e.normalize=(...r)=>e.check(ld(...r)),e.toLowerCase=()=>e.check(dd()),e.toUpperCase=()=>e.check(pd())}),dl=X("ZodString",(e,t)=>{Fm.init(e,t),Oh.init(e,t),e.email=o=>e.check(Em(zh,o)),e.url=o=>e.check(qc(Bp,o)),e.jwt=o=>e.check(Qm(Qh,o)),e.emoji=o=>e.check(Wm(Wh,o)),e.guid=o=>e.check(Yc(Mp,o)),e.uuid=o=>e.check(Am(yi,o)),e.uuidv4=o=>e.check(Mm(yi,o)),e.uuidv6=o=>e.check(Om(yi,o)),e.uuidv7=o=>e.check(zm(yi,o)),e.nanoid=o=>e.check(Bm(Bh,o)),e.guid=o=>e.check(Yc(Mp,o)),e.cuid=o=>e.check(Hm(Hh,o)),e.cuid2=o=>e.check(Gm(Gh,o)),e.ulid=o=>e.check($m($h,o)),e.base64=o=>e.check(Km(Kh,o)),e.base64url=o=>e.check(Ym(Yh,o)),e.xid=o=>e.check(_m(_h,o)),e.ksuid=o=>e.check(jm(jh,o)),e.ipv4=o=>e.check(Um(Uh,o)),e.ipv6=o=>e.check(Jm(Jh,o)),e.cidrv4=o=>e.check(Xm(Xh,o)),e.cidrv6=o=>e.check(Zm(Zh,o)),e.e164=o=>e.check(qm(qh,o)),e.datetime=o=>e.check(Sh(o)),e.date=o=>e.check(vh(o)),e.time=o=>e.check(Th(o)),e.duration=o=>e.check(bh(o))});function Ah(e){return Ax(dl,e)}var st=X("ZodStringFormat",(e,t)=>{yN.init(e,t),Oh.init(e,t)}),zh=X("ZodEmail",(e,t)=>{vN.init(e,t),st.init(e,t)});function oW(e){return Em(zh,e)}var Mp=X("ZodGUID",(e,t)=>{CN.init(e,t),st.init(e,t)});function rW(e){return Yc(Mp,e)}var yi=X("ZodUUID",(e,t)=>{SN.init(e,t),st.init(e,t)});function iW(e){return Am(yi,e)}function nW(e){return Mm(yi,e)}function aW(e){return Om(yi,e)}function sW(e){return zm(yi,e)}var Bp=X("ZodURL",(e,t)=>{TN.init(e,t),st.init(e,t)});function lW(e){return qc(Bp,e)}function cW(e){return qc(Bp,{protocol:/^https?$/,hostname:Pn.domain,...we.normalizeParams(e)})}var Wh=X("ZodEmoji",(e,t)=>{bN.init(e,t),st.init(e,t)});function dW(e){return Wm(Wh,e)}var Bh=X("ZodNanoID",(e,t)=>{IN.init(e,t),st.init(e,t)});function pW(e){return Bm(Bh,e)}var Hh=X("ZodCUID",(e,t)=>{NN.init(e,t),st.init(e,t)});function uW(e){return Hm(Hh,e)}var Gh=X("ZodCUID2",(e,t)=>{xN.init(e,t),st.init(e,t)});function mW(e){return Gm(Gh,e)}var $h=X("ZodULID",(e,t)=>{VN.init(e,t),st.init(e,t)});function fW(e){return $m($h,e)}var _h=X("ZodXID",(e,t)=>{PN.init(e,t),st.init(e,t)});function hW(e){return _m(_h,e)}var jh=X("ZodKSUID",(e,t)=>{wN.init(e,t),st.init(e,t)});function gW(e){return jm(jh,e)}var Uh=X("ZodIPv4",(e,t)=>{FN.init(e,t),st.init(e,t)});function yW(e){return Um(Uh,e)}var Jh=X("ZodIPv6",(e,t)=>{EN.init(e,t),st.init(e,t)});function CW(e){return Jm(Jh,e)}var Xh=X("ZodCIDRv4",(e,t)=>{AN.init(e,t),st.init(e,t)});function SW(e){return Xm(Xh,e)}var Zh=X("ZodCIDRv6",(e,t)=>{MN.init(e,t),st.init(e,t)});function vW(e){return Zm(Zh,e)}var Kh=X("ZodBase64",(e,t)=>{ON.init(e,t),st.init(e,t)});function TW(e){return Km(Kh,e)}var Yh=X("ZodBase64URL",(e,t)=>{zN.init(e,t),st.init(e,t)});function bW(e){return Ym(Yh,e)}var qh=X("ZodE164",(e,t)=>{WN.init(e,t),st.init(e,t)});function IW(e){return qm(qh,e)}var Qh=X("ZodJWT",(e,t)=>{BN.init(e,t),st.init(e,t)});function NW(e){return Qm(Qh,e)}var pl=X("ZodCustomStringFormat",(e,t)=>{HN.init(e,t),st.init(e,t)});function xW(e,t,o={}){return Ws(pl,e,t,o)}function VW(e){return Ws(pl,"hostname",Pn.hostname,e)}function PW(e){return Ws(pl,"hex",Pn.hex,e)}function wW(e,t){let o=t?.enc??"hex",r=`${e}_${o}`,i=Pn[r];if(!i)throw new Error(`Unrecognized hash format: ${r}`);return Ws(pl,r,i,t)}var ul=X("ZodNumber",(e,t)=>{GN.init(e,t),Te.init(e,t),e.gt=(r,i)=>e.check(Rn(r,i)),e.gte=(r,i)=>e.check(Ko(r,i)),e.min=(r,i)=>e.check(Ko(r,i)),e.lt=(r,i)=>e.check(kn(r,i)),e.lte=(r,i)=>e.check(Or(r,i)),e.max=(r,i)=>e.check(Or(r,i)),e.int=r=>e.check(Mh(r)),e.safe=r=>e.check(Mh(r)),e.positive=r=>e.check(Rn(0,r)),e.nonnegative=r=>e.check(Ko(0,r)),e.negative=r=>e.check(kn(0,r)),e.nonpositive=r=>e.check(Or(0,r)),e.multipleOf=(r,i)=>e.check(wa(r,i)),e.step=(r,i)=>e.check(wa(r,i)),e.finite=()=>e;let o=e._zod.bag;e.minValue=Math.max(o.minimum??Number.NEGATIVE_INFINITY,o.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(o.maximum??Number.POSITIVE_INFINITY,o.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(o.format??"").includes("int")||Number.isSafeInteger(o.multipleOf??.5),e.isFinite=!0,e.format=o.format??null});function xD(e){return Gx(ul,e)}var Ua=X("ZodNumberFormat",(e,t)=>{$N.init(e,t),ul.init(e,t)});function Mh(e){return _x(Ua,e)}function kW(e){return jx(Ua,e)}function RW(e){return Ux(Ua,e)}function DW(e){return Jx(Ua,e)}function LW(e){return Xx(Ua,e)}var ml=X("ZodBoolean",(e,t)=>{_N.init(e,t),Te.init(e,t)});function VD(e){return Zx(ml,e)}var fl=X("ZodBigInt",(e,t)=>{jN.init(e,t),Te.init(e,t),e.gte=(r,i)=>e.check(Ko(r,i)),e.min=(r,i)=>e.check(Ko(r,i)),e.gt=(r,i)=>e.check(Rn(r,i)),e.gte=(r,i)=>e.check(Ko(r,i)),e.min=(r,i)=>e.check(Ko(r,i)),e.lt=(r,i)=>e.check(kn(r,i)),e.lte=(r,i)=>e.check(Or(r,i)),e.max=(r,i)=>e.check(Or(r,i)),e.positive=r=>e.check(Rn(BigInt(0),r)),e.negative=r=>e.check(kn(BigInt(0),r)),e.nonpositive=r=>e.check(Or(BigInt(0),r)),e.nonnegative=r=>e.check(Ko(BigInt(0),r)),e.multipleOf=(r,i)=>e.check(wa(r,i));let o=e._zod.bag;e.minValue=o.minimum??null,e.maxValue=o.maximum??null,e.format=o.format??null});function FW(e){return Yx(fl,e)}var eg=X("ZodBigIntFormat",(e,t)=>{UN.init(e,t),fl.init(e,t)});function EW(e){return Qx(eg,e)}function AW(e){return eV(eg,e)}var PD=X("ZodSymbol",(e,t)=>{JN.init(e,t),Te.init(e,t)});function MW(e){return tV(PD,e)}var wD=X("ZodUndefined",(e,t)=>{XN.init(e,t),Te.init(e,t)});function OW(e){return oV(wD,e)}var kD=X("ZodNull",(e,t)=>{ZN.init(e,t),Te.init(e,t)});function RD(e){return rV(kD,e)}var DD=X("ZodAny",(e,t)=>{KN.init(e,t),Te.init(e,t)});function zW(){return iV(DD)}var LD=X("ZodUnknown",(e,t)=>{YN.init(e,t),Te.init(e,t)});function ja(){return nV(LD)}var FD=X("ZodNever",(e,t)=>{qN.init(e,t),Te.init(e,t)});function tg(e){return aV(FD,e)}var ED=X("ZodVoid",(e,t)=>{QN.init(e,t),Te.init(e,t)});function WW(e){return sV(ED,e)}var Hp=X("ZodDate",(e,t)=>{ex.init(e,t),Te.init(e,t),e.min=(r,i)=>e.check(Ko(r,i)),e.max=(r,i)=>e.check(Or(r,i));let o=e._zod.bag;e.minDate=o.minimum?new Date(o.minimum):null,e.maxDate=o.maximum?new Date(o.maximum):null});function BW(e){return lV(Hp,e)}var AD=X("ZodArray",(e,t)=>{tx.init(e,t),Te.init(e,t),e.element=t.element,e.min=(o,r)=>e.check(Dn(o,r)),e.nonempty=o=>e.check(Dn(1,o)),e.max=(o,r)=>e.check(Os(o,r)),e.length=(o,r)=>e.check(zs(o,r)),e.unwrap=()=>e.element});function Gp(e,t){return gV(AD,e,t)}function HW(e){let t=e._zod.def.shape;return ng(Object.keys(t))}var $p=X("ZodObject",(e,t)=>{ox.init(e,t),Te.init(e,t),we.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>ng(Object.keys(e._zod.def.shape)),e.catchall=o=>e.clone({...e._zod.def,catchall:o}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ja()}),e.loose=()=>e.clone({...e._zod.def,catchall:ja()}),e.strict=()=>e.clone({...e._zod.def,catchall:tg()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=o=>we.extend(e,o),e.safeExtend=o=>we.safeExtend(e,o),e.merge=o=>we.merge(e,o),e.pick=o=>we.pick(e,o),e.omit=o=>we.omit(e,o),e.partial=(...o)=>we.partial(sg,e,o[0]),e.required=(...o)=>we.required(lg,e,o[0])});function GW(e,t){let o={type:"object",shape:e??{},...we.normalizeParams(t)};return new $p(o)}function $W(e,t){return new $p({type:"object",shape:e,catchall:tg(),...we.normalizeParams(t)})}function _W(e,t){return new $p({type:"object",shape:e,catchall:ja(),...we.normalizeParams(t)})}var og=X("ZodUnion",(e,t)=>{rx.init(e,t),Te.init(e,t),e.options=t.options});function rg(e,t){return new og({type:"union",options:e,...we.normalizeParams(t)})}var MD=X("ZodDiscriminatedUnion",(e,t)=>{og.init(e,t),ix.init(e,t)});function jW(e,t,o){return new MD({type:"union",options:t,discriminator:e,...we.normalizeParams(o)})}var OD=X("ZodIntersection",(e,t)=>{nx.init(e,t),Te.init(e,t)});function zD(e,t){return new OD({type:"intersection",left:e,right:t})}var WD=X("ZodTuple",(e,t)=>{ax.init(e,t),Te.init(e,t),e.rest=o=>e.clone({...e._zod.def,rest:o})});function BD(e,t,o){let r=t instanceof Lm,i=r?o:t,n=r?t:null;return new WD({type:"tuple",items:e,rest:n,...we.normalizeParams(i)})}var ig=X("ZodRecord",(e,t)=>{sx.init(e,t),Te.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function HD(e,t,o){return new ig({type:"record",keyType:e,valueType:t,...we.normalizeParams(o)})}function UW(e,t,o){let r=As(e);return r._zod.values=void 0,new ig({type:"record",keyType:r,valueType:t,...we.normalizeParams(o)})}var GD=X("ZodMap",(e,t)=>{lx.init(e,t),Te.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function JW(e,t,o){return new GD({type:"map",keyType:e,valueType:t,...we.normalizeParams(o)})}var $D=X("ZodSet",(e,t)=>{cx.init(e,t),Te.init(e,t),e.min=(...o)=>e.check(ka(...o)),e.nonempty=o=>e.check(ka(1,o)),e.max=(...o)=>e.check(Ms(...o)),e.size=(...o)=>e.check(Qc(...o))});function XW(e,t){return new $D({type:"set",valueType:e,...we.normalizeParams(t)})}var cl=X("ZodEnum",(e,t)=>{dx.init(e,t),Te.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let o=new Set(Object.keys(t.entries));e.extract=(r,i)=>{let n={};for(let a of r)if(o.has(a))n[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new cl({...t,checks:[],...we.normalizeParams(i),entries:n})},e.exclude=(r,i)=>{let n={...t.entries};for(let a of r)if(o.has(a))delete n[a];else throw new Error(`Key ${a} not found in enum`);return new cl({...t,checks:[],...we.normalizeParams(i),entries:n})}});function ng(e,t){let o=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new cl({type:"enum",entries:o,...we.normalizeParams(t)})}function ZW(e,t){return new cl({type:"enum",entries:e,...we.normalizeParams(t)})}var _D=X("ZodLiteral",(e,t)=>{px.init(e,t),Te.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function KW(e,t){return new _D({type:"literal",values:Array.isArray(e)?e:[e],...we.normalizeParams(t)})}var jD=X("ZodFile",(e,t)=>{ux.init(e,t),Te.init(e,t),e.min=(o,r)=>e.check(ka(o,r)),e.max=(o,r)=>e.check(Ms(o,r)),e.mime=(o,r)=>e.check(ad(Array.isArray(o)?o:[o],r))});function YW(e){return yV(jD,e)}var UD=X("ZodTransform",(e,t)=>{mx.init(e,t),Te.init(e,t),e._zod.parse=(o,r)=>{if(r.direction==="backward")throw new eN(e.constructor.name);o.addIssue=n=>{if(typeof n=="string")o.issues.push(we.issue(n,o.value,t));else{let a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=o.value),a.inst??(a.inst=e),o.issues.push(we.issue(a))}};let i=t.transform(o.value,o);return i instanceof Promise?i.then(n=>(o.value=n,o)):(o.value=i,o)}});function ag(e){return new UD({type:"transform",transform:e})}var sg=X("ZodOptional",(e,t)=>{fx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Op(e){return new sg({type:"optional",innerType:e})}var JD=X("ZodNullable",(e,t)=>{hx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function zp(e){return new JD({type:"nullable",innerType:e})}function qW(e){return Op(zp(e))}var XD=X("ZodDefault",(e,t)=>{gx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function ZD(e,t){return new XD({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():we.shallowClone(t)}})}var KD=X("ZodPrefault",(e,t)=>{yx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function YD(e,t){return new KD({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():we.shallowClone(t)}})}var lg=X("ZodNonOptional",(e,t)=>{Cx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function qD(e,t){return new lg({type:"nonoptional",innerType:e,...we.normalizeParams(t)})}var QD=X("ZodSuccess",(e,t)=>{Sx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function QW(e){return new QD({type:"success",innerType:e})}var eL=X("ZodCatch",(e,t)=>{vx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function tL(e,t){return new eL({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var oL=X("ZodNaN",(e,t)=>{Tx.init(e,t),Te.init(e,t)});function eB(e){return dV(oL,e)}var cg=X("ZodPipe",(e,t)=>{bx.init(e,t),Te.init(e,t),e.in=t.in,e.out=t.out});function Wp(e,t){return new cg({type:"pipe",in:e,out:t})}var dg=X("ZodCodec",(e,t)=>{cg.init(e,t),Ix.init(e,t)});function tB(e,t,o){return new dg({type:"pipe",in:e,out:t,transform:o.decode,reverseTransform:o.encode})}var rL=X("ZodReadonly",(e,t)=>{Nx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function iL(e){return new rL({type:"readonly",innerType:e})}var nL=X("ZodTemplateLiteral",(e,t)=>{xx.init(e,t),Te.init(e,t)});function oB(e,t){return new nL({type:"template_literal",parts:e,...we.normalizeParams(t)})}var aL=X("ZodLazy",(e,t)=>{wx.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.getter()});function sL(e){return new aL({type:"lazy",getter:e})}var lL=X("ZodPromise",(e,t)=>{Px.init(e,t),Te.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rB(e){return new lL({type:"promise",innerType:e})}var cL=X("ZodFunction",(e,t)=>{Vx.init(e,t),Te.init(e,t)});function iB(e){return new cL({type:"function",input:Array.isArray(e?.input)?BD(e?.input):e?.input??Gp(ja()),output:e?.output??ja()})}var _p=X("ZodCustom",(e,t)=>{kx.init(e,t),Te.init(e,t)});function nB(e){let t=new gN({check:"custom"});return t._zod.check=e,t}function aB(e,t){return CV(_p,e??(()=>!0),t)}function dL(e,t={}){return SV(_p,e,t)}function pL(e){return vV(e)}function sB(e,t={error:`Input not instance of ${e.name}`}){let o=new _p({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...we.normalizeParams(t)});return o._zod.bag.Class=e,o}var lB=(...e)=>TV({Codec:dg,Boolean:ml,String:dl},...e);function cB(e){let t=sL(()=>rg([Ah(e),xD(),VD(),RD(),Gp(t),HD(Ah(),t)]));return t}function dB(e,t){return Wp(ag(e),t)}var pB={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function uB(e){Gi({customError:e})}function mB(){return Gi().customError}var pg;pg||(pg={});var ug={};ou(ug,{bigint:()=>yB,boolean:()=>gB,date:()=>CB,number:()=>hB,string:()=>fB});function fB(e){return Mx(dl,e)}function hB(e){return $x(ul,e)}function gB(e){return Kx(ml,e)}function yB(e){return qx(fl,e)}function CB(e){return cV(Hp,e)}Gi(Rx());var ihe=Kn;var SB=Ke("renameLayers"),vB=`Propose names for the elements in provided React JSX fragment of a web site.

**Naming Rules:**
1. Never use an ancestor's name in a descendant's name. A descendant's name must never repeat any part of its ancestors name.
    - INCORRECT: "Pricing Plans", "Pricing Plans Icon", "Pricing Plans Title"
    - CORRECT: "Pricing Plans", "Icon", "Title"
2. Evaluate the entire fragment, paying special attention to the text in the children of RichText components, to determine the theme of the content, e.g. "Savings Goals" or "Pricing Plans", and use this to inform the individual names.
3. When an element is a layout wrapper (e.g., flex, grid), describe its function or structure. Use this to replace generic wrappers like 'Body,' 'Content,' or 'Group.' (Example: '2x2 Grid,' 'Info Stack,' 'Action Bar'). (Never: 'Icon Flex,' 'Details Group').
4. Titles should be short. Aim for 1 word (80%). Use 2-3 words only when necessary (20%).
5. All names must use Title Case, including spaces.
6. Ignore "*-container" suffixes.
7. Ignore the attribute value of data-framer-name="*".

**Response Format:**
- Respond with a single line of text.
- Do not include any other text, explanation, or preamble.
- The line must be a list of "class-name Proposed Name" pairs separated by semicolons.
- The class name must be the class name of the JSX element.

**Example Output:**
framer-asifd Title; framer-adfda Content; framer-fdsafd Footer; framer-aht4dq Submit Button;
`,TB=";",bB=Kn.object({className:Kn.string(),name:Kn.string()});function IB(e){let t=e.trim();C(t.length>0,"Trimmed result is empty");let[o,...r]=t.split(" ");return bB.parse({className:o,name:r.join(" ")})}function NB(e){return It(e)||J(e)||ct(e)||le(e)||ze(e)}async function uL(e,t){let o=performance.now(),r=0,i=e.stores.scopeStore.active;if(NB(i))try{e.scheduler.process(()=>e.beginUndoGroup());for(let n of e.tree.withoutDescendants(t)){let{jsx:a,ctx:l}=await TD(n,i,{modulesStore:e.stores.modulesStore,treeStore:e.stores.treeStore,engineChanges:e.scheduler.changes,assetMap:e.stores.assetStore.assetMap},void 0,"",!0);if(!a)continue;let s=new Ad(TB,IB,c=>{e.scheduler.processWhenReadyAsync(()=>{let{className:d,name:u}=c,f=e.tree.get(l.css.getNodeIdForClassName(d));!f||!Nc(f)||Pt(f)||ve(f)||R(f.name)||(f.set({name:iv(u)}),r++)})});await new Ed("renameLayers").start({model:"google/gemini-2.5-flash",messages:[{role:"system",content:vB},{role:"user",content:`\`\`\`
${a.toString()}\`\`\``}],onText:c=>s.addToken(c)}),s.finalize()}}catch(n){throw SB.error("Failed to generate layer names:",n),n}finally{await e.scheduler.processWhenReadyAsync(()=>e.endUndoGroup()),Ct("rename_layers",{duration:performance.now()-o,count:r})}}function Nhe(e){return uo(e)&&!xe(e)}function xhe(e){return ht(e)&&!ro(e)}function mL(e){return Vt(e)&&!ro(e)}function fL(e,t){return Ml(t)&&(Ke("app").warn("Inserting a symbol is no longer supported."),t.isMaster=!1,t.replicaInfo=null,t.originalid=null),C(!e.tree.has(t.id),"Tree should not contain node with same id as inserted template"),e.stores.scopeStore.insertNode(t),t}function yL(e){let t={width:200,height:200,codeComponentIdentifier:e.identifier,intrinsicWidth:null,intrinsicHeight:null,slotsAreChildNodes:Xe.isOn("componentSlotsAreChildNodes")},{defaultProps:o,annotations:r}=e;if(o!==void 0&&(cu(o.width)&&(t.width=o.width,t.intrinsicWidth=o.width),cu(o.height)&&(t.height=o.height,t.intrinsicHeight=o.height)),r){let i=Dv(r);i.width&&(t.width=i.width),i.height&&(t.height=i.height)}return new In(t)}function Bhe(e){return e.sort(xB)}var hL=new Map;function gL(e){let t=hL.get(e);if(t)return t;let o=e.split("/").map(r=>r.trim()).join("");return hL.set(e,o),o}function xB(e,t){if(e.name===null)return-1;if(t.name===null)return 1;let o=gL(e.name),r=gL(t.name);return o.localeCompare(r,void 0,{numeric:!0})}function Hhe(e){if(qg(e)&&e.file==="./canvas.tsx"||e.identifier==="framer/Stack")return!1;let t=ce(e.identifier);return Ho(t)&&t.type==="screen"?!1:e.type==="component"||e.type==="master"}function Ghe(e){let t=e.split("/"),o=t[t.length-1];return C($o(o),"Last section is required"),o.trim()}function $he(e,t){return e.name?e.name:t?pi(t):"Unknown"}function _he(e){let t=[];for(let o of M.getAllLocalModules())o.type==="component"&&o.file===e&&t.push(o);return t}function CL(e,{allowVariants:t,allowLockedNodes:o}={}){return!o&&Ar(e)||ir(e)||!t&&(xe(e)||ro(e))||mL(e)||is(e)||Ee(e)||Di(e)?!1:ye(e)}async function xge(e,t,o,r){function i(){kB(e,[t],o,r)}if(!$(o)){i();return}let n=ce(o.codeComponentIdentifier);if(!n||n.kind!=="externalModuleExport"){i();return}await e.stores.modulesStore.addExternalModulesToProject([n],{onTreeUpdate:i})}function VB(e,t,o){if(!gs(t))return;let r=lv(e.tree,t);if(!le(r))return;C(r.isLoaded(),"smart component must be loaded"),o.set({formSubmitButtonId:t.id});let i=r.getPrimaryVariant();r.getReplicaVariants().forEach(n=>{Le.resetOverridesByProperty(e.tree,n,n,["htmlTag","link"])}),mT(i)&&i.set({htmlTag:"button",link:void 0})}function PB(e,t,o){if(!$(e)||!$(t)||!e.cache.formContainerAncestorId)return;let r=o.tree.get(e.cache.formContainerAncestorId);Vo(r)&&VB(o,t,r)}function wB(e,t,o){let r=$v(o.tree,e);r&&li(e,r)&&r.set({dataSourceLoaderId:t.id})}function kB(e,t,o,r){let i={},n=new Set;t.forEach(a=>{let l=null;if(Vt(a)){if(!jo(a))return;let v=zr(e.tree,a),b=Le.getReplicaForTemplateNode(e.tree,a);if(!v||!b||!xe(b))return;a=v,l=b}let s=fL(e,o);PB(a,s,e),wB(a,s,e);let c=e.tree.getNodeParent(a),d=c||e.tree.getScopeNodeFor(a)||e.stores.scopeStore.active,u=d.children.indexOf(a),f=Nd(e.tree,a,s,d);if(s.set(f),c&&Ye(a)&&ma(s)){s.set(Ai(a));let v=new wd([[a.id,s.id]]);Fn(e.tree,c,v,ot(c)||Rr(c)),n.add(s.id)}if($(s)&&DB(a,s,new Set(Object.keys(f))),uo(a)&&!xe(a)&&$(s)&&RB(e,a,s),LB(e,d,a,s),yt(a))for(let v of a.children)ot(v)&&e.moveNode(v.id,s.id);e.deleteNode(a.id),e.moveNode(s.id,d.id,u);let y=FB(e.tree,a,s);ye(s)&&y&&(r?e.tree.current(s)?.set({left:y.left,right:y.right,top:y.top,bottom:y.bottom,centerAnchorX:y.centerAnchorX,centerAnchorY:y.centerAnchorY}):e.tree.current(s)?.set(y)),l?i[a.id]=Uo(l.id,s.id):i[a.id]=s.id});for(let a of e.stores.selectionStore.ids)n.add(i[a]??a);e.stores.selectionStore.set(Array.from(n))}function RB(e,t,o){if(xe(t))return;let r=o.getLocalSmartComponentNodeId();if(!r)return;let i=e.tree.getNode(r);if(!(!i||!le(i))&&i.originalSymbolId===t.replicaInfo.master){for(let n of t.walk())if(!(!Ib(n)||!n.isTarget)&&n.originalid){if(Pe(n)&&n.fillType==="image"&&R(n.fillImage)){let a=o.getRawControlProp(`symbol_${n.originalid}`);a&&a.type==="image"&&(a.value=n.fillImage)}else if(is(n)){let a=o.getRawControlProp(`symbol_${n.originalid}`);a&&a.type==="string"&&(a.value=n.styledText.text)}}}}function DB(e,t,o){let r;e:for(let n of e.walk()){if(!zt(n)&&!$(n))continue;let a=Fc(n);for(let[,l]of Object.entries(a))if(r===void 0)r=l;else if(r){r=null;break e}}if(!r)return;let i=M.componentForIdentifier(t.codeComponentIdentifier);if(i?.properties)for(let n in i.properties){if(o?.has(n)||i.properties[n]?.type!=="eventhandler")continue;let l={type:"eventhandler",value:r};t.set({[dt(n)]:l});return}}function LB(e,t,o,r){let i=t?Ky(t):null;if(!i||!Pr(i))return;let n=e.tree.getSmartComponentNodeFor(i);if(n)for(let a of n.getReplicaVariants()){let l=a.replicaInfo;if(!(o.id in l.overrides))continue;let s={...l};s.overrides={...s.overrides};let c={},d=s.overrides[o.id];for(let u in d){let f=d[u];if(u==="_deleted"){if(!ft(f))continue;let y=f.filter(v=>v in r);y.length&&(c._deleted=y)}else u in r&&(c[u]=f)}delete s.overrides[o.id],s.overrides[r.id]=c,e.tree.current(a)?.set({replicaInfo:s})}}function FB(e,t,o){if(!ye(t)||!ye(o))return;let r=t.constraintValues();if(fs(t)&&fs(o)&&(sc(t)&&(r.gridItemFillCellWidth=!0),hs(t)&&(r.gridItemFillCellHeight=!0)),!$(o))return r;if(Lv(t)){let i=o.getSupportedLayout(M),n=e.getRect(t);t.widthType===2&&!Ni(i.width)&&(r.widthType=0,r.width=n.width),t.widthType===5&&(r.widthType=Ni(i.width)?2:0),t.heightType===2&&!Ni(i.height)&&(r.heightType=0,r.height=n.height),t.heightType===5&&(r.heightType=Ni(i.height)?2:0)}return r}function Vge(e){return Yg(e)?yL(e):null}var SL=Ya(JC());function vL(e){let t={};for(let o of e.walk()){let r={};Zo(o)&&(r.strokeDashArray=o.strokeDashArray,r.strokeDashOffset=o.strokeDashOffset,z(o.strokeWidth)||(r.strokeWidth=o.strokeWidth)),dn(o)&&(r.boxShadows=o.boxShadows),Lr(o)&&(r.radius=o.radius),ti(o)&&(r.radiusTopLeft=o.radiusTopLeft,r.radiusTopRight=o.radiusTopRight,r.radiusBottomRight=o.radiusBottomRight,r.radiusBottomLeft=o.radiusBottomLeft),ns(o)&&(r.pathSegments=o.pathSegments),Mo(o)&&o.fillType==="image"&&o.fillImageResize==="tile"&&(r.fillImageTileSize=o.fillImageTileSize??1),t[o.id]=r}return(0,SL.Map)(t)}function mg(e,t,o){t.forEach((r,i)=>{let n=e.getNode(i);if(!n)return;let a={};Zo(n)&&(K(r.strokeWidth)&&(a.strokeWidth=Yt(r.strokeWidth*o,2)),R(r.strokeDashArray)&&(a.strokeDashArray=AB(r.strokeDashArray,o)),K(r.strokeDashOffset)&&(a.strokeDashOffset=Yt(r.strokeDashOffset*o,2))),wC(n)&&zy(r.boxShadows)&&(a.boxShadows=EB(r.boxShadows,o)),Lr(n)&&(K(r.radius)&&(a.radius=Yt(r.radius*o,2)),K(r.radiusTopLeft)&&(a.radiusTopLeft=Yt(r.radiusTopLeft*o,2)),K(r.radiusTopRight)&&(a.radiusTopRight=Yt(r.radiusTopRight*o,2)),K(r.radiusBottomRight)&&(a.radiusBottomRight=Yt(r.radiusBottomRight*o,2)),K(r.radiusBottomLeft)&&(a.radiusBottomLeft=Yt(r.radiusBottomLeft*o,2))),ns(n)&&r.pathSegments&&(a.pathSegments=n.pathSegments.map((l,s)=>{let d=r.pathSegments[s].radius*o;return l.merge({radius:d})})),Mo(n)&&K(r.fillImageTileSize)&&(a.fillImageTileSize=r.fillImageTileSize*o),n.set(a)})}function EB(e,t){if(!(!e||z(e)))return e.map(o=>Fl(o,{x:Yt(o.x*t,2),y:Yt(o.y*t,2),blur:Yt(o.blur*t,2),spread:Yt(o.spread*t,2)}))}function AB(e,t){let o=[],r=e.split(",");for(let i of r){let n=parseFloat(i);if(!K(n))continue;let a=Yt(n*t,2);o.push(a)}return o.join(", ")}var Wge=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;let o=new Set(e);for(let r of t)if(!o.has(r))return!1;return!0},Bge=(e,t,o)=>{let r=[];for(let i of e)fg(t,i,o)!==-1&&r.push(i);return r},TL=(e,t,o)=>{if(!o)return Array.from(new Set([...e,...t]));let r=[...e];for(let i of t)fg(r,i,o)===-1&&r.push(i);return r},Hge=(e,t,o)=>e.filter(r=>fg(t,r,o)===-1);function fg(e,t,o){return o?e.findIndex(r=>o(r,t)):e.indexOf(t)}function MB(e,t){let o=[];for(let i of t.segmentSelection){let n=e.getNode(i.id);!n||i.index>=n.pathSegments.length||o.push(i)}let r=t.segmentHandle;if(r){let i=e.getNode(r.id);(!i||r.index>=i.pathSegments.length)&&(r=null)}return{...t,segmentSelection:o,segmentHandle:r}}var bL=class{constructor(t){this.addChanges=t;k(this,"state",{segmentSelection:[],selectionType:0,segmentHandle:null,segmentHovered:null,closestCurve:null,pointRounding:.5,snapConstraint:null})}validateSegmentSelection(t){this.state=MB(t,this.state),this.addChanges("PathSelection")}setSegmentSelection(t,o){this.state={...this.state,segmentSelection:t,selectionType:o},this.addChanges("PathSelection")}toggleSegmentSelection(t,o){this.state.selectionType!==o&&(this.state={...this.state,segmentSelection:t,selectionType:o});let r=t.filter(n=>this.state.segmentSelection.find(a=>n.id===a.id&&n.index===a.index)===void 0),i=this.state.segmentSelection.filter(n=>t.find(a=>a.id===n.id&&a.index===n.index)===void 0);this.state={...this.state,segmentSelection:TL(r,i)},this.addChanges("PathSelection")}setSegmentHandle(t){this.state={...this.state,segmentHandle:t},this.addChanges("PathSelection")}setHoveredSegment(t){this.state={...this.state,segmentHovered:t},this.addChanges("PathSelection")}setClosestCurve(t){this.state={...this.state,closestCurve:t},this.addChanges("PathSelection")}setPathPointRounding(t){this.state={...this.state,pointRounding:t},this.addChanges("PathSelection")}setPathConstraint(t){this.state={...this.state,snapConstraint:t},this.addChanges("PathSelection")}};var hl=Ya(JC());function NL(e,t){return Gs(e,"canDesign")||t.length===0?!1:t.find(o=>!(!Da(o)&&Xo(o)&&!Hl(o)&&!o.originalid))===void 0}function Sye(e,t,o,r){let i=t.map(n=>gg(e,n,o,r)[0]);e.stores.selectionStore.set(i)}function gg(e,t,o,r){let i=e.tree,n;Im.isBasicShape(t)?n=Im.createPath(t):n=t.calculatedPaths();let a=mv(t,n),l=yl(i,t,n),s=i.newId(),c=fo.boundingBox(a),d=PL(t),u=ET(t);if(d.fillType==="linear-gradient"&&d.fillLinearGradient){d.fillType="linear-gradient";let y=K(t.rotation)?t.rotation:0;d.fillLinearGradient=d.fillLinearGradient.updated({angle:d.fillLinearGradient.angle+y})}if(a.length===1){let y=a[0];C(y!==void 0,"Expected first path after length === 1 check");let v=fo.offset(y,ge.reverse(c));e.createPath(t.parentid,{id:s,...v,...c,...d,...u})}else{let y=[],v=new jc({id:s,parentid:t.parentid,pathBoolean:4,...c,...d,...u});y.push(v);for(let b of a){let x=fo.boundingBox(b),D={...x,...ge.subtract(x,c)},B=fo.offset(b,ge.reverse(x)),H=new Fs({parentid:s,...D,...B,...d});y.push(H)}e.tree.insertNodes(y)}let f=i.getParent(t.id);if(f!==null&&yt(f)){let y=f.children.indexOf(t);e.moveNode(s,f.id,y)}return e.deleteNode(t.id),r||e.stores.selectionStore.set(s),o===!0&&e.setTool(36),[s,l]}function OB(e){let t={};return e.forEach(o=>{let r=t[o.id]??[];r.push(o.index),t[o.id]=r}),t}function vye(e,t){let o=1/t;return{x:Math.round(e.x*o)/o,y:Math.round(e.y*o)/o}}function Tye(e,t){let o=e.getNode(t.id);if(!o||!o.pathSegments)return null;let r=o.pathSegments[t.index];if(!r)return null;let i=t.handle===0?Qt.calculatedHandleIn(r):Qt.calculatedHandleOut(r);return e.convertPointToCanvas(o,i)}function IL(e,t){return t.handle===0?{x:e.handleOutX,y:e.handleOutY}:{x:e.handleInX,y:e.handleInY}}function bye(e,t,o,r,i){let n=e.getNode(t.id),a=n.pathSegments[t.index];return C(a!==void 0,"Expected segment at handleSelector.index"),o=e.convertPointToNode(n,o),o=ge.subtract(o,a),yr.update(n.pathSegments,t.index,l=>{let s=IL(l,t),c=l.handleMirroring==="straight",d=l.handleMirroring;r&&(s=IL(r,t),c=r.handleMirroring==="straight",d=r.handleMirroring),c&&(d="symmetric"),r&&i&&(d==="disconnected"||d==="asymmetric"?d="symmetric":d="disconnected"),d==="symmetric"&&(s=ge.reverse(o));let u=t.handle===0,f=u?o.x:s.x,y=u?o.y:s.y,v=u?s.x:o.x,b=u?s.y:o.y;return l.merge({handleOutX:v,handleOutY:b,handleInX:f,handleInY:y,handleMirroring:d})})}function gl(e,t,o=!1,r){let i=e.tree,n=(0,hl.Map)(),a=(0,hl.Map)();if(!Xo(t)&&!Ee(t))return{descendantPaths:n,descendantBasicShapes:a};let l={};yg(i,t,l);let s=Object.keys(l);for(let u=0,f=s.length;u<f;u++){let y=s[u];C(y!==void 0,"Expected id at index within loop bounds");let v=l[y];C(v!==void 0,"Expected path for id from Object.keys"),n=n.set(y,v)}let c={};Cg(i,t,c,o);let d=Object.keys(c);for(let u=0,f=d.length;u<f;u++){let y=d[u];C(y!==void 0,"Expected id at index within loop bounds");let v=c[y];C(v!==void 0,"Expected points for id from Object.keys"),a=a.set(y,v)}return a.forEach((u,f)=>{if(u!==null)return;let y=i.getNode(f);if(!y||!NL(e,[y]))return;let[v,b]=gg(e,y,!1,!0),x=b[0];C(x!==void 0,"Expected pathSegment from flattenShape"),n=n.set(v,x),r&&r.includes(f)&&e.stores.selectionStore.toggle(v)}),{descendantPaths:n,descendantBasicShapes:a}}function xL(e,t){let o=e.tree,r=(0,hl.Map)(),i=(0,hl.Map)();if(!Ee(t))return{shapeContainerDescendantPaths:r,shapeContainerDescendantBasicShapes:i};let n={};yg(o,t,n,t);let a=Object.keys(n);for(let c=0,d=a.length;c<d;c++){let u=a[c];C(u!==void 0,"Expected id at index within loop bounds");let f=n[u];C(f!==void 0,"Expected path for id from Object.keys"),r=r.set(u,f)}let l={};Cg(o,t,l,!1,!1,t);let s=Object.keys(l);for(let c=0,d=s.length;c<d;c++){let u=s[c];C(u!==void 0,"Expected id at index within loop bounds");let f=l[u];C(f!==void 0,"Expected points for id from Object.keys"),i=i.set(u,f)}return i.forEach((c,d)=>{if(c!==null)return;let u=o.getNode(d);if(!u||!NL(e,[u]))return;let[f,y]=gg(e,u,!1,!0),v=y[0];C(v!==void 0,"Expected pathSegment from flattenShape");let x=qi(o,t,[v])[0];C(x!==void 0,"Expected converted path segments at index 0"),r=r.set(f,{pathSegments:x,pathClosed:!0})}),{shapeContainerDescendantPaths:r,shapeContainerDescendantBasicShapes:i}}function yg(e,t,o,r){if(Hl(t)||fu(t)||Ee(t))for(let i of t.children)Xo(i)&&yg(e,i,o,r);else if(Da(t)){let n=yl(e,t,t)[0];C(n!==void 0,"Expected path from convertPathToCanvas");let a=n.pathSegments;if(r){let s=qi(e,r,[{pathSegments:a,pathClosed:t.pathClosed}])[0];C(s!==void 0,"Expected converted path at index 0"),a=s}o[t.id]={pathSegments:a,pathClosed:t.pathClosed}}}function Cg(e,t,o,r=!1,i=!1,n){if(Hl(t)||fu(t)||Ee(t))for(let a of t.children){let s=Jo(a)&&K(a.rotation)&&a.rotation%90!==0||r;Xo(a)&&Cg(e,a,o,s,i,n)}else if(!Da(t)&&Xo(t))if(r||i)o[t.id]=null;else{let a=oe.pointsAtOrigin(e.getRect(t));o[t.id]=a.map(l=>{let s=e.convertPointToCanvas(t,l);return n?e.convertPointToNode(n,s,!0):s})}}function yl(e,t,o,r=1){let i=[];return Array.isArray(o)?i=o:i=[o],i.map(({pathSegments:n,pathClosed:a})=>({pathSegments:n.map(s=>hg(e,t,s,r,void 0)),pathClosed:a}))}function hg(e,t,o,r=1,i){let n=ge.multiply(e.convertPointToCanvas(t,o,!0,i),r),a=ge.multiply(e.convertPointToCanvas(t,Qt.calculatedHandleIn(o),!0,i),r),l=ge.multiply(e.convertPointToCanvas(t,Qt.calculatedHandleOut(o),!0,i),r),s=ge.subtract(a,n),c=ge.subtract(l,n);return o.merge({...n,handleOutX:c.x,handleOutY:c.y,handleInX:s.x,handleInY:s.y})}function qi(e,t,o){return o.map(({pathSegments:r})=>r.map(i=>{let n=e.convertPointToNode(t,i),a=e.convertPointToNode(t,Qt.calculatedHandleIn(i)),l=e.convertPointToNode(t,Qt.calculatedHandleOut(i)),s=ge.subtract(a,n),c=ge.subtract(l,n);return i.merge({...n,handleOutX:c.x,handleOutY:c.y,handleInX:s.x,handleInY:s.y})}))}function VL(e,t,o,r){return r.map(({pathSegments:i})=>i.map(n=>{let a={x:n.x,y:n.y},l=e.convertPointFromNodeToDescendant(t,o,a),s=e.convertPointFromNodeToDescendant(t,o,Qt.calculatedHandleIn(n)),c=e.convertPointFromNodeToDescendant(t,o,Qt.calculatedHandleOut(n)),d=ge.subtract(s,l),u=ge.subtract(c,l);return n.merge({...l,handleOutX:u.x,handleOutY:u.y,handleInX:d.x,handleInY:d.y})}))}function Sg(e,t){return t.map(({pathSegments:o})=>o.map(r=>{let i=qe.convertPoint(e,r),n=qe.convertPoint(e,Qt.calculatedHandleIn(r)),a=qe.convertPoint(e,Qt.calculatedHandleOut(r)),l=ge.subtract(n,i),s=ge.subtract(a,i);return r.merge({...i,handleOutX:s.x,handleOutY:s.y,handleInX:l.x,handleInY:l.y})}))}function zB(e,t,o){let r=t.updateForPath(o);e.tree.current(t)?.set(r)}function Iye(e,t,o,r,i){let n=e.getParent(o.id),a=o.updateForPath(r);t.createPath(n?n.id:_t,{...a,id:i,rotation:o.rotation,...PL(o)})}function Nye(e,t,o){if(o===0)return t;let r=[],i=OB(t),n=Object.keys(i);for(let a=0,l=n.length;a<l;a++){let s=n[a];C(s!==void 0,"Expected id at index within loop bounds");let c=[],d=e.getNode(s),u=i[s];C(u!==void 0,"Expected selectors for id from grouped object");let f=d.pathSegments.length;for(let y=0,v=u.length;y<v;y++){let b=u[y];C(b!==void 0,"Expected value at index of selectors within loop bounds"),c.push(b);let x=b+1;x===f?c.push(0):c.push(x)}for(let y=0,v=c.length;y<v;y++){let b=c[y];C(b!==void 0,"Expected value in indexes array within loop bounds"),r.push({id:d.id,index:b})}}return r}function xye(e,t,o){for(let r of e)if(r.id===t&&r.index===o)return!0;return!1}function Vye(e,t,o,r,i,n){let a=yl(e,i,i),s=qi(e,o,a)[0];C(s!==void 0,"Expected converted path at index 0");let c=s,d=!fo.isLastSegment(o.pathSegments,o.pathClosed,r.index),u=fo.isLastSegment(i.pathSegments,i.pathClosed,n.index);(!d&&u||d&&!u)&&(c=fo.reverse(c));let y;d?y=yr.unshift(o.pathSegments,...c):y=yr.push(o.pathSegments,...c),t.deleteNode(i.id),zB(t,o,{pathSegments:y})}function WB(e,t,o){let r=SC(e,t);if(o===0){if(r)return ge.subtract(t,e);if(e.handleOutX!==0||e.handleOutY!==0){let n=Qt.calculatedHandleOut(e);return ge.subtract(n,e)}let i=Qt.calculatedHandleIn(t);return ge.subtract(i,e)}else{if(r)return ge.subtract(e,t);if(t.handleInX!==0||t.handleInY!==0){let n=Qt.calculatedHandleIn(t);return ge.subtract(n,t)}let i=Qt.calculatedHandleOut(e);return ge.subtract(i,t)}}function Pye(e,t){let o=e.getNode(t.id);if(!o)return null;let r=o.pathSegments[t.segmentIndex];if(!r)return null;let i=o.pathSegments[t.segmentIndex+1];if(!i)return null;let n=hg(e,o,r),a=hg(e,o,i),s=t.projectedTime<.5?Qt.point(n):Qt.point(a),c=WB(n,a,0);return ay(s,ge.add(s,c))}var BB=15;function wye(e,t,o,r){let i=5/r,n=BB/r,a=t.cache.canvasRect;if(a&&(a.x-o.x>i||a.y-o.y>i||o.x-(a.x+a.width)>i||o.y-(a.y+a.height)>i))return null;let l=fo.toBezierJS(t,t),s=e.convertPointToNode(t,o),c=-1,d=1/0,u=0;for(let x=0,D=l.length;x<D;x++){let B=l[x];C(B!==void 0,"Expected bezierCurve at index within loop bounds");let H=B.project(s),A=H.d,Z=H.t;A>=d||Z===0||Z===1||(d=A,c=x,u=Z)}if(c===-1)return null;let f=l[c];C(f!==void 0,"Expected curve at shortestIndex");let y=f.get(u),v=f.get(.5),b=ge.distance(s,v)<n;return{id:t.id,segmentIndex:c,distance:d,projectedPoint:y,projectedTime:u,midPoint:v,midPointInRange:b}}function PL(e){return{strokeEnabled:e.strokeEnabled,strokeAlignment:e.strokeAlignment,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,lineJoin:e.lineJoin,lineCap:e.lineCap,strokeMiterLimit:e.strokeMiterLimit,strokeDashArray:e.strokeDashArray,strokeDashOffset:e.strokeDashOffset,fillEnabled:e.fillEnabled,fillType:e.fillType,fillColor:e.fillColor,fillLinearGradient:e.fillLinearGradient,fillRadialGradient:e.fillRadialGradient,fillImage:e.fillImage,fillImageResize:e.fillImageResize,fillImageOriginalName:e.fillImageOriginalName,fillImagePixelWidth:e.fillImagePixelWidth,fillImagePixelHeight:e.fillImagePixelHeight,fillImagePositionX:e.fillImagePositionX,fillImagePositionY:e.fillImagePositionY,fillImageTileSize:e.fillImageTileSize,boxShadows:e.boxShadows,opacity:e.opacity}}function wL(e,t){let o=e.getRect(t),r={width:o.width,height:o.height};if(!Pe(t)||!qt(t))return r;let i=bc(t);if(i.perSide)i.top&&(r.height-=i.top),i.bottom&&(r.height-=i.bottom),i.right&&(r.width-=i.right),i.left&&(r.width-=i.left);else if(i.top){let n=i.top*2;r.width-=n,r.height-=n}return r.width=Math.max(1,r.width),r.height=Math.max(1,r.height),r}function Zye(e,t,o,r){e.getNodesWithTrait(o,Pt).forEach(n=>{let{descendantPaths:a}=gl(t,n,!0,o),l=a.valueSeq().toArray(),s=fo.boundingBox(l),c={...s};r==="horizontal"?(c.x=s.x+s.width,c.width=-s.width):(c.y=s.y+s.height,c.height=-s.height);let d=c.width>-1&&c.width<1?1:c.width,u=c.height>-1&&c.height<1?1:c.height,f=[s.x,s.x+s.width],y=[c.x,c.x+d],v=[s.y,s.y+s.height],b=[c.y,c.y+u],x=d/s.width,D=u/s.height;a.forEach((B,H)=>{let A=B.pathSegments.map(ne=>ne.merge({x:oo(ne.x,f,y,!1),y:oo(ne.y,v,b,!1),handleOutX:ne.handleOutX*x,handleOutY:ne.handleOutY*D,handleInX:ne.handleInX*x,handleInY:ne.handleInY*D}));C(t.tree===e);let Z=e.get(H);if(!Z)return;let re={pathSegments:A,pathClosed:Z.pathClosed},se={pathSegments:qi(e,Z,[re])[0],pathClosed:Z.pathClosed},ke=Z.updateForPath(se);Z.set(ke)})})}function Kye(e,t,o){let{tree:r}=e;t.forEach(i=>{let n=r.getRect(i),a=o(n);if(a.width&&a.width<1&&(a.width=1),a.height&&a.height<1&&(a.height=1),Ee(i))HB(e,i,a);else if(Xo(i))GB(e,i,a);else{let l=r.getParent(i.id),s=l?wL(r,l):null,c=i.updateForSize(a,s?{sizing:s,positioning:s,viewport:i.cache.viewportRect,layout:br(l)}:null);r.current(i)?.set(c)}})}function HB(e,t,o){let{tree:r}=e,i=r.getParent(t.id),n=i?r.getRect(i):null,a=t.updateForSize(o,n?{sizing:n,positioning:n,viewport:null,layout:br(i)}:null);a.sizeToFit=!1,r.current(t)?.set(a)}function GB(e,t,o){let{tree:r}=e,i=r.getRect(t),n=Jl.update(i,o,Mi(t)?K(t.aspectRatio):!1),a={...i,...n},l=a.width>-1&&a.width<1?1:a.width,s=a.height>-1&&a.height<1?1:a.height,c=[i.x,i.x+i.width],d=[a.x,a.x+l],u=[i.y,i.y+i.height],f=[a.y,a.y+s],y=l/i.width,v=s/i.height,{descendantPaths:b,descendantBasicShapes:x}=gl(e,t);b.forEach((D,B)=>{let A=qi(r,t,[D])[0].map(ne=>ne.merge({x:oo(ne.x+i.x,c,d,!1)-i.x,y:oo(ne.y+i.y,u,f,!1)-i.y,handleOutX:ne.handleOutX*y,handleOutY:ne.handleOutY*v,handleInX:ne.handleInX*y,handleInY:ne.handleInY*v})),Z=yl(r,t,{pathSegments:A,pathClosed:!0});C(e.tree===r);let re=r.get(B);if(!re)return;let se={pathSegments:qi(r,re,Z)[0],pathClosed:re.pathClosed},ke=re.updateForPath(se);re.set(ke)}),x.forEach((D,B)=>{if(D===null)return;let Z=D.map(pt=>r.convertPointToNode(t,pt)).map(pt=>({x:oo(pt.x+i.x,c,d,!1)-i.x,y:oo(pt.y+i.y,u,f,!1)-i.y})).map(pt=>r.convertPointToCanvas(t,pt)),re=r.get(B);if(!re)return;let Ie=Z.map(pt=>r.convertPointToNode(re,pt)),se=oe.boundingRectFromPoints(Ie),ke=oe.center(se),ne=Sc(re,ke),lt={x:ne.x-se.width/2,y:ne.y-se.height/2,width:se.width,height:se.height};re.set(lt)})}function kL(e,t,o,r,i,n){let{tree:a}=e,l=a.getNode(t.id),s=n.width>-1&&n.width<1?1:n.width,c=n.height>-1&&n.height<1?1:n.height,d=s/i.width,u=c/i.height;o.forEach((f,y)=>{let v=a.getNode(y);if(!v)return;let x={pathSegments:f.pathSegments.map(A=>A.merge({x:A.x*d,y:A.y*u,handleOutX:A.handleOutX*d,handleOutY:A.handleOutY*u,handleInX:A.handleInX*d,handleInY:A.handleInY*u})),pathClosed:f.pathClosed},B={pathSegments:VL(a,l,v,[x])[0],pathClosed:v.pathClosed},H=v.updateForPath(B);v.set(H)}),r.forEach((f,y)=>{if(f===null)return;let v=f.map(B=>({x:B.x*d,y:B.y*u})),b=a.getNode(y),x=v.map(B=>a.convertPointFromNodeToDescendant(l,b,B,!1)),D=oe.boundingRectFromPoints(x);e.tree.get(y)?.set(D)})}function RL(e,t,o,r,i,n=a=>a.canvasMatrix()){let a=r.width>-1&&r.width<1?1:r.width,l=r.height>-1&&r.height<1?1:r.height,s=[o.x,o.x+o.width],c=[r.x,r.x+a],d=[o.y,o.y+o.height],u=[r.y,r.y+l],f=a/o.width,y=l/o.height,v=i?{x:0,y:0}:t.rect;t.descendantPaths&&t.descendantPaths.forEach((b,x)=>{let B=(i?b.pathSegments:Sg(t.canvasMatrix.inverse(),[b])[0]??[]).map(se=>se.merge({x:oo(se.x+v.x,s,c,!1)-v.x,y:oo(se.y+v.y,d,u,!1)-v.y,handleOutX:se.handleOutX*f,handleOutY:se.handleOutY*y,handleInX:se.handleInX*f,handleInY:se.handleInY*y})),H=i?{pathSegments:B,pathClosed:b.pathClosed}:{pathSegments:Sg(t.canvasMatrix,[{pathSegments:B,pathClosed:b.pathClosed}])[0]??[],pathClosed:b.pathClosed},A=e.get(x);if(!A)return;let re={pathSegments:qi(e,A,[H])[0],pathClosed:A.pathClosed},Ie=A.updateForPath(re);A.set(Ie)}),t.descendantBasicShapes&&t.descendantBasicShapes.forEach((b,x)=>{if(b===null)return;let B=(i?b:b.map(ne=>qe.convertPoint(t.canvasMatrix.inverse(),ne))).map(ne=>({x:oo(ne.x+v.x,s,c,!1)-v.x,y:oo(ne.y+v.y,d,u,!1)-v.y})),H=i?B:B.map(ne=>qe.convertPoint(t.canvasMatrix,ne)),A=e.get(x);if(!A)return;let Z=H.map(ne=>qe.convertPoint(n(A).inverse(),ne)),re=oe.boundingRectFromPoints(Z),Ie=oe.center(re),se=Sc(A,Ie),ke={x:lu(se.x-re.width/2),y:lu(se.y-re.height/2),width:re.width,height:re.height};A.set(ke)})}function LL(e,t,o,r,i){if(o!==1)for(let[n]of r.parentsInitialState){let a=r.parentsInitialState.get(n);if(!a)continue;let l=[];for(let s of t)a.selectedNodeIds.has(s.id)&&l.push(s);EL(l,o,UB(e,n,o,r,i),!0)}}function FL(e,t){let o=new Map,r=new Map,i={},n=new Set;for(let a of e.tree.withoutDescendants(t)){let l=a.parentid;if(!l)continue;let s=e.tree.getNode(l);C(s,"Parent must exist"),$B(e,a,r,n),jB(e,a,s,o),i[l]??=[],i[l].push(a)}for(let[a,l]of o){let s=i[a];C(s,"Nodes must exist"),l.selectionBoundingFrame=e.tree.getBoundingFrameForNodes(s)}return{parentsInitialState:o,nodesInitialState:r,nonScalableNodes:n}}function $B(e,t,o,r){for(let{node:i,skipChildren:n}of t.walkWithSkipChildren()){if(o.has(i.id))continue;let a=i.id===t.id,l=e.tree.isInlineVectorNode(i),s=Pt(i)&&(l||a);if(!rH(i,a)){r.add(i.id),n();continue}let c=s?gl(e,i):void 0,d=Ee(i)?xL(e,i):void 0,u=Ee(i)||s?vL(i.draftOrCurrent()):void 0,f=$(i)?_B(i):void 0;o.set(i.id,{rect:oe.round(e.tree.getRect(i,!1),2),matrix:e.tree.transformMatrixToNode(i),codeComponentControlProps:f,scalableShapeStylesMap:u,...c,...d}),Ee(i)&&n()}}function _B(e){let t=M.reactComponentForIdentifier(e.codeComponentIdentifier);if(!(!t||!t.properties))return e.getControlProps(t.properties)}function jB(e,t,o,r){let i=r.get(o.id)??{matrix:e.tree.transformMatrixToNode(o).invertSelf(),selectedNodeIds:new Set,selectionBoundingFrame:{x:0,y:0,width:0,height:0}};i.selectedNodeIds.add(t.id),r.set(o.id,i)}function UB(e,t,o,r,i){let n=r.parentsInitialState.get(t);C(n,"Parent must be present in initial state");let a=n.selectionBoundingFrame,l={...a,width:a.width*o,height:a.height*o};return{initialRect:a,resizedRect:l,engine:e,tree:e.tree,initialState:r,anchorPoint:i??{x:.5,y:.5}}}function EL(e,t,o,r){if(e.length===0)return!1;let i=!1;for(let n of e){if(o.initialState.nonScalableNodes.has(n.id))continue;let a=iH(n)&&EL(n.children,t,o,!1),l=JB(n,o,t,a,r);i||=l||a}return i}function JB(e,t,o,r,i){let n=tH(e,o,i),a=XB(e,t,o,r,i,n);return e.set(n),(a||r)&&YB(e,t,o,i),a}function XB(e,t,o,r,i,n){return De(e)?ZB(e,o,t,i,n):Ee(e)?KB(e,o,t,i,n):Pt(e)?nH(e,o,t):$(e)?aH(e,o,t,i,n):Ae(e)?AL(e,o,t,r,i,n):!1}function ZB(e,t,o,r,i){let n=!1;if(!e.textFitViewBoxSize){oH(e,o.tree);let a=e.draftOrCurrent().updateForScale(t);Object.assign(i,a),n=!0}return e.widthType!==2&&(n=Ja("width",e,t,o,!1,r,i)||n),e.heightType!==2&&(n=Ja("height",e,t,o,!1,r,i)||n),n}function KB(e,t,o,r,i){let n=o.initialState.nodesInitialState.get(e.id),a=n?.shapeContainerDescendantPaths,l=n?.shapeContainerDescendantBasicShapes,s=n?.scalableShapeStylesMap;return C(s,"Shape container styles should be available in initial state"),C(a,"Shape container paths should be available in initial state"),C(l,"Shape container shapes should be available in initial state"),kL(o.engine,e,a,l,e,{width:e.width*t,height:e.height*t}),mg(o.tree,s,t),Ja("width",e,t,o,!0,r,i),Ja("height",e,t,o,!0,r,i),!0}function YB(e,t,o,r){if(r)qB(e,o,t);else if(ye(e)){let i={};e.left&&(i.left=ae(e.left,o)),e.right&&(i.right=ae(e.right,o)),e.top&&(i.top=ae(e.top,o)),e.bottom&&(i.bottom=ae(e.bottom,o)),e.set(i)}}function qB(e,t,o){if(!ye(e)&&!xc(e))return;let r=o.initialState.nodesInitialState.get(e.id);C(r,"Node must be present in initial state");let i=e.parentid?o.initialState.parentsInitialState.get(e.parentid):void 0;C(i,"Node parent must be present in the initial state"),i.selectedNodeIds.size===1?QB(e,t,o,r):eH(e,o,r,i)}function QB(e,t,o,r){let i=r.rect,n={...i,width:i.width*t,height:i.height*t},l=Pt(e)||Ee(e)?e.clone({rotation:0}):e,s=Up(i,o.anchorPoint),c=Up(n,o.anchorPoint),d=qe.convertPoint(l.originAdjustedMatrix(null,i),s),u=qe.convertPoint(l.originAdjustedMatrix(null,n),c),f=ge.subtract(d,u),y=oe.round(oe.offset(n,f),2);if(ye(e)){let{widthType:v,heightType:b,maxHeight:x,minHeight:D,maxWidth:B,minWidth:H,...A}=em(e.constraints(),y,o.tree.getParentSizeInfo(e,o.tree.getParent(e.id)),null,!1);e.set(A)}else e.set({x:y.x,y:y.y})}function eH(e,t,o,r){let i=ge.add(Up(t.initialRect,t.anchorPoint),t.initialRect),n=ge.add(Up(t.resizedRect,t.anchorPoint),t.resizedRect),a=ge.subtract(i,n),l=r.matrix??null,s=DL(l,t.initialRect),c=DL(l,oe.offset(t.resizedRect,a)),d=[s.x,s.x+s.width],u=[c.x,c.x+c.width],f=[s.y,s.y+s.height],y=[c.y,c.y+c.height],v=o.rect,b={x:oo(v.x,d,u,!1),y:oo(v.y,f,y,!1)},x={x:oo(v.x+v.width,d,u,!1),y:oo(v.y+v.height,f,y,!1)},D=oe.round(oe.fromTwoPoints(b,x));if(ye(e)){let B=em(e.constraints(),D,t.tree.getParentSizeInfo(e,t.tree.getParent(e.id)),null,!1);delete B.widthType,delete B.heightType,e.set(B)}else e.set({x:D.x,y:D.y})}function DL(e,t){if(!e)return t;let o=qe.convertPointsWithClipping(e,oe.cornerPoints(t));return oe.boundingRectFromPoints(o)}function tH(e,t,o){let r={};return ii(e)&&(r.borderWidth=ae(e.borderWidth,t),r.borderBottom=ae(e.borderBottom,t),r.borderLeft=ae(e.borderLeft,t),r.borderTop=ae(e.borderTop,t),r.borderRight=ae(e.borderRight,t)),dn(e)&&(r.boxShadows=OL(e.boxShadows,t)),Zo(e)&&(r.strokeWidth=ae(e.strokeWidth,t)),xo(e)&&(r.padding=ae(e.padding,t),r.paddingBottom=ae(e.paddingBottom,t),r.paddingLeft=ae(e.paddingLeft,t),r.paddingTop=ae(e.paddingTop,t),r.paddingRight=ae(e.paddingRight,t)),ti(e)&&(r.radiusBottomLeft=ae(e.radiusBottomLeft,t),r.radiusBottomRight=ae(e.radiusBottomRight,t),r.radiusTopLeft=ae(e.radiusTopLeft,t),r.radiusTopRight=ae(e.radiusTopRight,t)),Lr(e)&&(r.radius=ae(e.radius,t)),Ot(e)&&(r.gridColumnMinWidth=ae(e.gridColumnMinWidth,t),r.gridColumnWidth=ae(e.gridColumnWidth,t),e.gridRowHeightType==="fixed"&&(r.gridRowHeight=ae(e.gridRowHeight,t))),qt(e)&&(r.gap=ML(e.gap,t)),Vn(e)&&(r.formInputFontSize=zL(e.formInputFontSize,t),e.formInputFontLetterSpacingUnit==="px"&&(r.formInputFontLetterSpacing=ae(e.formInputFontLetterSpacing,t)),e.formInputFontLineHeightUnit==="px"&&(r.formInputFontLineHeight=ae(e.formInputFontLineHeight,t))),bs(e)&&(r.blur=ae(e.blur,t,0),r.backgroundBlur=ae(e.backgroundBlur,t,0)),Mo(e)&&e.fillType==="image"&&e.fillImageResize==="tile"&&(r.fillImageTileSize=ae(e.fillImageTileSize??1,t)),kr(e)&&(r.minWidth=jp(e.minWidth,t,o),r.maxWidth=jp(e.maxWidth,t,o),r.minHeight=jp(e.minHeight,t,o),r.maxHeight=jp(e.maxHeight,t,o)),r}function AL(e,t,o,r,i,n){if(!_e(e))return n.width=ae(e.width,t),n.height=ae(e.height,t),!0;let a=!1;return a=Ja("width",e,t,o,r,i,n)||a,a=Ja("height",e,t,o,r,i,n)||a,a}function oH(e,t){let o=e.getTextStylePresets(!1);for(let r of o){let i=t.getNode(r);Ri(i)&&e.draftOrCurrent().detachTextStylePreset(i,!1)}}function Ja(e,t,o,r,i,n,a){let l=e==="width"?"widthType":"heightType",s=t[l],c=r.initialState.nodesInitialState.get(t.id)?.rect;C(c,"node should have cached rect");let d=e==="width"?"gridItemFillCellWidth":"gridItemFillCellHeight";if(fs(t)&&t[d]&&n)return a[d]=!1,a[e]=ae(c[e],o),a[l]=0,!0;switch(s){case 0:return a[e]=ae(t[e],o),!0;case 4:return a[e]=ae(t[e],o,4),!0;case 1:return n?(a[e]=ae(t[e],o,4),!0):!1;case 3:return n?(a[e]=ae(c[e],o),a[l]=0,!0):!1;case 2:if(!i){let f=r.tree.getNodeParent(t),v=(f&&Eo(f)?f.layout:void 0)==="grid"?c[e]:t[e];return a[e]=ae(v,o),a[l]=0,!0}return!1;case 5:return!0;default:_(s)}}function rH(e,t){let o=$(e)?e.getSupportedLayout(M):void 0;return!(o?.width==="auto"&&o?.height==="auto"||ve(e)||ot(e)&&!t)}function iH(e){return!(!e.children||Ee(e)||Pt(e))}function ae(e,t,o=2){return K(e)?Yt(e*t,o):e}function ML(e,t){return K(e)?ae(e,t):R(e)?Yl(e,o=>ae(o,t)):e}function jp(e,t,o){if(E(e))return e;let[r,i]=yn(e);return Number.isNaN(r)||i==="%"&&!o?e:ar(ae(r,t,0),i)}function OL(e,t){if(!(!e||z(e)))return e.map(o=>o.type==="realistic"?o:Fl(o,{x:ae(o.x,t),y:ae(o.y,t),spread:ae(o.spread,t)}))}function nH(e,t,o){let r=o.initialState.nodesInitialState.get(e.id);return r?(RL(o.tree,{canvasMatrix:r.matrix,rect:r.rect,descendantPaths:r.descendantPaths,descendantBasicShapes:r.descendantBasicShapes},o.initialRect,o.resizedRect,!0,i=>{let n=o.initialState.nodesInitialState.get(i.id);return C(n,"Basic shape initial state must exist"),n.matrix}),r.scalableShapeStylesMap&&mg(o.tree,r.scalableShapeStylesMap,t),!0):!1}function Up(e,t){return{x:e.width*t.x,y:e.height*t.y}}function aH(e,t,o,r,i){let n=Ae(e)?AL(e,t,o,!1,r,i):!1,a=o.initialState.nodesInitialState.get(e.id)?.codeComponentControlProps;if(!a)return n;for(let l in a){let s=a[l];if(!(!s||z(s.value)))switch(s.type){case"borderradius":i[dt(l)]={...s,value:lH(s.value,t)};break;case"padding":i[dt(l)]={...s,value:cH(s.value,t)};break;case"gap":i[dt(l)]={...s,value:ML(s.value,t)};break;case"boxshadow":i[dt(l)]={...s,value:OL(s.value,t)};break;case"font":i[dt(l)]={...s,value:pH(s.value,t)};break;case"border":i[dt(l)]={...s,value:uH(s.value,t)};break;case"array":case"boolean":case"collectionreference":case"color":case"slot":case"cursor":case"customcursor":case"date":case"enum":case"eventhandler":case"file":case"link":case"linkrelvalues":case"multicollectionreference":case"number":case"object":case"pagescope":case"richtext":case"scrollsectionref":case"string":case"transition":case"fusednumber":case"image":case"trackingid":case"vectorsetitem":break;default:_(s)}}return n}function sH(e){return e.includes("%")}function lH(e,t){return z(e)||sH(e)?e:Yl(e,o=>ae(o,t))}function cH(e,t){return z(e)?e:Yl(e,o=>ae(o,t))}var dH={px:2,rem:3};function zL(e,t){if(E(e))return e;let[o,r]=K(e)?[e,"px"]:us(e);return ar(ae(o,t,dH[r]),r)}function pH(e,t){if(E(e))return e;let o=zL(e.fontSize,t);return{...e,fontSize:o,lineHeight:e.lineHeight?.[1]==="px"?[ae(e.lineHeight[0],t),"px"]:e.lineHeight,letterSpacing:e.letterSpacing?.[1]==="px"?[ae(e.letterSpacing[0],t),"px"]:e.letterSpacing}}function uH(e,t){return!e||j(e)?e:{...e,borderWidth:ae(e.borderWidth,t),borderTop:ae(e.borderTop,t),borderRight:ae(e.borderRight,t),borderBottom:ae(e.borderBottom,t),borderLeft:ae(e.borderLeft,t)}}var mH;(bi=>{function e(p){return p.some(h=>$L(h))}bi.canCopyNodes=e;function t(p){return p.some(h=>WL(h))}bi.canDuplicateNodes=t;function o(p,h){return e(h)&&l(p,h)}bi.canCutNodes=o;function r(p,h,g=void 0,S=!0){let{documentSettingsStore:T,codeGenerationStore:I,modalStore:N,canvasStore:w,scopeStore:P,treeStore:O}=p.stores,L=O.tree,G=L.withoutDescendants(L.getNodes(h)),Ne=P.active,Se=G.length===1?G[0]:void 0;if(!E(Se)&&ec(Se)&&!ve(Se)&&Pe(Se)&&le(Ne)){let Ce=L.getRect(Se),Dt=Bs(L,Ne,Se,Ce),co=bi.createVariant(p.stores,Ne,Se,Dt);return co?new Set([co.id]):void 0}let et=G.find(Ce=>ve(Ce));if(et){let Ce=O.tree.getScopeNodeFor(et);if(Ce&&J(Ce)){N.set({type:"DuplicateWebPage",source:"context_menu",duplicateFromId:Ce.id});return}}let Ve=G.map(Ce=>L.getRect(Ce)),be=new Map,Oe=new Set,vt=[],Ue=new Map,He=new Map,lo=0;if(G.forEach((Ce,Dt)=>{if(!WL(Ce))return;let co=L.getParent(Ce.id);if(We(Ce))if(co&&$(co)){if(!HS(co,M))return}else return;for(let mt of Ce.walk())Pe(mt)&&lo++;let ut=p.cloneNode(Ce,!1,!0,be);if(be.set(Ce.id,ut.id),He.set(Ce.id,ut.id),Oe.add(ut.id),Ue.set(Ce,ut),Ce.isMaster)nf({});else if(Ce.replicaInfo){let{master:mt}=Ce.replicaInfo,Ht=mt&&L.getNode(mt);Ht&&mu(Ht)||nf({})}else Xy(Ce)&&(!g||g.node&&Zy(g.node))&&eP(p,Ce,be);if(g){let mt=L.getParent(Ce.id);if(g.node){let Ht=g.node;if(ht(g.node)&&(Ht=zr(L,g.node),!Ht))return;if(Ju(p.tree,Ht,ut,P.active.id,M)){let hr=mt&&nr(mt)&&nr(Ht),vo=mt&&Pe(mt)&&Pe(Ht);if(hr||vo)p.moveNode(ut.id,Ht.id,g.insertionIndex);else if(ye(ut)){p.moveNode(ut.id,Ht.id,g.insertionIndex);let ta=L.getParentSizeInfo(ut,Ht,!0,!1),rn=ut.updateForSize(Ve[Dt]??{},ta);mt||(rn.left=0,rn.top=0),p.tree.current(ut)?.set(rn)}else bi.convertNodeToNewParent(p,ut,mt,g.node,g.insertionIndex,Ce);if(ro(g.node)){bf(p,ut,g.node,Ht,Oe,be);let gr=Le.getReplicaForTemplateNode(L,g.node);if(gr){let ta=Uo(gr.id,ut.id);He.set(Ce.id,ta)}}}}else bi.convertNodeToNewParent(p,ut,mt,g.node,g.insertionIndex,Ce),nr(mt)&&Ve[Dt]&&p.tree.current(ut)?.set(ut.updateForSize(Ve[Dt],null))}}),!g){let Ce=G.some(co=>L.isGroundNode(co)),Dt=G.some(co=>Jo(co)&&co.resolveValue("rotation")!==0);if(G.length){let co=G.map(po=>L.convertFrameToCanvas(po)),ut=oe.merge(...co),mt,Ht=Ie(p,h),hr=se(L,G),vo=G.some(po=>Pt(po)),gr=T.lastDuplicationMap,ta=!1;if(!vo&&Ht&&!hr&&!Dt&&gr){let po=gr.keys(),tu=p.tree.getBoundingFrameForNodes(L.getNodes(po));ta=!0,mt=ge.subtract(ut,tu)}let rn=mt||{y:0,x:0},eu=G[0];if(!vo&&Ce&&!ta&&eu){let po=AV(L,P.active,eu,ut,G.every(ni)?{x:p.tree.getRect(eu).width}:mt);rn=ge.subtract(po,ut)}for(let po of G){let{x:tu,y:FF,width:EF,height:AF}=L.getRect(po),$r=Ue.get(po);if(!$r)continue;let Za=p.tree.getParent(po.id),Ka=p.tree.getParent($r.id);if(Ka&&Za&&ro(Za)){bf(p,$r,Za,Ka,Oe,be);let Ug=Le.getReplicaForTemplateNode(L,Za);if(Ug){let zF=Uo(Ug.id,$r.id);He.set(po.id,zF)}}if(Ka&&nr(Ka))continue;let _g=tu+rn.x,jg=FF+rn.y,MF=p.tree.getParentSizeInfo(po,Za),OF=$r.updateForRect({rect:{x:Pt(po)?_g:Math.round(_g),y:Pt(po)?jg:Math.round(jg),width:EF,height:AF},parentSizeInfo:MF,constraintsLocked:!1,shouldGuessPinToBottom:!0,shouldGuessPinToRight:pr(p.tree,$r,Ka)});p.tree.current($r)?.set(OF),Ce&&L.isGroundNode($r)&&vt.push($r.rect())}}}T.lastDuplicationMap=He;let Kt=[];for(let Ce of Ue.values())Fn(L,Ce,be,!1),ni(Ce)&&Kt.push(Ce);if(Kt.length&&I.createVectorSet(Kt),vt.length){let Ce=oe.merge(...vt);w.scrollToCenter(oe.center(Ce))}return S&&Oe.size>0&&p.stores.selectionStore.set(Oe,{sticky:!0}),lo>0&&Ct("layout_frame",{source:"duplication",count:lo}),Oe}bi.duplicateNodes=r;function i(p){if(p.length>=50)return!0;let g=p.length;return p.forEach(S=>{g+=Af(S)}),g>=50}function n(p,h,g){let S=p.tree.withoutDescendants(h);function T(){let I=[],N=[];S.forEach(w=>{if(jo(w))if(fc(p.tree,w))N.push(w);else{let P=p.tree.get(w.originalid);P&&bg(P)&&I.push(P.id)}else bg(w)&&I.push(w.id)}),N.forEach(w=>w.set({visible:!1})),p.deleteNodes(I),p.stores.selectionStore.clear(),p.stores.treeStore.setHighlight(null)}g&&i(S)?p.stores.modalStore.set({type:"Confirmation",variant:"destructive",title:"Delete Selection",description:"You are about to delete the selected layers for all project collaborators.",confirmLabel:"Delete",onConfirm:T,source:"delete_node"}):T()}bi.deleteOrHideNodes=n;function a(p,h){p.tool.deleteAction?p.tool.deleteAction():h&&n(p,h,!0)}bi.deleteAction=a;function l(p,h){return p.tool.deleteAction?!!p.tool.canDelete&&p.tool.canDelete():!!h&&h.some(g=>gH(g))}bi.canDeleteOrHideNodes=l;function s(p,h){return Yr(h)?!1:Vt(h)?jo(h):!sr(h)}bi.canRenameNode=s;function c(p,h){return h.filter(g=>s(p,g)).length===1}bi.canRename=c;function d(p,h){return p.stores.chromeStore.contentPanelTab!=="Pages"||p.stores.scopeStore.active.id===p.tree.root.homePageNodeId||h.length!==0?!1:J(p.stores.scopeStore.active)||ct(p.stores.scopeStore.active)}bi.canRenameActivePage=d;function u(p,h){if(d(p,h)){let g=p.stores.scopeStore.active.id,S=BC(p.tree,g)?.id||g;gd(S)}else h.length===1&&(p.stores.chromeStore.layersExpanded=!0,p.stores.chromeStore.contentPanelTab="Layers",p.scheduler.runBeforeNextFrame(()=>{let g=document.querySelectorAll(".layerPanelPlaceholder.active");if(g.length===1&&g[0]){let S=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0}),T=g[0].parentElement;T&&T.dispatchEvent(S)}}))}bi.rename=u;async function f(p,h){h.length!==0&&await WI({key:"generate-layer-names",progress:{variant:"progress",text:"Renaming layers\u2026"},error:{variant:"error",text:"Failed to rename layers"},success:{variant:"success",text:"Done"},waitTime:1e3},()=>uL(p,h))}bi.renameLayers=f;function y(p,h){let g=p.tree,S=g.withoutDescendants(h),T=ea(S);B(g,h,T)&&zg(p,T,"front")}bi.sendToFront=y;function v(p,h){let g=p.tree,S=g.withoutDescendants(h),T=ea(S);D(g,h,T)&&zg(p,T,"back")}bi.sendToBack=v;function b(p,h){let g=p.tree,S=g.withoutDescendants(h),T=ea(S);B(g,h,T)&&Wg(p,T,1)}bi.sendForward=b;function x(p,h){let g=p.tree,S=g.withoutDescendants(h),T=ea(S);D(g,h,T)&&Wg(p,T,-1)}bi.sendBackward=x;function D(p,h,g){if(Og(h))return!1;if(!g){let S=p.withoutDescendants(h);g=ea(S)}return Bg(p,g,-1)}bi.sendBackwardEnabled=D;function B(p,h,g){if(Og(h))return!1;if(!g){let S=p.withoutDescendants(h);g=ea(S)}return Bg(p,g,1)}bi.sendForwardEnabled=B;function H(p,h){return so(p,h,0)}bi.addFrame=H;function A(p,h){return so(p,h,1)}bi.addStack=A;function Z(p,h){let g=p.stores.scopeStore.active,S=p.tree.withoutDescendants(h);return S.length>1&&tr(p,S)&&(!J(g)||S.every(T=>p.tree.isGroundNode(T)))}bi.canWrapInAutoSizedFrame=Z;function re(p,h,g){let S=H(p,h);C(S!==void 0,"new frame ID must be defined");let T=p.tree.getNode(S);C(T!==null,"new frame must exist");let I=p.tree.withoutDescendants([T]);return UP(p,I,g),T}bi.wrapInAutoSizedFrame=re;function Ie(p,h){let{documentSettingsStore:g,selectionStore:S}=p.stores;if(!g.lastDuplicationMap||!js(h,S.ids))return!1;let T=[...g.lastDuplicationMap.values()];if(!js(S.ids,T))return!1;let I=[...g.lastDuplicationMap.keys()];return js(S.previousIds,I)}function se(p,h){let g=p.getCommonGroundNode(h);return!!g&&nr(g)}function ke(p,h,g){if(g!==null){let S=h.flatMap(w=>p.convertCornerPointsToCanvas(w)),T=p.transformMatrixToNode(g),I=(Ns(g)?T:qe.flatProjectionMatrix(T)).invertSelf(),N=S.map(w=>qe.convertPoint(I,w));return oe.roundToOutside(oe.boundingRectFromPoints(N))}return oe.roundToOutside(oe.merge(...h.map(S=>p.convertFrameToCanvas(S))))}bi.getUntransformedBoundingRect=ke;function ne(p,h,g,S,T,I){let N={top:g.y,left:g.x,width:g.width,height:g.height,fillEnabled:!1},w=T.length===1?T[0]:null;C(w!==void 0,"node must be defined",T),S&&Object.assign(N,lt(h,g,S,w,I));let P=S===null,O=J(p.stores.scopeStore.active);return N.overflow=P||O?"clip":"visible",N}function lt(p,h,g,S,T){let I=p.getViewportRect(g),N=p.getRect(g),w=S?p.getParentSizeInfo(S,g):{sizing:N,positioning:N,viewport:I,layout:br(g)},P=!!S&&ye(S),O=pt(S,T),L=Ev({rect:h,parentSizeInfo:w,currentConstraints:O,constraintsLocked:P,shouldGuessPinToBottom:Nn(p,null,g),shouldGuessPinToRight:pr(p,null,g),floatingPosition:null});return T&&g?{...ya(S,g),...U(S),...L,widthType:qt(g)?3:1,heightType:2,width:1,left:0}:{...ya(S,g),...U(S),...L}}function pt(p,h){let S=!!p&&ye(p)?p.constraints():void 0;if(!S)return;let T={...S};return h?(T.widthType===5&&(T.widthType=2),T.heightType===5&&(T.heightType=2)):(du(T.widthType)&&(T.widthType=0),du(T.heightType)&&(T.heightType=0)),T}function U(p){if(!(!p||!Ae(p)))return{width:p.width,height:p.height}}function it(p,h,g,S,T,I,N,w,P){let O=I?.id??_t;switch(h){case 0:{let L=p.createFrame(O,{id:g,...P},S);return p.moveNode(L.id,O,N),C(L&&yt(L),"Fail to create a wrapping frame: the created frame should have the `children` field"),w.forEach(G=>{let Ne=Ti(p.tree,G,I,L);p.moveNode(G.id,L.id),p.tree.current(G)?.set(Ne)}),L}case 1:{let L=ao(p,g,O,P,w,T);return p.moveNode(L.id,O,N),L}case 2:{let L=p.createShapeContainer(O,{id:g,...P});return p.moveNode(L.id,O,N),C(L&&yt(L),"Fail to create a wrapping frame: the created frame should have the `children` field"),w.forEach(G=>{let Ne=Ti(p.tree,G,I,L);p.moveNode(G.id,L.id),p.tree.current(G)?.set(Ne)}),L}default:_(h)}}function ao(p,h,g,S,T,I,N){let w=Vf(p,T,I),P=p.createNode(di,{id:h,...S,...w},g,N);C(jt(P),"Fail to create stack: the created node should have stack layout");let{stackDirection:O}=w;return vP(p,h,I,T,O),P}function so(p,h,g){let S=p.tree;if(!tr(p,h))return;let T=S.sortVisually(S.withoutDescendants(h)),I=T[0]?S.getParent(T[0].id):null,N=I&&ro(I),w=N?p.tree.getNode(I.originalid):I,P=!0,O=N?T.map(be=>{if(!Vt(be))return be;let Oe=p.tree.getNode(be.originalid);return C(Oe,"Fail to create a wrapping frame: the original node must exist"),P&&(P=!Oe.cache.visible),Oe}):T,L=I?.children.findIndex(be=>T.includes(be))??-1,G=S.newId(),Ne=ke(S,O,w),Se=ne(p,S,Ne,w,O,g===1),et=it(p,g,G,O[0]?.id,Ne,w,L,O,Se),Ve=G;if(N){C(I,"Fail to create a wrapping frame: parentNode should not be null"),C(ht(I),"Fail to create a wrapping frame: parentNode should be a replica node"),P&&Tf(p,et,I,w);let be=Le.getReplicaForTemplateNode(p.tree,I);C(be,"Fail to create a wrapping frame: replica must exist");let Oe=ke(S,T,I),vt=ne(p,S,Oe,I,T,g===1);Es(S,be,et.id,vt),Le.replicaWithChanges(p.tree,be.draftOrCurrent());let Ue=Uo(be.id,G);Ve=Ue;let He=p.tree.get(Ue);if(C(He&&yt(He),"Fail to create a wrapping frame: replica wrapping node should exist and should have the `children` field"),g===0||g===2)T.forEach(lo=>{let Kt=Ti(S,lo,I,He);p.tree.current(lo)?.set(Kt)});else if(g===1){C(Pe(et),"Fail to create a wrapping frame: the wrapping node should be a FrameNode"),C(jt(et),"Fail to create a wrapping frame: the wrapping node should have stack layout");let lo=Vf(p,T,Oe);Es(S,be,et.id,lo),CP(p,et,lo.stackDirection,T,Oe)}}return p.stores.selectionStore.set(Ve),G}function Ci(p){return ls(p)||xe(p)||Ye(p)||Nr(p)||Yr(p)||We(p)?!1:Vt(p)?jo(p):!0}function tr(p,h){if(h.length===0)return!1;switch(p.tool.enum){case 0:case 1:case 6:break;default:return!1}if(!h.every(N=>Ci(N)))return!1;let g=p.tree,S=g.withoutDescendants(h),[T,I]=S.reduce(([N,w],P)=>{let O=g.isInlineVectorNode(P)||!Pt(P)&&!Ye(P),L=S[0]?g.getParentId(S[0]):void 0,G=g.getParentId(P);return[N&&L===G,w&&O]},[!0,!0]);return T&&I}bi.wrappingEnabled=tr;function Hr(p){return p.some(Ao)}bi.overflowEnabled=Hr;function Qe(p){p.stores.chromeStore.removePanelOverrides(),p.stores.chromeStore.chromeIsVisible=!0,p.stores.chromeStore.pagesExpanded=!0,p.stores.chromeStore.contentPanelTab="Pages";let h=new Set(p.stores.scopeStore.getDesignPageNodes().map(S=>S.resolveValue("name")??"")),g=p.createNode(Cb,{name:Mr("Design",h,{startIndex:h.size+1,omitCountIfFirst:!0})},p.tree.root.id);return p.stores.scopeStore.select(g.id,{keepHistory:!1}),p.scheduler.runAtEndOfFrame(()=>gd(g.id)),g.id}bi.createDesignPage=Qe;function he(p){p.stores.chromeStore.removePanelOverrides(),p.stores.chromeStore.chromeIsVisible=!0,p.stores.chromeStore.pagesExpanded=!0,p.stores.chromeStore.contentPanelTab="Pages";let h=new Set(p.stores.scopeStore.getCanvasPageNodes().map(I=>I.resolveValue("name")??"")),g=p.createNode(Rv,{name:Mr("Canvas",h,{startIndex:h.size+1,omitCountIfFirst:!1})},p.tree.root.id),S=Tb("iPhone_390_844"),T=p.createFrame(g.id,{width:S.screenWidth,height:S.screenHeight,name:S.title,framePreset:S.id,isScreen:!0});p.stores.codeGenerationStore.updateComponent(T.id).catch(ra),p.stores.scopeStore.select(g.id,{keepHistory:!1}),wV({pageId:g.id}),p.scheduler.runAtEndOfFrame(()=>gd(g.id))}bi.createCanvasPage=he,bi.toggleContentManagementScope=p=>{let{chromeStore:h,selectionStore:g,scopeStore:S,analyticsStore:T,siteSettingsStore:I,codeEditorStore:N}=p.stores,w=h.mainView;if(w===2){S.selectPreviousActiveScope();return}switch(w){case 0:p.cancelTool();break;case 5:h.setLocalizationsVisible(!1);break;case 6:T.close();break;case 4:I.close();break;case 1:N.closeEditor();break;case 3:break;default:_(w)}let P=p.tree.getContentManagementNode()?.loaded;if(P&&P.children.length>0){let O=S.active,L=g.nodes.at(0);S.select(P.id,{keepHistory:!1});let G=yH(p,O,L);if(G){g.set(G);return}if(g.ids.length===0){let Ne=P.children[0];Ne&&g.set(Ne.id)}}else h.toggleContentManagementSidebar()};function Gr(p,h){p.stores.chromeStore.chromeIsVisible=!0,p.stores.scopeStore.select(hc,{keepHistory:!1}),p.stores.selectionStore.set(h)}bi.openContentCollection=Gr;function or(p,h,g,S){p.stores.modalStore.set({type:"CreateComponent",source:h,onSuccess:T=>{let I=T.resolveValue("name");if(nt(I)||nt(p.tree.getEntityRootNode()))return;let N=Td(p.tree,I,g??ys);Ln(p.tree,N,T.id),S?.(T)}})}bi.makeComponent=or;function Si(p,h){return DF(p,h)}bi.canMakeComponent=Si;function So(p,h){if(h.length!==1||hn(p.stores.scopeStore.active))return;let g=h[0];g&&Ml(g)&&Le.canMakeMaster(g)&&p.tree.current(g)?.set({isMaster:!0,replicaInfo:null,originalid:null})}bi.makeMaster=So;function Rt(p,h){for(let g of h)if(g.originalid&&ht(g)&&Le.overrideKeys(p,[g]).size>0)return!0;return!1}bi.canResetToMasterValues=Rt;function vi(p,h){for(let g of h){if(!g.originalid)continue;let T=Le.getReplicaForTemplateNode(p,g);T&&Le.resetOverrides(p,T,g)}}bi.resetToMasterValues=vi;function Xa(p,h,g){for(let S of h){if(!ht(S))continue;let T=Le.getReplicaForTemplateNode(p,S);T&&Le.resetOverridesByProperty(p,T,S,g)}}bi.resetPropertiesToMasterValues=Xa;function Yn(p,h){if(h.length===0)return!1;for(let g of h){if(Pr(g))return!1;if(ec(g)){let S=p.tree.getScopeNodeFor(g);if(!S)return!1;if(le(S)){let{hover:T,pressed:I}=S.getGesturesForTopLevelVariant(g);return!(T||I)}return J(S)&&!ve(g)}if(uo(g))return!0}return!1}bi.canDetachFromMaster=Yn;function fr(p,h){let g=new Map;h.filter(uo).forEach(T=>{if(!CL(T,{allowVariants:!0}))return;let I=T.clone({parentid:null});I.replicaInfo=null,tS(I)&&(I.isVariant=void 0);for(let P of I.walk())P.originalid=null;C(T.id!==I.id),p.tree.insertNode(I);let N=p.tree.getParent(T.id)||p.stores.scopeStore.active,w=N.children.indexOf(T);p.tree.removeNode(T),p.moveNode(I.id,N.id,w),p.tree.current(I)?.set(I.constraintValues()),g.set(T.id,I.id)}),Fn(p.tree,p.tree.root,g,!1);let S=p.stores.selectionStore.ids.map(T=>g.get(T)??T);return p.stores.selectionStore.set(S),g}bi.detachFromMaster=fr;function Zt(p,h){if(!qn(h))return;let g=Il(h);h.filter(cr).forEach(T=>T.set({visible:!g})),p.stores.treeStore.setHighlight(_t)}bi.visibility=Zt;function qn(p){return p.some(cr)}bi.visibilityEnabled=qn;let Il=p=>p.every(h=>h.isVisible());function kg(p){return Il(p)?"Hide":"Show"}bi.visibilityTitle=kg;function Rg(p,h){let g=p.withoutDescendants(h);if(!Nl(g))return;let S=!xl(g),T=new Set;for(let I of g){if(!vn(I))continue;let N=I.cache.lockedByParent,w=S===N?void 0:S;I.set({locked:w});for(let P of I.descendants())T.add(P)}for(let I of T)vn(I)&&I.locked!==void 0&&I.set({locked:void 0})}bi.toggleLock=Rg;function Nl(p){return p.some(vn)}bi.toggleLockEnabled=Nl;function xl(p){return p.some(h=>vn(h)&&Ar(h))}function Dg(p){return xl(p)?"Unlock":"Lock"}bi.toggleLockTitle=Dg;function Vl(p){return p.every(ni)}bi.copyURLEnabled=Vl;function Pl(p){return p.length>0&&p.every(T=>on(T))?`Remove ${p.length>1?"Viewboxes":"Viewbox"}`:`Remove ${p.length>0&&p.find(T=>!nr(T))===void 0?"Stack":"Frame"}${p.length>1?"s":""}`}bi.removeFrameTitle=Pl;function Lg(p,h){Qn(p,h)&&IF(p,h)}bi.removeFrame=Lg;function Qn(p,h){if(h.length===0)return!1;let g=p.stores.scopeStore.active.id;return h.every(S=>{if(!Pe(S)&&!nr(S)&&!on(S)||!S.children||S.children.length===0||ir(S)||uo(S)||Vt(S)&&!jo(S))return!1;let T=p.tree.getParent(S.id);if(!T)return!0;for(let I of S.children)if(!Ju(p.tree,T,I,g,M))return!1;return!0})}bi.removeFrameEnabled=Qn;function on(p){return Ee(p)&&!ni(p)}function Fg(p,h){h.forEach(g=>{let S=p.getParentSizeInfo(g);if(g.intrinsicWidth!==null&&g.intrinsicHeight!==null){let T={width:g.intrinsicWidth,height:g.intrinsicHeight},I=T.width/T.height;if(ls(g))g.set(EI(g,T,{aspectRatio:I}),p);else if(Mi(g)&&g.aspectRatio){g=g.set({aspectRatio:null},p);let N=g.updateForSize(T,S);N.aspectRatio=I,g.set(N,p)}else g.set(g.updateForSize(T,S),p)}})}bi.resetToIntrinsicSize=Fg;function Ti(p,h,g,S){let T=p.getRect(h),I=p.getOriginPoint(h),N=p.convertPointToCanvas(h,{x:T.width*I.x,y:T.height*I.y});if(S){let L=p.transformMatrixToNode(S),G=Ns(S)?L:qe.flatProjectionMatrix(L);N=qe.convertPoint(G.inverse(),N)}let w={...T,x:N.x-T.width*I.x,y:N.y-T.height*I.y},P=h.updateForRect({rect:w,parentSizeInfo:p.getParentSizeInfo(h,S),constraintsLocked:!1,shouldGuessPinToBottom:S?Nn(p,h,S):!0,shouldGuessPinToRight:pr(p,h,S)});if(nr(S)||(P.widthType===3&&(P.widthType=0,P.width=T.width),P.heightType===3&&(P.heightType=0,P.height=T.height)),Jo(h)){let L=h.resolveValue("rotation")-bF(p,g,S);L!==0&&(P.rotation=L)}return S&&qt(S)&&!io(h)&&!lr(h)&&(P.top=null,P.left=null,P.bottom=null,P.right=null),Object.assign(P,ya(h,S)),P}bi.convertNodeToNewParentUpdate=Ti;function Eg(p,h,g,S,T=-1,I){let{tree:N}=p,w=h;if(Vt(h)&&(w=zr(N,h),!w))return null;let P=S;if(S&&ht(S)&&(P=zr(N,S),!P))return null;let O=g;if(g&&ht(g)&&(O=zr(N,g),!O))return null;let L=Ti(N,I??w,Vt(h)?O:g,Vt(h)?P:S);if(p.tree.current(w)?.set(L),p.moveNode(w.id,P?P.id:p.stores.scopeStore.active.id,T),w.id!==h.id){C(g,"Current parent must exist when editing variants");let Ne=Le.getReplicaForTemplateNode(N,g);C(Ne,"The current parent should located in a variant node");let Se=S?Le.getReplicaForTemplateNode(N,S):null;if(Ne.id===Se?.id){let et=Ti(N,h,g,S);N.current(h)?.set(et)}}return{originalNode:w,originalCurrentParent:O,originalNewParent:P}}bi.convertNodeToNewParent=Eg;function wl(p,h){if(!Vi(p)&&!Ar(p)&&(h.push(p.id),!!p.children))for(let g of p.children)wl(g,h)}function Ag(p,h){let g=new Set;return h.forEach(S=>{let T=p.getParent(S.id);T&&g.add(T.id)}),g}function V0(p,h){let g=p.withoutDescendants(p.getNodes(h));return Ag(p,g).size>0}bi.canSelectAncestor=V0;function P0(p,h){Mg(p,h,"parent")}bi.selectParent=P0;function w0(p,h){Mg(p,h,"groundNode")}bi.selectGroundNode=w0;function Mg(p,h,g){let{tree:S}=p,T=S.withoutDescendants(S.getNodes(h)),I=null;if(g==="groundNode"){let L=new Set(T.map(G=>S.getGroundNodeFor(G).id));L.size>0&&(I=Array.from(L))}else{let L=Ag(S,T);L.size>0&&(I=Array.from(L))}if(!I)return!1;let{selectionStore:N,overlayStore:w,treeStore:P}=p.stores;N.set(I,{sticky:!0,switchToLayers:!0});let O=T.length===1?T[0]:null;return O&&w.activeOverlays.has(O.id)&&w.exitEditMode(N,!1),P.setHighlight(null),!0}bi.selectAncestor=Mg;function k0(p,h){let g=p.tree,S=[];if(p.tool.selectAll){p.tool.selectAll();return}else{let T=h.map(I=>{let N=g.get(I);if(Pt(N)){let P=cI(g,N);return P&&g.isGroundNode(P)?P.id:_t}let w=g.getGroundFrameAncestor(I,!0);return w!==null?w.id:_t});if(new Set(T).size===1&&T[0]!==null){let I=T[0];S=g.getSubtreeNodes(I).filter(N=>Ar(N)?!1:N.id!==I).map(N=>N.id)}if(S.length===0)for(let I of p.stores.scopeStore.active.children)wl(I,S)}p.stores.selectionStore.set(S)}bi.selectAll=k0;function R0(p,h){let g=new Set;for(let S of h){let T=p.tree.get(S);if(!T)continue;let I=p.tree.getSiblingsIncludingSelf(T);for(let N of I)g.add(N.id)}p.stores.selectionStore.set(g)}bi.selectAllSiblings=R0;function D0(p,h){return p.tree.getNodes(h).some(g=>yt(g)&&g.children.length>0)}bi.canSelectChildren=D0;function L0(p,h){let g=new Set;for(let S of h){let T=p.tree.get(S);if(!T)continue;let I=ga(T);for(let N of I)g.add(N.id)}g.size>0&&p.stores.selectionStore.set(g)}bi.selectAllChildren=L0;function F0(p,h){let g=h.length>0?p.tree.getNodes(h):p.stores.scopeStore.active.getGroundNodes(),S=[];g.map(w=>{Me(w)?S.push(...p.tree.getSiblingsIncludingSelf(w)):S.push(w)});let T=new Set,I=new Set,N=w=>{if(!T.has(w.id)){if(Me(w)&&I.add(w.id),w.children)for(let P of w.children)N(P);T.add(w.id)}};for(let w of S)N(w);p.stores.selectionStore.set(I)}bi.selectAllTextNodes=F0;function E0(p,h){let[g]=p.tree.getNodes(h);if(!g||!Me(g))return;let S=[],T=De(g)?Xr(g.getTextStylePresets(!1)):void 0,I=Xr(g.getFonts(!1)),N=Xr(g.getFontSizes(!1).map(P=>Fi(P)?ar(...P):K(P)?ar(P,"px"):P)),w=Xr(g.getTextColors(!1));if(!(rs(T)||nn(T))&&!(rs(I)||nn(I))&&!(rs(N)||nn(N))&&!(rs(w)||nn(w))){for(let P of p.stores.scopeStore.active.walk())ro(P)||!Me(P)||(De(P)?Xr(P.getTextStylePresets(!1)):void 0)!==T||Xr(P.getFonts(!1))!==I||Xr(P.getFontSizes(!1).map(Se=>Fi(Se)?ar(...Se):K(Se)?ar(Se,"px"):Se))!==N||Xr(P.getTextColors(!1))!==w||S.push(P);p.stores.selectionStore.set(S)}}bi.selectAllTextNodesWithSameFontStyles=E0;function A0(p,h){let g=p.tree.getNodes(h);C(h.length===1,"Cannot have multiple layers selected");let[S]=g;if(!S||!Pe(S))return;let T=[],N=aS(p.tree,S.id)??p.stores.scopeStore.active;for(let w of N.walk())Pe(w)&&SF(S,w,p.tree)&&T.push(w);p.stores.selectionStore.set(T)}bi.selectAllLayersWithSameFill=A0;function SF(p,h,g){if(_o(p)&&!p.fillEnabled||_o(h)&&!h.fillEnabled)return!1;let{fillType:S}=p;if(S!==h.fillType||S===void 0)return!1;switch(S){case"color":return!R(p.fillColor)||!R(h.fillColor)?!1:ia.equals(If(p.fillColor,g,void 0),If(h.fillColor,g,void 0));case"linear-gradient":return p.fillLinearGradient&&h.fillLinearGradient?p.fillLinearGradient.equals(h.fillLinearGradient):!1;case"radial-gradient":return p.fillRadialGradient&&h.fillRadialGradient?p.fillRadialGradient.equals(h.fillRadialGradient):!1;case"conic-gradient":return p.fillConicGradient&&h.fillConicGradient?p.fillConicGradient.equals(h.fillConicGradient):!1;case"image":return p.fillImage===h.fillImage;default:_(S)}}function Og(p){return p.some(h=>Tc(h)?Vt(h)?!jo(h):!1:!0)}function ea(p){let h={};return p.forEach(g=>{let S=g.parentid?g.parentid:os,T=h[S];T||(T=[],h[S]=T),T.push(g)}),h}function zg(p,h,g){let S=p.tree;for(let T in h){let I=T===os?S.root:S.get(T);if(!I||!h[T])continue;let N=S.sortVisually(h[T]);g==="back"&&N.reverse();let w=g==="front"?-1:0,P=ro(I)&&Wl(I);N.forEach(O=>{let L=O.originalid?S.get(O.originalid):O;C(L,"Cannot send",O.id,"backward/forward: original node must exist."),P&&Tc(L)?Zu(L.id,I,w):p.tree.moveNodeIndex(L,w)})}}function vF(p,h,g){let S=p.tree.getParent(g.id);if(!S)return null;let T=S.children.indexOf(g),I=h==="backward"?T-1:T+1,N=S.children[I];if(!N||!Oi(N))return null;let w=p.tree.convertFrameToCanvas(g),P=p.tree.convertFrameToCanvas(N);if(h==="backward")return{...w,y:P.y};let O=P.height-w.height;return{...w,y:P.y+O}}function TF(p,h,g){let S=vF(p,h,g),{canvasStore:T}=p.stores;!S||oe.containsRect(T.getCanvasVisibleRectTakingOverlaysIntoAccount(),S)||T.zoomToCenter(S,{zoom:T.zoom,maxZoom:.5,animated:!0})}function Wg(p,h,g){let S=p.tree,T=Object.keys(h).length===1;for(let I in h){let N=I===os?S.root:S.get(I);if(!N||!yt(N))continue;let w=ro(N)&&Wl(N),P=h[I],O=T&&P?.length===1,L=ri(N)?N.getChildrenInVisualOrder():N.children,G=!1;for(let Ne=0,Se=L.length;Ne<Se;Ne++){let et=g===1?Se-Ne-1:Ne,Ve=L[et];if(!P?.includes(Ve))G=!0;else if(G)if(w&&Tc(Ve))C(Ve.originalid,"Cannot send nodes: nodes in a replica variant parent must have originalid."),Zu(Ve.originalid,N,et+g);else{O&&Vd(S,Ve)&&TF(p,g===-1?"backward":"forward",Ve);let Oe=Ve.originalid?S.get(Ve.originalid):Ve,vt=N.originalid?S.get(N.originalid):N;C(Oe,"Cannot send node",Ve.id,": original child node does not exist."),C(vt,"Cannot send node",N.id,": original parent node does not exist."),p.moveNode(Oe.id,vt.id,et+g)}}}}function Bg(p,h,g){for(let S in h){let T=S===os?p.root:p.get(S);if(!T||!yt(T))continue;let I=h[S],N=ri(T)?T.getChildrenInVisualOrder():T.children,w=!1;for(let P=0,O=N.length;P<O;P++){let L=g===1?O-P-1:P,G=N[L];if(!I?.includes(G))w=!0;else if(w)return!0}}return!1}function bF(p,h,g){let S=0,T=0;return h&&(S=p.totalAncestorRotation(h)),g&&(T=p.totalAncestorRotation(g)),Math.round(T-S)}function M0(p){if(p.length!==1)return!1;let h=p[0];return h&&Da(h)&&!h.originalid}bi.reversePathDirectionEnabled=M0;function O0(p,h){let g=p.current(h);g&&g.set({pathSegments:fo.reverse(g.pathSegments)})}bi.reversePathDirection=O0;function z0(p,h){let g=_s(h,p);return g.length===0?!1:g.every(S=>Pt(S)&&!S.originalid&&ga(S).length>0)}bi.canUngroup=z0;function IF(p,h){if(h.length===0)return;let g=p.tree,S=g.sortVisually(_s(h,g)),T=g.withoutDescendants(S),I=[];return T.forEach(N=>{if(!yt(N))return;let w=N,P=null;if(Vt(N)){if(w=zr(g,N),!w)return;P=Le.getReplicaForTemplateNode(g,N)}let O=g.getParent(N.id);if(N.children.length>0){let L=g.getIndex(N),G=w?.id??N.id;[...ga(N)].forEach((Se,et)=>{let Ve=Se;if(Vt(Se)&&(Ve=zr(g,Se),!Ve))return;if(ot(Ve)){g.removeNode(Ve);return}let be=O,Oe=be;if(be&&ht(be)&&(Oe=zr(g,be),!Oe))return;let vt=bi.convertNodeToNewParentUpdate(g,Ve,w,Oe);if(p.moveNode(Ve.id,Oe?.id??null,L+et,G),p.tree.current(Ve)?.set(vt),G=Ve.id,P){let Ue=bi.convertNodeToNewParentUpdate(g,Se,N,be);p.tree.current(Se)?.set(Ue)}I.push(Se.id)}),p.deleteNode(w.id)}}),p.stores.selectionStore.set(I),I}bi.ungroup=IF;function W0(p){return!p.hasPreferredSize(M)}bi.canSetDefaultSize=W0;function B0(p,h){if(h.hasPreferredSize(M))return;let g=h.getPreferredSize(M),S={aspectRatio:null};g.width==="auto"?(S.width=1,S.widthType=2):K(g.width)&&(S.width=g.width,S.widthType=0),g.height==="auto"?(S.height=1,S.heightType=2):K(g.height)&&(S.height=g.height,S.heightType=0),ye(h)&&K(h.top)&&K(h.bottom)&&(S.bottom=null),ye(h)&&K(h.left)&&K(h.right)&&(S.right=null),kP(h,S,"context_menu_default_size_item"),h.set(S,p.tree)}bi.setDefaultSize=B0;function NF(p,h){if(!p.stores.toolStore.isDefaultToolActive)return!1;let g=_s(h,p.tree);return g.length===0?!1:g.every(S=>Pt(S)&&!S.originalid)}bi.canJoinInGroup=NF;function H0(p,h){let g=p.tree;if(C(h.length>0,"No nodes"),!NF(p,h))return;let S=_s(h,g),T=g.sortVisually(g.withoutDescendants(S)),I=T[0],N=I?g.getParent(I.id):void 0,w=N?N.id:_t,P=I?g.getIndex(I):void 0,O=g.newId();p.createShapeGroup(w,{id:O},P),T.forEach(L=>{let G=bi.convertNodeToNewParentUpdate(g,L,g.getParent(L.id),N);p.moveNode(L.id,O),p.tree.current(L)?.set(G)}),p.stores.selectionStore.set(O)}bi.joinInGroup=H0;function G0(p,h){if(h.originalid)return null;let g={width:h.width,height:h.height},S=NP(h.svg,FI.createEmpty,g,h);if(S){S.name=h.name||h.originalFilename,S.parentid=h.parentid;let T=p.cloneNode(S),I=h.parentid===null,N=I?"rgb(255,255,255)":"transparent",{aspectRatio:w,...P}=h.constraintValues();p.tree.current(T)?.set({...P,width:S.width,height:S.height,fillEnabled:I,fillColor:N});let O=p.tree.getParent(h.id);if(O!==null&&yt(O)){let L=O.children.indexOf(h);p.moveNode(T.id,O.id,L)}return Hg(p,T.id,g),p.deleteNode(h.id),T.id}return null}bi.convertSVGToShape=G0;function Hg(p,h,g){let S=p.tree.get(h);if(!Ee(S))return;let T=S.width>=S.height?"width":"height",I=T==="width"?"height":"width",N=g[T]/S[T];if(N===1)return;LL(p,[S],N,FL(p,[S]),xF(S));let w=p.tree.current(S);C(w,"Node must exist after scaling");let P=g[I]-w[I];if(P===0)return;w.set({[I]:g[I]});let O=I==="width"?"x":"y";for(let L of w.children){let G=p.tree.current(L);!G||!xc(G)||G.set({[O]:G[O]+P/2})}}bi.scaleVector=Hg;function xF(p){let h=p.constraints(),g=0,S=0;return h.top===!1&&h.bottom===!1?S=.5:h.top===!1&&(S=1),h.left===!1&&h.right===!1?g=.5:h.left===!1&&(g=1),{x:g,y:S}}function $0(p,h){if(h.length>1)return!1;let g=Le.getReplicaForTemplateNode(p,h[0]);if(!g)return!1;let S=Le.getMaster(p,g);if(Vi(S))return!1;for(let T=0,I=h.length;T<I;T++){let N=h[T];if(Le.overrideKeys(p,[N]).size>0)return!0}return!1}bi.canUpdateMasterFromInstance=$0;function _0({tree:p},h){function g(P,O){for(let L of["id","update","cache","children","mutable","parentid","originalid","isMaster","isVariant","isBreakpoint","replicaInfo","duplicatedFrom","gesture"])delete P[L];if(O)for(let L of Le.positionKeysToIgnore)delete P[L];return P}function S(P,O){let L;if(O)for(let G of Le.positionKeysToIgnore)P[G]!==void 0&&(L=L||{},L[G]=P[G]);return P.gesture&&(L||(L={}),L.gesture=P.gesture),L}let T=Le.getReplicaForTemplateNode(p,h[0]);if(!T)return;let I=Le.getMaster(p,T);if(Vi(I))return;let N={...T.replicaInfo.overrides},w={...T.replicaInfo,overrides:N};for(let P=0,O=h.length;P<O;P++){let L=h[P];if(!L?.originalid)continue;let G=p.get(L.originalid),Ne=g(L.raw(),uo(L));G?.set(Ne);let Se=S(N[L.originalid]??{},uo(L));Se?N[L.originalid]=Se:delete N[L.originalid]}T.asDraft().replicaInfo=w}bi.updateMasterFromInstance=_0;function j0(p,h){let g=Gg(p,h);return!g||mu(g)?0:Jy(g)?2:1}bi.canGoToMaster=j0;let Gg=(p,h)=>{let g=null;for(let T=0,I=h.length;T<I;T++){let N=h[T],w=Le.getReplicaForTemplateNode(p,N);if(w){if(!g)g=w.originalid;else if(g!==w.originalid)return null}}if(!g)return null;let S=p.get(g);return!S||!ir(S)?null:S};function U0(p,h){if(h.length===1){let S=p.tree.getNode(h[0]?.originalid);if(!S)return;$g(p,S);return}let g=Gg(p.tree,h);g&&(Le.showMaster(p.tree,g),$g(p,g))}bi.goToMaster=U0;function $g(p,h){let g=p.tree.getScopeNodeFor(h),S=p.stores.scopeStore.active;ir(h)&&Le.showMaster(p.tree,h),g===null&&(p.moveNode(h.id,S.id),g=S),p.stores.scopeStore.select(g.id,{keepHistory:!1}),p.stores.selectionStore.set(h);let T=p.tree.convertFrameToCanvas(h);p.stores.canvasStore.scrollToCenter(oe.center(T))}bi.showNodeOnCanvas=$g;function J0(p,h){p.exitMode(),p.stores.modalStore.set({type:"CodeFileCreation",source:"main_menu",creationType:"Component",parentId:h})}bi.createCodeComponent=J0;function X0(p){p.exitMode(),p.stores.modalStore.set({type:"CodeFileCreation",source:"main_menu",creationType:"Override"})}bi.createCodeOverride=X0;function Z0(p,h,g,S,{gesture:T,overrides:I,overrideSize:N,variantName:w,viewportHeight:P,selectAndCenter:O=!0}={}){T&&C(ec(g),"gesture variant should inherit from top level variant");let{treeStore:L,scopeStore:G,selectionStore:Ne,canvasStore:Se}=p,et=h.getPrimaryVariant(),Ve=null;if(!T){let vt=new Set(h.getTopLevelVariants().map(Ue=>Ue.resolveValue("name")??""));w?Ve=Mr(w,vt):Ve=Mr(ve(g)?"Breakpoint":"Variant",vt,{startIndex:vt.size+1,omitCountIfFirst:!1})}if(I||(I=T?void 0:g.replicaInfo?.overrides),Ve&&ve(g)){let vt=uP(L,Ve,g);vt&&(I?I=gn(vt,I):I=vt);let Ue={};g.children.forEach(He=>{if(!Wl(He)||ye(He)&&He.widthType===2||!(He.originalid?L.tree.getNode(He.originalid):He))return;let Kt=L.tree.getRect(He);MI(L.tree,He,Kt,g,S.width,Ue)}),I||(I={}),I=gn(I,Ue)}let be=Le.create(L.tree,et,{overrides:I,inheritsFrom:T?g.id:void 0,duplicatedFrom:MS(g)});if(G.insertNode(be,h.id,-1),!be)return;let Oe={top:S.y,left:S.x,gesture:T,isBreakpoint:ca(h)?!0:void 0,name:Ve};if(P&&(Oe.viewportHeight=P),N&&(Oe.width=S.width,Oe.widthType=0,ve(be)||(Oe.height=S.height,Oe.heightType=0)),be.set(Oe),le(h)){let vt=Pa(T)?"variant":T??"variant";RV({variantId:be.id,variantType:vt,componentId:h.id})}else ve(be)&&Ct("breakpoint_create",{scopeId:h.id,breakpointId:be.id,width:be.width});return O&&(Ne.set(be.id),Se.scrollToCenter(oe.center(S))),be}bi.createVariant=Z0;function VF(p,h){return p.filter(g=>va(g)?tT(g)!==h:mr(g)?oP(g)!==h:!0)}function K0(p,h,g){for(let S of h.walk()){let T=Fc(S);for(let[I,N]of Object.entries(T)){let w=VF(N,g);if(w.length!==N.length){if(zt(S))p.tree.current(S)?.set({[I]:w});else if($(S)){let P={type:"eventhandler",value:w};p.tree.current(S)?.set({[I]:P})}}}}}bi.removeActionsWithTarget=K0;function Y0(p,h){let g=p.tree.getParent(h.id)||p.stores.scopeStore.active;if(ht(g))return!1;let S=p.stores.treeStore.getPartialIndexes();return h.codeComponentIdentifier in S.localSmartComponentNameByIdentifier}bi.canDetachVariantInstance=Y0;function q0(p,h,g,S){if(!g)return null;let T={...bd(h,M),...jP(h)},I=new Map;g.getTopLevelVariants().forEach(Ue=>I.set(Ue.id,Ue));let N=R(T.variant)&&I.get(T.variant)||g.getPrimaryVariant();C(Pe(N),"Variant must be a frame node");let w=p.tree.getParent(h.id)||p.tree.getScopeNodeFor(h)||p.stores.scopeStore.active;if(ht(w))return null;let P=new Map,O=HP(N,new Map,new Map,P);P.set(h.id,O.id);let L=p.tree.getScopeNodeFor(w);if(J(L)||le(L)){let Ue=L.getTopLevelReplicaVariants();for(let He of Ue){let lo=Uo(He.id,h.id),Kt=p.tree.getNode(lo);if(!Kt||!$(Kt))continue;let Ce=Kt.getResolvedControlPropValues(M).variant;if(!R(Ce))continue;if(S){let vo=S.get(Ce);vo&&(Ce=vo)}let Dt=R(Ce)?I.get(Ce):void 0;if(!Dt||!Pe(Dt)||!xe(Dt))continue;let co=kf($P(Dt,p.tree,Kt,g.id),P),ut={},mt=P.get(N.id)??N.id;if(Ru(Dt)){let vo=kf(Dt.replicaInfo.overrides,P,!0);Object.assign(ut,{...vo,[mt]:_P(vo[mt]??{})})}let Ht=gn(co,ut);if(Ru(Dt)){let{opacity:vo,rotation:gr}=He.replicaInfo.overrides?.[h.id]||{};Fd(Ht[mt]??{},{opacity:vo,rotation:gr})}else if(He.replicaInfo.overrides?.[h.id]){let{opacity:vo,rotation:gr}=Dt;Fd(He.replicaInfo.overrides[h.id]??{},{opacity:vo,rotation:gr})}let hr={};Kt.heightType===2&&(hr.heightType=Dt.heightType,hr.height=Dt.height),Kt.widthType===2&&(hr.widthType=Dt.widthType,hr.width=Dt.width),p.tree.current(He)?.set({replicaInfo:{...He.replicaInfo,overrides:gn({...He.replicaInfo.overrides,[h.id]:{}},{...Ht,[mt]:{...He.replicaInfo.overrides[h.id],...Ht[mt],...hr}})}})}}let G=Nd(p.tree,h,O,w);Fd(G,{opacity:j(N.opacity)?T[N.opacity.id]:N.opacity,rotation:j(N.rotation)?T[N.rotation.id]:N.rotation});let Ne=h.constraintValues(),Se=N.constraintValues();Ne.widthType===2&&Se.widthType!==2&&(Ne.widthType=Se.widthType),Ne.heightType===2&&Se.heightType!==2&&(Ne.heightType=Se.heightType),O.set({...Ne,...G,...w?Ai(h):void 0,isVariant:!1,isMaster:!1,gesture:void 0,replicaInfo:null,originalid:null,name:h.name??pi(h)});let et=Jb(g),Ve=new Map([...et??[],...Object.entries(T)]),be=new Map;be.set(g.id,Ve);let Oe={};for(let Ue of O.walk()){if(Ue.originalid=null,Ta(Ue))for(let[He,lo]of Object.entries(Ue.getActions(M)))lo&&Ue.set({[He]:lo.filter(Kt=>pc(Kt)||aa(Kt))});if(Ve.size>0){let He=_c(p.tree,g.id,Ue,be,Oe);He&&Ue.set(He)}}C(O.id!==N.id);let vt=w.children.indexOf(h);p.tree.insertNode(O,w.id,vt);for(let Ue of h.children)ot(Ue)&&p.tree.moveNode(Ue,Oe[Ue.id]??O.id);return Fn(p.tree,w,P,ot(w)||Rr(w)),p.deleteNode(h.id),Ye(O)&&p.scheduler.runBeforeNextFrame(()=>{p.stores.overlayStore.showOverlay(p.stores.selectionStore,O,O.parentid)}),O}bi.detachSmartComponentOrWebPageInstance=q0;function Q0(p){PF(p,{openLibrary:!0})}bi.toggleTeamLibrary=Q0;function PF(p,{openLibrary:h}={}){let{modalStore:g,popoverStore:S}=p.stores;g.active.type==="QuickActions"?g.dismiss():(p.cancelTool(),S.active=0,g.set({type:"QuickActions",source:"main_menu",initialCategory:h?{type:"TeamLibraryCategory"}:void 0}),h?Ct("ui_interaction",{page:"main-menu",id:"team-library"}):Ct("ui_interaction",{page:"main-menu",id:"quick-actions"}))}bi.toggleQuickActions=PF;function eG(p){return!!ve(p)}bi.canCreateBreakpoint=eG;function tG(p,h,g,S,T){let{modalStore:I}=p.stores;I.active.type!=="CustomBreakpoint"&&(p.cancelTool(),I.set({type:"CustomBreakpoint",actionType:h,baseNodeId:g,name:S,width:T,source:"undefined"}))}bi.showCustomBreakpointModal=tG;function oG(p,h,g,S,T,I,N,w){let P={...S,width:T},O=bi.createVariant(p.stores,g,h,P,{overrideSize:!0,variantName:I,viewportHeight:N,selectAndCenter:w});return C(ve(O),"Created node is not a breakpoint variant"),O}bi.createBreakpoint=oG;function wF(p){return p.some(h=>h!==p&&ir(h))}bi.containsMaster=wF;function kF(p){return Pe(p)||ki(p)||Ee(p)||Me(p)||_l(p)||tC(p)||jl(p)}bi.nodeTypeCanBePrimaryVariantSource=kF;function RF(p,h){return!(!kF(h)||sP(p,h)||xe(h)||uo(h)||ir(h)||wF(h))}bi.canConvertNodeToSmartComponentPrimaryVariant=RF;function DF(p,h){let g=h.length;if(g===0)return!0;let S=h[0];return C(S,"node must be defined",h),g===1&&RF(p.tree,S)}bi.canMakeSmartComponent=DF;function LF(p,h){if(h.length!==1)return!1;let S=h[0];if(C(S,"node must be defined",h),!Pe(S)||ht(S))return!1;let T=p.tree.get(S.parentid);return It(T)}bi.canMakeWebPagePrimaryBreakpoint=LF;async function rG(p,h){if(!LF(p,h))return;let g=h[0];C(g,"node must be defined",h);let S=g.resolveValue("name"),T=S?EP(S):void 0;return p.createWebPage({primaryBreakpointTemplateId:g.id,shouldRemovePanelOverrides:!1,startEditingPageTitle:!1,preferredPath:T})}bi.convertNodeToWebPagePrimaryBreakpoint=rG;function iG(p,h,g="Template",S,T){let I=new di({...Qi,...fH(S),isMaster:!0,isVariant:!0,isBreakpoint:!0,widthType:0,heightType:0,width:S?.width??1200,name:S?.name??"Desktop"}),N=new pI;I.addChild(N);let w=Mr(g,hH(p)),P=new Zb({baseVariantId:I.id,name:w});C(P.isLoaded(),"A newly created LayoutTemplateNode must be loaded."),P.addChild(I),p.latestTree().insertNode(P);let O=Td(p,w,T??Cs);return Ln(p,O,P.id),Ct("layout_template_create",{source:h}),P}bi.createLayoutTemplate=iG;function nG(p,h,g=!0,S=null,T=Lt(),I="context_menu",N=0){let w=new Sm({name:h,id:T});if(C(w.isLoaded(),"A newly created VectorSetNode must be loaded"),p.tree.latestTree().insertNode(w),Ln(p.tree,S??ha,w.id),g)for(let O of vH())p.tree.latestTree().insertNode(O,w.id);let P=p.tree.current(w);return C(P,"A newly created VectorSetNode must exist"),p.stores.codeGenerationStore.createVectorSet(P.getVectorSetItems()),Ct("vector_set_create",{source:I,items:g?3:N}),w}bi.createVectorSet=nG;async function aG(p,h,g){let S=p.tree.get(g);if(!bo(S))return;let T=S.isLoaded()?S:await S.load();if(!T)return;let I=T.children.find(ni);if(!ni(I))return;let N=p.tree.getRect(I);p.scheduler.process(()=>{let w=HL(p,h),P=[],O=_o(I)?{fillEnabled:I.fillEnabled,fillType:I.fillType,fillColor:I.fillColor}:void 0;for(let L of w){let G=p.tree.get(L);if(!G)continue;let Ne=p.tree.getIndex(G),Se=Bs(p.tree,T,G,N,N.width),et=BL(G,Se,O);if(ni(et)){if(p.tree.insertNode(et,T.id),P.push(et),Hg(p,et.id,N),Ct("vector_set_item_create",{source:"context_menu"}),g!==p.stores.scopeStore.active.id){let Ve=new In({...GL(G),codeComponentIdentifier:an("vector",et.id,"default").value,width:G.width,height:G.height,widthType:0,heightType:0,slotsAreChildNodes:Xe.isOn("componentSlotsAreChildNodes"),name:G.name});p.tree.insertNode(Ve,G.parentid,Ne)}p.tree.removeNode(G)}}P.length!==0&&(p.stores.scopeStore.select(S.id,{keepHistory:!1}),p.stores.selectionStore.set(P),p.stores.chromeStore.layersExpanded=!0,p.stores.chromeStore.contentPanelTab="Layers",p.stores.codeGenerationStore.createVectorSet(P))})}bi.addToVectorSet=aG;function sG(p,h,g="Icon Set",S="context_menu"){let T=new Sm({name:g});C(T.isLoaded(),"A newly created VectorSetNode must be loaded");let I=HL(p,h),N=0,w=[];for(let P of I){let O=p.tree.get(P);if(!O)continue;let L=p.tree.getRect(O),G=BL(O,{x:N,y:0});if(!ni(G))continue;let Ne=p.tree.getIndex(O);w.push(G),T.addChild(G),N+=L.width*2;let Se=new In({...GL(O),codeComponentIdentifier:an("vector",G.id,"default").value,width:O.width,height:O.height,widthType:0,heightType:0,slotsAreChildNodes:Xe.isOn("componentSlotsAreChildNodes"),name:O.name});p.tree.insertNode(Se,O.parentid,Ne),p.tree.removeNode(O)}p.tree.latestTree().insertNode(T),Ln(p.tree,ha,T.id),p.stores.codeGenerationStore.createVectorSet(w),p.stores.scopeStore.select(T.id,{keepHistory:!1}),p.stores.selectionStore.set(w),p.stores.chromeStore.layersExpanded=!0,p.stores.chromeStore.contentPanelTab="Layers",Ct("vector_set_create",{source:S,items:I.size})}bi.createVectorSetFromNodes=sG;function lG(p,h,g,S,T){let I=g.clone({children:[],name:"Vector"}),{scopeStore:N,codeGenerationStore:w,selectionStore:P,canvasStore:O}=p;N.insertNode(I,h.id),C(ye(I),"Vector must be pinnable."),I.set({top:S.y,left:S.x}),w.createVectorSet([I]),P.set(I.id),O.scrollToCenter(oe.center(S)),Ct("vector_set_item_create",{source:T})}bi.createVectorSetItem=lG})(mH||={});var Qi={height:Xb,left:0,top:0,layout:"stack",stackDirection:"vertical",stackAlignment:"center",stackDistribution:"start",stackWrapEnabled:!1,gap:0,padding:0,paddingPerSide:!1,paddingLeft:0,paddingBottom:0,paddingTop:0,paddingRight:0,overflow:"clip"};function fH(e){if(!e||!Eo(e)||!xo(e)||!_o(e))return;let t=bc(e);return{gap:e.resolveValue("gap")??Qi.gap,padding:t.perSide?Qi.padding:t.top,paddingPerSide:t.perSide??Qi.paddingPerSide,paddingLeft:t.left??Qi.paddingLeft,paddingBottom:t.bottom??Qi.paddingBottom,paddingTop:t.top??Qi.paddingTop,paddingRight:t.right??Qi.paddingRight,fillEnabled:e.resolveValue("fillEnabled"),fillType:e.resolveValue("fillType"),fillColor:e.resolveValue("fillColor"),fillLinearGradient:e.resolveValue("fillLinearGradient"),fillRadialGradient:e.resolveValue("fillRadialGradient"),fillConicGradient:e.resolveValue("fillConicGradient"),fillImage:z(e.fillImage)?void 0:e.fillImage,fillImageOriginalName:e.resolveValue("fillImageOriginalName"),fillImageResize:e.resolveValue("fillImageResize"),fillImagePixelWidth:e.resolveValue("fillImagePixelWidth"),fillImagePixelHeight:e.resolveValue("fillImagePixelHeight"),fillImagePositionX:e.resolveValue("fillImagePositionX"),fillImagePositionY:e.resolveValue("fillImagePositionY"),fillImageTileSize:e.resolveValue("fillImageTileSize")}}function hH(e){let t=new Set;return e.root.children.forEach(o=>{if(!ze(o))return;let r=o.resolveValue("name");r&&t.add(r)}),t}function $L(e){return!(sr(e)||Nr(e)||Yr(e))}function bg(e){return!(Pr(e)||Nr(e)||Yr(e)||Vt(e))}function gH(e){return jo(e)&&e.isVisible()?!0:bg(e)}function WL(e){return $L(e)?Vt(e)?jo(e):!0:!1}function Cl(e,t){if(Tt(t)){let o=wr(e.tree,t.dataIdentifier);if(o)return o.id}return null}function yH(e,t,o){if(o){let i=Cl(e,o);if(i)return i;for(let n of o.ancestors()){let a=Cl(e,n);if(a)return a}}let r=Cl(e,t);if(r)return r;if(o)for(let i of o.walk()){let n=Cl(e,i);if(n)return n}for(let{node:i,skipChildren:n}of t.walkWithSkipChildren())if(o&&i.id===o.id)n();else{let a=Cl(e,i);if(a)return a}return null}function BL(e,{x:t,y:o},r){if(Pt(e)){let i=new ui({...r,isVectorSetItem:!0,width:e.width,height:e.height,left:t,top:o,name:e.name}),n=e.clone({x:0,y:0});return i.addChild(n),i}return e.clone({...r,isVectorSetItem:!0,left:t,top:o})}function HL(e,t){return new Set(t.map(o=>{if(!o)return null;if(Ee(o))return o.getPrimaryId();let r=e.tree.getAncestorThatMatches(o,n=>CH(e,n),!0,!0);if(!r)return null;let i=e.tree.getNodeParent(r);return i&&Ee(i)?i.getPrimaryId():r.getPrimaryId()}))}function CH(e,t){return Pt(t)&&e.tree.isRootVectorNode(t)}function GL(e){return ye(e)?{top:e.top,bottom:e.bottom,left:e.left,right:e.right,centerAnchorX:e.centerAnchorX,centerAnchorY:e.centerAnchorY,constraintsLocked:e.constraintsLocked}:{top:e.y,left:e.x}}var SH="rgb(0, 153, 255)",vg={fillType:"color",fillColor:SH,fillEnabled:!0},Tg={isVectorSetItem:!0,top:0,width:40,height:40,autoSize:!1},vH=()=>{let e=new Nm({...vg,x:-3,y:-3,width:46,height:46,polygonSides:3,centered:!0,radius:1}),t=new Nm({...vg,x:0,y:0,width:40,height:40,polygonSides:4,centered:!0,radius:1}),o=new kI({...vg,x:2,y:2,width:36,height:36}),r=new ui({...Tg,name:"Triangle"});r.addChild(e);let i=new ui({...Tg,left:80,name:"Diamond"});i.addChild(t);let n=new ui({...Tg,left:160,name:"Oval"});return n.addChild(o),[r,i,n]};function en(e,t){return`${e??""}.${t}`}function Sl(e,t){return`${e??""}[${t}]`}function eTe(e){let t=[],o=e.split(".");for(let r of o){let[i,n]=r.split("[");if(i.length!==0&&t.push({type:"object",key:i}),n){let a=n.slice(0,-1);C(a.length>0),t.push({type:"array",id:a})}}return t}function Ig(e,t){if(e===void 0)return"";let o=`<${t}>${e}</${t}>`,i=ln(o).querySelector(t);return i instanceof HTMLElement?i.innerHTML:""}function jL(e,t,o){let r=Xe.isOn("customCodeSiteSettings"),i={headStart:"",headEnd:"",bodyEnd:"",bodyStart:""};for(let n of nI){let a=[],l=e?.[n];if(l&&a.push(l),t&&!r)for(let s in t){let c=t[s]?.[n];c?.html&&!c.disabled&&a.push(`<!-- Plugin: ${s} --> ${c.html}`)}i[n]=a.map(s=>_L(s,n)).join(`
`)}if(!o)return i;for(let n of o){if(n.disabled||n.pageIds&&n.pageIds.length>0)continue;let a=n.managedByPlugin?`<!-- Plugin: ${n.managedByPlugin} --> ${n.code}`:n.code,l=_L(a,n.placement);i[n.placement]+=l+`
`}return i}function _L(e,t){if(t==="headStart"||t==="headEnd")return Ig(e,"head");if(t==="bodyStart"||t==="bodyEnd")return Ig(e,"body");At(t)}var Ng=e=>e;function dTe(e){return e.filter($o)}var Jp=m`params`,JL={type:"siteMetadata",localIdName:"siteMetadata",localId:_r("siteMetadata","siteMetadata")};function jTe(e){return{type:"webPageMetadata",localIdName:e,localId:_r("webPageMetadata",e)}}var UTe=Ng(async(e,t)=>{let{assetMap:o,treeStore:r,modulesStore:i}=t,n=new zn(o),a=new Er,l=new ai("siteMetadata",i,a),s=new bn(e,a),c=new Tn(a),d=new zi(e,l,a,void 0,r,i),u=new jn(e,r,s,c,a,l,n),f=new Bn(a,s,u,n,d),y=new rl(e,s,r,l,a,c,f,i,"siteMetadata"),v=new Br(c,void 0,l,s,y,void 0,f,i,"siteMetadata"),b=Xe.isOn("customCodeSiteSettings"),x,D=r.tree.getCustomCodeScopeNode();if(b&&D){let H=await D.load();H&&(x=H.children)}let B=XL(e,n,v,s,y,void 0,void 0,void 0,x);return[{type:"siteMetadata",revision:void 0,source:ZL(e,B,l,c,y,v,s,void 0),artifacts:{assets:n.keys}}]}),JTe=Ng(async(e,t,o)=>{let{treeStore:r,modulesStore:i,assetMap:n}=t,{serializationId:a}=o,l=new zn(n),s=new Er,c=new ai("webPageMetadata",i,s),d=new bn(e,s),u=new Tn(s),f=new zi(e,c,s,void 0,r,i),y=new jn(e,r,d,u,s,c,l),v=new Bn(s,d,y,l,f),b=new rl(e,d,r,c,s,u,v,i,"webPageMetadata"),x=new Br(u,void 0,c,d,b,void 0,v,i,"webPageMetadata"),D=e.getVariableControlMap(r.tree,M,M.activeBundleHash),B=Xe.isOn("customCodeSiteSettings"),H,A=r.tree.getCustomCodeScopeNode();if(B&&A){let se=await A.load();se&&(H=se.children)}let Z=XL(e,l,x,d,b,bH(r.tree,e,c),IH(c),D,H);Z.viewport=await NH(e);let re=Object.entries(e.getBreakpointValues()).map(([se,ke])=>({hash:Ft(se),mediaQuery:Wb(ke)}));Z.breakpoints=re;let Ie=wS(e);return Z.elements=Ie,Z.serializationId=a,[{type:"webPageMetadata",source:ZL(e,Z,c,u,b,x,d,D),artifacts:{assets:l.keys},revision:e.moduleSourceRevision}]});function XTe(e,t){let o=new Set;function r(i){let n=gm(),a=i.matchAll(n);for(let[,l]of a)l&&t?.has(l)&&o.add(l)}for(let i in e.webMetadata){let n=i,a=e.webMetadata[n];switch(n){case"title":case"description":case"socialImage":R(a)&&r(a),j(a)&&o.add(a.id);break;case"noIndex":case"noIndexSite":if(!z(a))continue;j(a)?o.add(a.id):$t(a)?vr(a)&&o.add(a.startValue.id):_(a);break;case"favicon":case"faviconDark":case"appleTouchIcon":case"googleAnalyticsTrackingId":case"reducedMotion":case"language":case"languageTitle":case"adaptLayoutToTextDirection":case"canonicalURL":case"customCanonicalURL":case"optOutOfHTMLPlugin":case"automaticLocale":case"preserveQueryParams":case"enableFormsUTMTracking":break;default:}}for(let i in e.customHTML){let n=i,a=e.customHTML[n];switch(n){case"headStart":case"headEnd":case"bodyStart":case"bodyEnd":R(a)&&r(a);break;default:}}if(e.titleLocalized)for(let i of Object.values(e.titleLocalized))R(i.value)&&r(i.value);if(e.descriptionLocalized)for(let i of Object.values(e.descriptionLocalized))R(i.value)&&r(i.value);return o}function XL(e,t,o,r,i,n,a,l,s){let c={},d=i.add(tn(e,e.webMetadata?.title,o,r,l)??n,e.titleLocalized,(A,Z)=>(C(Z.variables),tn(e,e.titleLocalized?.[A]?.value,Z.valueTransforms,Z.variables,l)));E(d)||(c.title=d);let u=i.add(tn(e,e.webMetadata?.description,o,r,l)??a,e.descriptionLocalized,(A,Z)=>(C(Z.variables),tn(e,e.descriptionLocalized?.[A]?.value,Z.valueTransforms,Z.variables,l)));if(E(u)||(c.description=u),e.webMetadata?.favicon){let A=t.resolve(e.webMetadata.favicon);C(A,"Favicon is not a valid asset reference"),c.favicon=A.src}let f=e.webMetadata?.socialImage;if(j(f)){let A=Mt(f.id,e.id),Z=r.create(A);c.socialImage=o.wrapInToImageSrc(Z)}else if(f){let A=t.resolve(f);C(A,"Social image is not a valid asset reference"),c.socialImage=A.src}let y="noindex",v="max-image-preview:large";if(z(e.webMetadata?.noIndex)){let A=UL(e.webMetadata.noIndex,e.id,r,o);c.robots=m`${A} ? ${v} : ${y}`}else e.webMetadata?.noIndex===!0?c.robots=y:c.robots=v;if(e.webMetadata?.noIndexSite!==void 0)if(z(e.webMetadata?.noIndexSite)){let A=UL(e.webMetadata.noIndexSite,e.id,r,o);c.framerSearch={index:A}}else c.framerSearch={index:!e.webMetadata?.noIndexSite};let x=Xe.isOn("customCodeSiteSettings")?!Zr(e):!0,D=x?e.customHTML:void 0,B=x&&Zr(e)?e.pluginCustomHTML:void 0,H=jL(D,B,s);if(H.headStart){let A=tn(e,H.headStart,o,r,l,"escape");A&&(c.customHTMLHeadStart=A)}if(H.headEnd){let A=tn(e,H.headEnd,o,r,l,"escape");A&&(c.customHTMLHeadEnd=A)}if(H.bodyStart){let A=tn(e,H.bodyStart,o,r,l,"escape");A&&(c.customHTMLBodyStart=A)}if(H.bodyEnd){let A=tn(e,H.bodyEnd,o,r,l,"escape");A&&(c.customHTMLBodyEnd=A)}return c}function UL(e,t,o,r){let i,n;if(j(e)){let a=Mt(e.id,t);i=o.create(a),n=i}else if($t(e)){C(vr(e),"Fetch is not supported for no index");let a=Mt(e.startValue.id,t);i=o.create(a),n=i;for(let l of e.transforms)n=r.wrapInValueTransform(n,l,void 0,void 0)}else _(e);return m`${i} !== undefined && ${n} === false`}function TH(e,t,o,r){if(!o||!Tt(e))return;let i=r.getBindings(e.id);if(i.size===0)return;let n=new Set(i.keys()),a=t.addImport("framer",{exportSpecifier:"QueryEngine"}),l=t.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"});function s(b){let x=t.addModuleImport(b);return C(x,"Can't import collection"),x}let c=Xc(e),d=new Set,u=KI(o,n,d,c,s),f=ZI(e.dataIdentifier,o,d,c,s),y=new Y({from:f,select:u,where:V.fn(l,m`pathVariables`,c)}),v=new Y({from:f,select:u});return m.joinLines(m`export async function fetchMetadata(pathVariables, activeLocale) {`,m`  const queryEngine = new ${a}();`,m``,m`  const query = ${y};`,m``,m`  const result = await queryEngine.query(query, activeLocale);`,m`  if (result.length === 0) {`,m`    throw new Error("No data matches pathVariables");`,m`  }`,m``,m`  const params = result[0];`,m`  return metadata(params, activeLocale);`,m`}`,m``,m`export async function fetchAllMetadata(pathVariableKeys, activeLocale) {`,m`  const queryEngine = new ${a}();`,m``,m`  const query = ${v};`,m``,m`  for (const pathVariableKey of pathVariableKeys) {`,m`    query.select.push({`,m`      collection: ${c},`,m`      name: pathVariableKey,`,m`      type: "Identifier",`,m`    });`,m`  }`,m``,m`  const results = await queryEngine.query(query, activeLocale);`,m``,m`  return results.map(result => ({`,m`    metadata: metadata(result, activeLocale),`,m`    pathVariables: Object.fromEntries(`,m`      pathVariableKeys.map(pathVariableKey => [pathVariableKey, result[pathVariableKey]])`,m`    )`,m`  }));`,m`}`)}function ZL(e,t,o,r,i,n,a,l){let s=a.getBindings(e.id),c=[];for(let[f,y]of s){let v=m`${Jp}?.[${f}]`,b=l?.get(f);if(b&&b.type==="enum"){let D=n.wrapInValueTransform(v,{name:"enumToDisplayName"},b);v=m`${v} !== undefined ? ${D} : undefined`}let x=m`const ${y} = ${v}`;c.push(x)}let d=m.joinLines(m`export default function metadata(${Jp}, ${te.activeLocale}) {`,...c,m`return ${t}`,m`}`),u=J(e)?TH(e,o,l,a):void 0;return m.joinSections(m.linesFrom(o.statements),...i.list(),...r.list(),d,u,m`export const metadataVersion = 1`)}function tn(e,t,o,r,i,n){if(Fo(t))return;let a=gm();return Je.replaceAll(t,a,(l,s)=>{let[c,d]=Hb(s,n);if(!i?.has(c))return l;let u=Mt(c,e.id),f=r.create(u),y=f;return i?.get(c)?.type==="responsiveimage"&&(y=o.wrapInToImageSrc(y)),y=o.wrapInTemplateFilters(y,d),m`${f} !== undefined ? ${y} : ${l}`})}function ZTe(e,t,o){let r=o?.title,i=Xp(e,t);return r||i}function bH(e,t,o){let r=o.addImport(`../${JL.localId}`,{exportSpecifier:"default",importBinding:"siteMetadata"}),i=m`${r}(${Jp}, ${te.activeLocale}).title`,n=Xp(e,t);return m`${i} || ${n}`}function IH(e){let t=e.addImport(`../${JL.localId}`,{exportSpecifier:"default",importBinding:"siteMetadata"});return m`${t}(${Jp}, ${te.activeLocale}).description`}function Xp(e,t){if(Tt(t)){let i=M.dataForIdentifier(t.dataIdentifier);if(i?.name)return i.name+" Detail"}let o=Bv(e,t);return kd(o??"/")}async function NH(e){if(J(e)){let t=e.isLoaded()?e:await e.load();return t?t.getReplicaVariants().length>0?"width=device-width":`width=${t.getPrimaryVariant().width}`:"width=device-width"}return"width=device-width"}function Et(e,t=!1){let o=(t?xa(e):e).trim();return o===""?0:o.split(/\W+\b/).length}function KL(e){return le(e)||J(e)||ze(e)}function abe(e){to(Iu(e),"Array gallery control must be Array of Object controls");let t=e.control,o;for(let r in t.controls){to(!o,"Multiple item properties found in gallery control");let i=t.controls[r];to(i?.type==="responsiveimage"),o=[r,i]}return to(o,"Gallery control must have at least one item property"),o}function sbe(e,t){if(!ds(t)||!t.value)return;let o=t.value[e];if(o?.type==="image")return o}function lbe(e){return e?e.filter(t=>!xH(t)):[]}function xH(e){if(!ds(e)||!e.value)return!1;let t=Object.values(e.value);if(t.length!==1)return!1;let o=t[0];return DC(o)?E(o.value):!1}function YL(e){if(!Iu(e))return!1;let t=Object.values(e.control.controls);return t.length!==1?!1:t[0]?.type==="responsiveimage"}function qL(e){return`${e??"Field"} is required`}function QL(e,t){return`Exceeded max length by ${Av(e-t,"character","characters")}`}function mbe(e){return`Must have at least ${e.minCount} ${eF(e)}`}function fbe(e){return`Must have at most ${e.maxCount} ${eF(e)}`}var hbe="Slug value is already taken and must be unique";function eF(e){return YL(e)?"images":"items"}function tF(e){let t=Ia(e);for(let o of t.querySelectorAll("*"))o.tagName!=="BR"&&(o.removeAttribute("class"),o.removeAttribute("style"),o.removeAttribute("data-styles-preset"));return t.innerHTML}function uIe(e){return e==="hidden"?null:e}var mIe=["new","needsReview","done","hidden"],VH="controlPropKey";function fIe(e){return VH in e}function hIe(e){return"groups"in e}var PH="collectionNodeId";function gIe(e){return PH in e}var wH={string:!0,richtext:!0,image:!0,enum:!0,link:!0,slug:!0};function kH(e){return e in wH}function iF(e){return kH(e.type)}var RH={string:!0,richtext:!0,image:!0,link:!0};function nF(e){return e in RH}function DH(e){return e?e.type==="richtext"?!0:e.type==="RichTextNode"?e.textType==="rich-text":!1:!1}function yIe(e){return e?e.type==="image"||e.type==="FrameNode":!1}function CIe(e){return e?e.type==="nodeLink"||e.type==="link":!1}function SIe(e){return e?e.type==="RootNode"||e.type==="WebPageNode":!1}function vIe(e){return e?.type==="slug"||e?.type==="RouteSegmentNode"}function LH(e){return Fo(e)||e===""||IV(e)}function TIe(e,t){if(!e||DH(e))return!1;if(e.value.includes(`
`))return!0;let o=e.localizedValues[t.id];return o?!!o.value?.includes(`
`):!1}function aF(e,t,o){return t?t.hash!==o||t.needsReview?"needsReview":"done":LH(e)?"done":"new"}function xt(e,t,o,r,i,n){return Object.fromEntries(t.map(a=>{let l=o[a.id];if(i?.[a.id])return[a.id,"warning"];if(n){let s=n(a);if(s)return[a.id,s]}return[a.id,aF(e,l,r)]}))}function Vg(e){return t=>e[t.id]?null:"done"}function Pg(e,t,o){return r=>{if(R(e)&&t){let i=t[r.id];if(i)return aF(e,i,o)}return null}}var rt={};Object.freeze(rt);function FH(e,t,o,r,i,n,a){let l=(s,c,d)=>{if(j(c)||!R(c)||c.length===0&&!d)return;let u=$e(c),f=d??rt,y=xt(c,n,f,u);a.push({type:e.name,transformId:e.id,keyPath:en(t,s),nodeId:i.id,scopeId:r.id,property:s,value:c,controlPropKey:o,controlPropName:void 0,ancestorControlKeyPath:void 0,valueWordCount:Et(c),hash:u,localizedValues:f,localizedValueStatuses:y,managedByPluginButUserEditable:!1})};l("truthy",e.truthy,e.truthyLocalized),l("falsy",e.falsy,e.falsyLocalized)}function EH(e,t,o,r,i,n,a,l){if(t.outputType!=="string")return;for(let u of t.cases){if(vr(e)&&e.startValue.id===tv)break;if(j(u.to)||!R(u.to)||u.to.length===0&&!u.toLocalized)continue;let f=$e(u.to),y=u.toLocalized??rt,v=xt(u.to,a,y,f),b=en(o,"cases");l.push({type:"convertFromEnum",transformId:t.id,keyPath:Sl(b,u.id),nodeId:n.id,scopeId:i.id,caseId:u.id,isDefaultCase:!1,value:u.to,ancestorControlKeyPath:void 0,controlPropKey:r,controlPropName:void 0,valueWordCount:Et(u.to),hash:f,localizedValues:y,localizedValueStatuses:v,managedByPluginButUserEditable:!1})}if(!t.default||j(t.default)||!R(t.default))return;let s=$e(t.default),c=t.defaultLocalized??rt,d=xt(t.default,a,c,s);l.push({type:"convertFromEnum",transformId:t.id,keyPath:en(o,"default"),nodeId:n.id,scopeId:i.id,caseId:null,isDefaultCase:!0,ancestorControlKeyPath:void 0,value:t.default,controlPropKey:r,controlPropName:void 0,valueWordCount:Et(t.default),hash:s,localizedValues:c,localizedValueStatuses:d,managedByPluginButUserEditable:!1})}function Kp(e,t,o,r,i,n,a){if(!(!Ry(o.outputType)||o.outputType!=="string")){for(let l of o.transforms)if(ky(l))switch(l.name){case"convertFromEnum":{EH(o,l,r,i,e,t,n,a);break}case"convertFromBoolean":{FH(l,r,i,e,t,n,a);break}case"prefix":case"suffix":{if(j(l.value)||l.value.length===0&&!l.valueLocalized)return;let s=$e(l.value),c=l.valueLocalized??rt,d=xt(l.value,n,c,s);a.push({type:l.name,transformId:l.id,keyPath:Sl(r,l.id),controlPropKey:i,controlPropName:void 0,ancestorControlKeyPath:void 0,nodeId:t.id,scopeId:e.id,value:l.value,valueWordCount:Et(l.value),hash:s,localizedValues:c,localizedValueStatuses:d,managedByPluginButUserEditable:!1});continue}default:}}}function AH(e,t,o,r,i,n){if($t(o.textContent)){if(!wt(e,o,"textContent"))return;Kp(t,o,o.textContent,o.id,o.id,r,i);return}if(z(o.htmlContent)||z(o.textContent))return;let a=wt(e,o,"html"),l=wt(e,o,"htmlLocalized");if(!a&&!l)return;let s=o.html,c=xa(s),d=Jc(s),u=n==="canvasHtmlAsTextContentIfPossible"?d:"rich-text",f=u==="text"?c:tF(s);if(u==="text"&&!l&&Vt(o)){let D=e.getNode(o.originalid);if(D&&xa(D.html)===c)return}let v=$e(d===u?f:c),b=o.htmlLocalized??rt,x=xt(f,r,b,v);i.push({type:"RichTextNode",keyPath:MH(o.id),nodeId:o.id,scopeId:t.id,value:f,valueWordCount:Et(f,!0),textType:u,hash:v,localizedValues:b,localizedValueStatuses:x,managedByPluginButUserEditable:!1,inherited:!l})}function MH(e){return`${e}_html`}function oF(e){if(Zr(e))return"RootNode";if(J(e))return"WebPageNode";_(e)}function rF(e,t,o){let r={};for(let i of e){let n=t[i.id];if(!n||!n.value)continue;let a=Gb({collectionData:o,getCollectionDataForIdentifier:M.dataForIdentifier.bind(M),type:"id",value:n.value});a&&(r[i.id]=a)}return r}function sF(e,t,o,r,i){let n=null;if(J(o)&&(n=M.dataForIdentifier(o.dataIdentifier)),o.webMetadata?.title||o.titleLocalized){let a=o.webMetadata?.title??e.root.webMetadata?.title??"",l=$e(a),s=o.titleLocalized??rt,c=rF(r,s,n),d=xt(a,r,s,l,c);i.push({type:oF(o),keyPath:`${o.id}_title`,nodeId:o.id,scopeId:t.id,value:a,valueWordCount:Et(a),hash:l,localizedValues:s,localizedValueStatuses:d,managedByPluginButUserEditable:!1,key:"title",dataIdentifier:sa(o)?o.dataIdentifier:void 0,warnings:c})}if(o.webMetadata?.description||o.descriptionLocalized){let a=o.webMetadata?.description??e.root.webMetadata?.description??"",l=$e(a),s=o.descriptionLocalized??rt,c=rF(r,s,n),d=xt(a,r,s,l,c);i.push({type:oF(o),keyPath:`${o.id}_description`,nodeId:o.id,scopeId:t.id,value:a,valueWordCount:Et(a),hash:l,localizedValues:s,localizedValueStatuses:d,managedByPluginButUserEditable:!1,key:"description",dataIdentifier:sa(o)?o.dataIdentifier:void 0,warnings:c})}}function OH(e,t,o,r,i){if(!Ut(o)||!R(o.fillImage)||o.fillImage.length===0)return;let n=wt(e,o,"fillImage"),a=wt(e,o,"fillImageLocalized"),l=wt(e,o,"altAttribute"),s=wt(e,o,"altAttributeLocalized");if(!n&&!a&&!l&&!s)return;let c=o.altAttribute??Sa,d=$e(c),u=o.altAttributeLocalized??rt,f=o.fillImage,y=$e(f),v=o.fillImageLocalized??rt,b=xt(c,r,u,d,void 0,Pg(f,v,y));i.push({type:"FrameNode",keyPath:`${o.id}_fillImageLocalized`,nodeId:o.id,scopeId:t.id,value:c,valueWordCount:Et(c),hash:d,localizedValues:u,localizedValueStatuses:b,managedByPluginButUserEditable:!1,inherited:!s,supportsAlt:!0,image:f,imageHash:y,imageLocalizedValues:v,imageInherited:!a,positionX:pu(o.fillImagePositionX)?o.fillImagePositionX:void 0,positionY:pu(o.fillImagePositionY)?o.fillImagePositionY:void 0,supportsFocalPoint:!0})}function lF(e,t,o,r){if(!Xe.isOn("localizedLinks"))return;let i=t.getLink();if(!Tr(i))return;let n=i.url,a=$e(n),l=t.linkLocalized??rt,s=xt(n,o,l,a,void 0,Vg(l));r.push({type:"nodeLink",keyPath:`${t.id}_linkLocalized`,nodeId:t.id,scopeId:e.id,value:n,valueWordCount:n?1:0,hash:a,localizedValues:l,localizedValueStatuses:s,managedByPluginButUserEditable:!1,aiTranslationDisabled:!0})}function zH(e,t,o,r,i){OH(e,t,o,r,i),lF(t,o,r,i)}function Yp(e){return!!(nF(e)||e==="array"||e==="object")}function Zp(e,t,o){return`${e}.${t}.${o??""}`}function WH(e){if(J(e)&&tc(e))return e.layoutTemplateIdentifier;if($(e))return e.codeComponentIdentifier}function BH(e,t,o,r,i){let n=WH(o);if(!n)return;let a=M.componentForIdentifier(n);if(!a)return;let l=o.getControlProps(a.properties);function s(c,d,u,f=void 0){let y=d.type;if(y==="array"&&fy(d.value)){if(u.type!=="array")return;let v=u.control;for(let b of d.value){if(!Yp(b.type))continue;let x=Sl(f,b.id);s(c,b,v,x)}}if(y==="object"&&Fe(d.value)){if(u.type!=="object")return;for(let v in d.value){let b=d.value[v];if(!b||!Yp(b.type))continue;let x=en(f,v),D=u.controls[v];D&&s(c,b,D,x)}}if(nF(y))switch(y){case"string":{if(!wt(e,o,dt(c))||u.type==="string"&&u.preventLocalization||($t(d.value)&&Kp(t,o,d.value,en(o.id,c),c,r,i),!R(d.value)))break;let v=d.value,b=$e(v),x=d.valueLocalized??rt,D=xt(v,r,x,b);i.push({type:"string",keyPath:Zp(o.id,c,f),controlPropKey:c,controlPropName:u.title||Ur(c),ancestorControlKeyPath:f,nodeId:o.id,scopeId:t.id,value:v,valueWordCount:Et(v),hash:b,localizedValues:x,localizedValueStatuses:D,managedByPluginButUserEditable:!1});break}case"link":{if(!Xe.isOn("localizedLinks")||!wt(e,o,dt(c))||($t(d.value)&&Kp(t,o,d.value,en(o.id,c),c,r,i),!Tr(d.value)))break;let v=d.value.url,b=$e(v),x=d.valueLocalized??rt,D=xt(v,r,x,b,void 0,Vg(x));i.push({type:"link",keyPath:Zp(o.id,c,f),controlPropKey:c,controlPropName:u.title||Ur(c),ancestorControlKeyPath:f,nodeId:o.id,scopeId:t.id,value:v,valueWordCount:v?1:0,hash:b,localizedValues:x,localizedValueStatuses:D,managedByPluginButUserEditable:!1,aiTranslationDisabled:!0});break}case"richtext":{if(y!=="richtext"||!R(d.value)||u.type==="richtext"&&u.preventLocalization||!wt(e,o,dt(c)))break;let v=d.value,b=$e(v),x=d.valueLocalized??rt,D=xt(v,r,x,b);i.push({type:"richtext",keyPath:Zp(o.id,c,f),controlPropKey:c,controlPropName:u.title||Ur(c),ancestorControlKeyPath:f,nodeId:o.id,scopeId:t.id,value:v,valueWordCount:Et(v,!0),hash:b,localizedValues:x,localizedValueStatuses:D,managedByPluginButUserEditable:!1,contentType:void 0});break}case"image":{if(!d||d.type!=="image"||!R(d.value)||u.type!=="responsiveimage"&&u.type!=="image"||!wt(e,o,dt(c)))break;let v=u.type==="responsiveimage",b=d.alt??Sa,x=$e(b),D=v?d.altLocalized??rt:rt,B=d.value,H=$e(B),A=d.valueLocalized??rt,Z=xt(b,r,D,x,void 0,Pg(B,A,H)),re=u.type==="responsiveimage";i.push({type:"image",keyPath:Zp(o.id,c,f),controlPropKey:c,controlPropName:u.title||Ur(c),ancestorControlKeyPath:f,nodeId:o.id,scopeId:t.id,value:b,valueWordCount:Et(b),hash:x,localizedValues:D,localizedValueStatuses:Z,managedByPluginButUserEditable:!1,supportsAlt:v,image:B,imageHash:H,imageLocalizedValues:A,supportsFocalPoint:re,positionX:re?d.positionX:void 0,positionY:re?d.positionY:void 0});break}default:}}for(let c in l){let d=l[c];if(!d)continue;let u=a.properties[c];u&&s(c,d,u)}}function HH(e,t,o,r){let i=t.formSelectOptions;if(!(!i||i?.length===0))for(let n of i){let a=n.title;if(!a)continue;let l=n.titleLocalized??rt,s=$e(a),c=xt(a,o,l,s);r.push({type:"FormSelectNode",keyPath:`${t.id}_${n.id}`,nodeId:t.id,optionId:n.id,scopeId:e.id,value:a,valueWordCount:Et(a),hash:s,localizedValues:l,localizedValueStatuses:c,managedByPluginButUserEditable:!1})}}function GH(e,t,o,r,i){let n=`${o.id}_placeholder`;if(z(o.formInputPlaceholder)){if(j(o.formInputPlaceholder)||!wt(e,o,"formInputPlaceholder"))return;Kp(t,o,o.formInputPlaceholder,n,o.id,r,i);return}if(!o.formInputPlaceholder||!wt(e,o,"formInputPlaceholder"))return;let a=$e(o.formInputPlaceholder),l=o.formInputPlaceholderLocalized??rt;i.push({keyPath:n,type:"FormPlainTextInputNode",nodeId:o.id,scopeId:t.id,value:o.formInputPlaceholder,valueWordCount:Et(o.formInputPlaceholder),hash:$e(o.formInputPlaceholder),localizedValues:l,localizedValueStatuses:xt(o.formInputPlaceholder,r,l,a),managedByPluginButUserEditable:!1})}function $H(e,t,o,r,i,n){J(o)&&sF(e,t,o,r,i),De(o)&&AH(e,t,o,r,i,n),($(o)||J(o))&&BH(e,t,o,r,i),Pe(o)&&zH(e,t,o,r,i),(ki(o)||Ee(o))&&lF(t,o,r,i),_l(o)&&GH(e,t,o,r,i),jl(o)&&HH(t,o,r,i)}function Tl(e,t,o,r,i,n){if(t.mutable)return;let a=t.cache.localizationSourceGroup;if(a&&!(a.update!==t.update||a.componentHash!==r||a.locales!==o||a.parentVariables!==i||!jr(a.subGroups,n))&&!(Bc(e,t)&&a.includedLocales!==t.includedLocales))return a}function bl(e,t,o,r,i,n,a){t.mutable||(t.cache.localizationSourceGroup={update:t.update,locales:r,componentHash:i,parentVariables:n,group:o,includedLocales:Bc(e,t)?t.includedLocales:void 0,subGroups:a})}function _H(e,t,o,r,i,n){let a=n==="canvasHtmlAsTextContentIfPossible";if(a){let d=Tl(e,t,o,r,ei,void 0);if(d){d.group&&i.push(d.group);return}}let l=[];for(let d of t.walk())$H(e,t,d,o,l,n);let s=Bc(e,t),c;if(l.length>0){let d=J(t)?Xp(e,t):t.resolveValue("name")??"Unknown";J(t)&&t.abTestingParentId&&(d=`${d} \xB7 ${t.resolveValue("name")||pi(t)}`),c={type:"sourceGroup",name:d,groupType:J(t)?"page":ze(t)?"template":"component",nodeId:t.id,supportsLocaleVisibility:s,includedLocaleIds:s?ef(e,t):void 0,items:l},i.push(c)}a&&bl(e,t,c,o,r,ei,void 0)}function vl(e,t,o){return o?`${e}.${t}.${o}`:`${e}.${t}`}function jH(e){return e.type!=="rich-text"?e.value.length:xa(e.value).length}function xg(e,t,o){let r=o.required,i=o.type==="link"?void 0:o.options?.maxLength;if(!r&&!K(i))return;let n={};for(let a of e){let l=t[a.id];if(!ms(l))continue;let s=jH(l);r&&s===0?n[a.id]=qL(o.name):K(i)&&s>i&&(n[a.id]=QL(s,i))}return n}function cF(e,t,o,r){let i={};for(let n of e){let a=t[n.id];if(!ms(a))continue;let s=o[n.id]?.get(a.value);s&&s>1&&(i[n.id]=r)}return i}function UH(e,t,o,r,i,n,a,l){let s=i.type;switch(s){case"string":{if(Kl(i))return;let c;if(a){if(a.type!==s||!R(a.value))return;c=a.value}else{if(zC(i))return;c=i.initialValue}let d=$e(c),u=a?.valueLocalized??rt,f=xg(o,u,i),y=xt(c,o,u,d,f);return{type:"string",keyPath:vl(t,n,r),nodeId:t,scopeId:e,controlPropKey:n,controlPropName:i.name,ancestorControlKeyPath:r,value:c,valueWordCount:Et(c),hash:d,localizedValues:u,localizedValueStatuses:y,managedByPluginButUserEditable:i.userEditable??!1,warnings:f}}case"link":{if(!a||a.type!==s||!Tr(a.value)||!Xe.isOn("localizedLinks"))return;let c=a.value.url,d=$e(c),u=a?.valueLocalized??rt,f=xg(o,u,i),y=xt(c,o,u,d,f);return{type:"link",keyPath:vl(t,n,r),nodeId:t,scopeId:e,controlPropKey:n,controlPropName:i.name,ancestorControlKeyPath:r,value:c,valueWordCount:c?1:0,hash:d,localizedValues:u,localizedValueStatuses:y,managedByPluginButUserEditable:i.userEditable??!1,warnings:f,aiTranslationDisabled:!0}}case"slug":{if(!a)return;C(a.type==="string","expected slug controlType to be a string"),C(R(a.value),"expected slug value to be a string");let c=a.value,d=$e(c),u=a?.valueLocalized??rt,f=cF(o,u,l,"Each item in the Collection must have a unique slug"),y=xt(c,o,u,d,f,Vg(u));return{type:"slug",keyPath:vl(t,n,r),controlPropKey:n,controlPropName:i.name,ancestorControlKeyPath:r,nodeId:t,scopeId:e,value:c,valueWordCount:Et(c),hash:d,localizedValues:u,localizedValueStatuses:y,managedByPluginButUserEditable:i.userEditable??!1,warnings:f}}case"richtext":{let c;if(Kl(i))return;if(a){if(a.type!==s||!R(a.value))return;c=a.value}else c=i.initialValue;let d=$e(c),u=a?.valueLocalized??rt,f=xg(o,u,i),y=xt(c,o,u,d,f);return{type:"richtext",keyPath:vl(t,n,r),nodeId:t,scopeId:e,controlPropKey:n,controlPropName:i.name,ancestorControlKeyPath:r,value:c,valueWordCount:Et(c,!0),hash:d,localizedValues:u,localizedValueStatuses:y,managedByPluginButUserEditable:i.userEditable??!1,warnings:f,contentType:i.type==="richtext"?i.contentType:void 0}}case"image":{let c;if(a){if(a.type!==s||!R(a.value))return;c=a.value}else{if(!R(i.initialValue))return;c=i.initialValue}let d=$e(c),u=a?.valueLocalized??rt,f=a?.alt??Sa,y=$e(f),v=a?.altLocalized??rt,b=xt(f,o,v,y,void 0,Pg(c,u,d));return{type:"image",keyPath:vl(t,n,r),nodeId:t,scopeId:e,controlPropKey:n,controlPropName:i.name,ancestorControlKeyPath:r,value:f,valueWordCount:Et(f),hash:y,localizedValues:v,localizedValueStatuses:b,supportsAlt:!0,image:c,imageHash:d,imageLocalizedValues:u,managedByPluginButUserEditable:i.userEditable??!1,supportsFocalPoint:!0,positionX:a?.positionX,positionY:a?.positionY}}case"enum":return;default:}}function JH(e,t,o,r,i){let n=t.id;function a(l,s,c,d=void 0){if(s&&s.type==="array"){if(c.type!=="array"||z(s.value))return;for(let f of s.value){if(!Yp(f.type)||!ds(f)||!f.value)continue;let y=Sl(d,f.id);for(let v of c.itemVariables){let b=f.value[v.id];if(!b||!Yp(b.type))continue;let x=en(y,v.id);a(l,b,v,x)}}}if(!iF(c))return;let u=UH(n,t.id,o,d,c,l,s,i);u&&r.push(u)}for(let l of e.variables){if(l.type==="divider")continue;let s=t.getControlProp(l.id);a(l.id,s,l)}}function XH(e,t,o,r,i,n){let a=Tl(e,o,r,Qr,t.variables,void 0);if(a){a.group&&n.push(a.group);return}let l=[],s=ef(e,o);if(JH(t,o,r,l,i),l.length>0){for(let d of l)d.insetLevel=1;let c={type:"sourceGroup",groupType:"collectionItem",collectionName:t.resolveValue("name")??"Unknown",collectionNodeId:t.id,supportsLocaleVisibility:!0,includedLocaleIds:s,name:Dd(t,o)??"Unknown",nodeId:o.id,items:l};bl(e,o,c,r,Qr,t.variables,void 0),n.push(c)}}function ZH(e,t,o,r){let i=o.name,n=$e(i),a=o.nameLocalized??rt,l=xt(i,r,a,n);return{type:"enum",keyPath:`${e.id}_${t.id}_${o.id}`,nodeId:e.id,scopeId:e.id,variableId:t.id,enumCaseId:o.id,value:i,valueWordCount:Et(i),hash:n,localizedValues:a,localizedValueStatuses:l,managedByPluginButUserEditable:!1}}function KH(e,t,o,r){let i=[],n=YH(o,t);for(let d of t.getUnsortedChildren())XH(e,t,d,o,n,i);let a=Tl(e,t,o,Qr,ei,i);if(a){a.group&&r.push(a.group);return}let l=t.variables.filter(iF);if(l.length===0)return;let s=[];for(let d of l){let u=d.type;switch(u){case"enum":{if(Kl(d))break;for(let f of d.cases)s.push(ZH(t,d,f,o));break}case"string":case"richtext":case"image":case"link":case"slug":break;default:}}let c=s.length>0||i.length>0?{type:"sourceGroup",groupType:"collection",name:t.resolveValue("name")??"Unknown",nodeId:t.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:s,groups:i}:void 0;bl(e,t,c,o,Qr,ei,i),c&&r.push(c)}function YH(e,t){let o={};for(let i of e)o[i.id]=new Map;let r=t.getSlugVariable();if(!r)return o;for(let i of t.getUnsortedChildren()){let n=i.getControlProp(r.id);if(n&&(C(n.type==="string","expect slug control type to be be of type string"),C(R(n.value),"expected slug control prop value to be string"),!!n.valueLocalized))for(let a in n.valueLocalized){let l=n.valueLocalized[a],s=o[a];if(!s||!l?.value)continue;let c=(s.get(l.value)??0)+1;s.set(l.value,c)}}return o}function qH(e,t,o){let r=e.getParent(o.id)?.children??[],i={};for(let n of t)n.id!==ku&&(i[n.id]=new Map);for(let n of r){if(!hu(n))continue;let{segment:a,segmentLocalized:l}=n;for(let s of t){if(s.id===ku)continue;let d=eS(s,l)?.value??a,u=i[s.id];if(!u)continue;let f=(u.get(d)??0)+1;u.set(d,f)}}return i}function QH(e,t,o){let r=Tl(e,e.root,t,Qr,ei,void 0);if(r){r.group&&o.push(r.group);return}let i=[];sF(e,e.root,e.root,t,i);let n=i.length>0?{type:"sourceGroup",groupType:"settings",name:"Site Settings",nodeId:e.root.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:i}:void 0;bl(e,e.root,n,t,Qr,ei,void 0),n&&o.push(n)}function e0(e,t,o,r){for(let i of t.children)KH(e,i,o,r)}function t0(e,t,o,r,i,n){if(o.dataIdentifier||fC.has(o.segment))return;let a=$e(o.segment),l=o.segmentLocalized??rt,s=cF(r,l,qH(e,i,o),"Sibling pages must have unique slugs");n.push({keyPath:o.id,type:"RouteSegmentNode",nodeId:o.id,scopeId:t.id,value:o.segment,valueWordCount:Et(o.segment),hash:$e(o.segment),localizedValues:l,localizedValueStatuses:xt(o.segment,r,l,a,s),managedByPluginButUserEditable:!1,warnings:s})}function o0(e,t,o,r){let i=Tl(e,t,o,Qr,ei,void 0);if(i){i.group&&r.push(i.group);return}let n=RS(e,"includeDrafts"),a=[];for(let s of t.walk())hu(s)&&t0(e,t,s,o,n,a);let l;a.length>0&&(l={type:"sourceGroup",name:"Page Path Segments",groupType:"routeSegment",nodeId:t.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:a},r.push(l)),bl(e,t,l,o,Qr,ei,void 0)}function bIe(e,t,o,r){let i=[];if(!t||t.length===0)return i;QH(e,t,i);for(let n of e.root.children)KL(n)&&(C(n.isLoaded(),"Scope node must be fully loaded"),_H(e,n,t,o,i,r)),wi(n)&&(C(n.isLoaded(),"Scope node must be fully loaded"),e0(e,n,t,i)),Xe.isOn("localizedPagePaths")&&lC(n)&&o0(e,n,t,i);return i}function IIe(e,t){return Sr(e,t)}function NIe(e,t){return jr(e,t)}function dF(e,t){let o=e.itemVariables.length===1&&e.itemVariables[0]?.type==="image"?e.itemVariables[0]:void 0,r=m`item`,i={[ci]:m`typeof ${r}?.[${ci}] === "string" ? ${r}[${ci}] : undefined`};for(let a of e.itemVariables){let l=Al(a.name);l?i[a.id]=m`${r}?.[${l}] ?? ${r}?.[${a.id}]`:i[a.id]=m`${r}?.[${a.id}]`}let n=t.bindings.create("arrayFromHumanReadable"+e.id);return t.declarations.file.create(m.joinLines(m`const ${n} = (value) => {${m.joinLines(m`if (!Array.isArray(value)) return`,m`return value.map(${r} => {${m.joinLines(o?m`if (typeof ${r} === "string") return { [${o.id}]: ${r} }`:void 0,m`return ${i}`)}})`)}}`)),n}function r0(e){return[e[1],e[0]]}var i0=new Map(Object.entries(Re).map(r0));function pF(e,t){let o=t.addImport("framer",{exportSpecifier:"ControlType"}),r=i0.get(e),i=new V(r);return m`${o}.${i}`}var n0={boolean:"boolean",number:"number",string:"string",richtext:"string",fusednumber:"any",enum:"string",segmentedenum:"string",color:"string",image:"string",responsiveimage:"{src: string; srcSet?: string; alt?: string}",file:"string",componentinstance:"any",slot:"any",array:"any[]",eventhandler:"any",transition:"Record<string, any>",link:"string",linkrelvalues:"string[] | undefined",pagescope:"string",date:"string",object:"Record<string, any>",font:"Record<string, any> | undefined",scrollsectionref:"React.MutableRefObject<HTMLElement>",customcursor:"string",border:"Record<string, any>",cursor:"string",boxshadow:"string",gap:"string",padding:"string",borderradius:"string",collectionreference:"string | undefined",multicollectionreference:"string[] | undefined",trackingid:"string | undefined",vectorsetitem:"React.ComponentType<any> | undefined"};function a0(e){return e?new V(n0[e]):m`any`}var uF="variant";function s0(e){return!E(e?.defaultValue)}function l0(e,t){if(!le(e))return{};C(e.isLoaded(),"Node must be loaded to generate controls");let o=e.getTopLevelVariants();if(o?.length<2)return{};let r=[],i=[];for(let n of o){let a=n.resolveValue("name")??pi(n);r.push(n.id),i.push(a)}return{[uF]:{type:pF("enum",t),title:"Variant",options:r,optionTitles:i}}}function c0(e,t,o,r,i){if(e.type==="responsiveimage"&&es(e)&&Qa(e.__vekterDefault)){let{assetReference:n,alt:a}=e.__vekterDefault,l=ws(i?.width,i?.height),s=o.assets.resolveResponsiveImage(n,{layerMaxSidePixelSize:l,focalPoint:e.__vekterDefault});return s&&R(a)&&(s.alt=a),s}else if(na(e))switch(e.type){case"responsiveimage":{let n=ws(i?.width,i?.height),a=o.assets.resolveResponsiveImage(e.__defaultAssetReference,{layerMaxSidePixelSize:n});return a||void 0}case"file":{let n=o.assets.resolve(e.__defaultAssetReference);return n?n.src:void 0}}else{if(t?.type==="array")return t.initialValue?t.initialValue.map(n=>{let a={};if(!n||n.type!=="object"||!Fe(n.value))return a;for(let l in n.value){let s=n.value[l];if(!s||s.type!=="image"||!R(s.value))continue;let c=o.assets.resolveResponsiveImage(s.value,{focalPoint:s});c&&(c.alt=s.alt??"",a[l]=c)}return a}):[];if(s0(e)){let n=e.defaultValue;if(e.type==="vectorsetitem")return C(FC(n),"Vector set item must be a module export identifier"),o.imports.addModuleImport(n.identifier);if(e.type==="richtext"&&R(n))return Hi(n,{collectors:o,useFramerMotion:r==="SmartComponent"});if(e.type==="boxshadow"&&Uv(n))return Jv(n,"emptyStringWhenEmpty",a=>pn(a)?cs(a):ia.toFormatString(a));if(Wt(n))return pn(n)?cs(n):n}}}function qp(e,t){return m`${e}?: ${t};`}var mF=["id","width","height"],d0=Object.fromEntries(mF.map(e=>{let t=new V(e);return[t,t]}));function p0(e,t){let o=new Y(e);return Y.addSpreadAtEnd(o,t),o}var fF=[{name:te.style,type:m`Record<string, unknown>`},{name:te.className,type:m`string`},{name:te.layoutId,type:m`string | number`}];function u0(e,{declarations:t}){if(!le(e)&&!J(e)&&!ze(e)&&!bo(e))return[];C(e.isLoaded(),"Node must be loaded to generate default values and types");let o=fF.map(({name:l,type:s})=>({key:ue(l),type:qp(l,s)})),r=hn(e)?e.getTopLevelVariants():[],i=ue(te.variant);if(r.length<2)return o.concat({key:i});C(hn(e),"A scope with more than 1 variants must have replica variants.");let n=new Y;for(let l of r)n[l.resolveValue("name")??pi(l)]=l.id;let a=t.file.dedupe("humanReadableVariantMap",n);return o.concat([{key:i,type:qp(te.variant,m`keyof typeof ${a}`),value:m`${a}[props.${te.variant}] ?? props.${te.variant} ?? ${e.baseVariantId}`}])}function wg(e,t,o){let r=m`props.${new V(e)}`;return t&&(r=m`${t} ?? ${r}`),o&&(r=m`${r} ?? ${o}`),r}function hF(e,{treeStore:t}){if(!J(e)||!Hv(t.tree,e))return;if(!Xe.isOn("urlVariables")){let n=ce(e.dataIdentifier);if(!Ge(n))return}let r=e.getVariableDefinitions(t.tree,M,M.activeBundleHash);if(!r||r.length===0)return;let i=new Map;for(let n of r)J(e)&&e.hasVariable(n.id)||i.set(n.id,n);return i}var m0=[...Ov,uF,...mF,...fF.map(({name:e})=>e.toString()),"name"];function f0(e,t,o,r,i,n){let a=new Set(m0),l=Object.entries(e).map(([D,{control:B,variable:H,binding:A}])=>{if(!B)return{key:D,binding:A};let Z=Pc(Al(B.title)??D,a),re=new V(Z),Ie=c0(B,H,r,i,n),se=qp(re,a0(B.type)),ke;if(B.type==="enum"&&B.options&&B.optionTitles&&re){let ne=new Y;B.options.forEach((pt,U)=>{if(!R(pt)||!B.optionTitles)return;let it=B.optionTitles[U];R(it)&&(ne[it]=pt)});let lt=r.declarations.file.dedupe("humanReadableEnumMap",ne);se=qp(re,m`keyof typeof ${lt}`),ke=wg(D,re,Ie),ke=m`${lt}[${re}] ?? ${ke}`}else if(H?.type==="array"){let ne=dF(H,r),lt=V.fn(ne,re);ke=wg(D,lt,Ie)}else ke=wg(D,re,Ie);return{key:D,binding:A,name:Z,type:se,value:ke}}),s="",c=[],d=new Y,u=hF(t,o),f={},y={...d0};for(let{key:D,binding:B,type:H,value:A,name:Z}of[...u0(t,r),...l]){let re=u?.get(D),Ie=B??new V(D);if(re){let se=m`${Ie} = ${te.getFromCurrentRouteData}(${re.id})`;if(jy(re.type)){let ke=Vr(re.type);Wt(ke)&&(se=m`${se} ?? ${ke}`)}c.push(se)}else ue(Ie)!==D?c.push(m`${D}: ${Ie}`):c.push(Ie);H&&(s+=H),A&&(d[D]=A),Z&&(f[D]=Z,y[Z]=new V(Z))}i==="LayoutTemplate"&&c.push(te.children),i==="DesignPage"&&c.push(te.style),Y.addSpreadAtStart(d,te.props);let v=r.declarations.file.dedupe("getProps",m`(${p0(y,te.props)}) => { return ${d} }`),b=c.join(", "),x=b.length>0?new V(`{ ${b}, ...${te.restProps} }`):te.restProps;return{variableMap:Gt(f)?void 0:f,types:new V(s),props:m`const ${x} = ${V.fn(v,te.props)}`}}function h0(e,t,o){let r=[],i=bo(e),n=gF(e),a=o.getBindings(e.id);for(let s of n){if(!un(s))continue;let c=a.get(s.id);!i&&!c||r.push({id:s.id,binding:c,definition:s})}let l=hF(e,t);if(l)for(let[s]of l){let c=a.get(s);c&&r.push({id:s,binding:c})}return r}function g0(e,t){let{hidden:o,...r}=e;if(!t)return r;let{description:i,...n}=r;return n}function y0(e,t,o,{treeStore:r},{imports:i,variables:n},a,l){let{id:s,type:c}=t;switch(c){case"controlReference":{let d=ce(MC(r.tree,t.entityIdentifier));if(!d||!t.entityIdentifier||!Ge(d))return;let u=i.addModuleImport(d,{composeWithImports:[i.addImport("framer",{exportSpecifier:"getPropertyControls"})]});if(!u)return;let f=new Y({hidden:m`undefined`,description:m`undefined`});return Y.addSpreadAtStart(f,m`${u}[${t.controlKey}]`),R(o.title)&&(f.title=o.title),R(o.description)&&(f.description=o.description),o.type==="responsiveimage"&&es(o)&&Qa(o.__vekterDefault)&&(f[yy]=V.fromValue(o.__vekterDefault)),na(o)?f[gy]=V.fromValue(o.__defaultAssetReference):E(t.initialValue)||(f.defaultValue=V.fromValue(t.initialValue)),m`${u}?.[${t.controlKey}] && ${f}`}case"nodePropertyControlReference":case"array":case"vectorsetitem":case"boolean":case"color":case"date":case"enum":case"eventhandler":case"file":case"image":case"link":case"linkrelvalues":case"number":case"richtext":case"scrollsectionref":case"customcursor":case"cursor":case"transition":case"boxshadow":case"string":case"border":case"borderradius":case"gap":case"padding":case"collectionreference":case"multicollectionreference":case"trackingid":case"slug":{let d={...g0(o,a),type:pF(o.type,i)};return l==="vector"&&n&&(d.hidden=!n.getBinding(e.id,s)),d}default:_(c)}}function gF(e){return qr(e)?e.variables:[]}function C0(e,t,o,r,i=gF(e)){let n=l0(e,o.imports),a=Zl(e),l=[...i];if(mo(e)){let s=$C();l.push(s);let c=_C();l.push(c);let d=HC(e);l.push(d);let u=GC(e);l.push(u)}for(let s of l){if(!un(s))continue;let c=Nu(t.treeStore.tree,M,s);if(nt(c))continue;C(c.type!=="image","Image variables should become responsive images");let d=y0(e,s,c,t,o,a,r);E(d)||(n[s.id]=d)}if(!Gt(n))return new Y(n,1)}function lNe(e,t,o,r,i,n){let a={},l=[];for(let{id:s,binding:c,definition:d}of h0(e,t,o.variables)){if(d&&J(e)&&e.hasVariable(d.id))continue;let f=d?Nu(t.treeStore.tree,M,d):void 0;a[s]={control:f??void 0,variable:d,binding:c},d&&l.push(d)}return{propertyControls:C0(e,t,o,i,l),...f0(a,e,t,o,r,n)}}async function mNe(e,t){let o=[];e.forEach(r=>{let i=ce(r);i&&i.kind==="externalModuleExport"&&o.push(i)}),o.length&&await t.preloadExternalModules(o),await Hd(M,e,t)}function CNe(e){let t={};for(let[o,r]of e)CF(t,o,r);return t}function SNe(e,t,o){return tf(e,r=>{CF(r,t,o)})}function vNe(e,t){return e[t]?tf(e,o=>{let r=o[t];if(r){for(let i of r.dependents){let n=o[i];n&&(n.dependencies.delete(t),Qp(n)&&delete o[i])}for(let i of r.dependencies){let n=o[i];n&&(n.dependents.delete(t),Qp(n)&&delete o[i])}delete o[t]}}):e}function TNe(e,t,o,r,i){let n=new Set,a=[t];for(r=r||new Set,i=i||new Set;a.length>0;){let l=a.pop();if(!l||n.has(l))continue;n.add(l);let s=e[l];if(s){if(r.has(l))i.add(l);else if(!r.size)o.add(l);else{let c=!1;for(let d of s.dependents)if(r.has(d)||i.has(d)){c=!0;break}c?i.add(l):o.add(l)}for(let c of s.dependents)n.has(c)||a.push(c)}}}function bNe(e,t){let o=new Set,r=[t];for(;v0(r);){let i=r.shift(),n=e[i];if(n){for(let a of n.dependents)o.has(a)||(o.add(a),r.push(a));if(o.has(t))return!0}}return!1}function S0(e,t){let o=Vc(e,t);if(o)return o.startsWith("collection")&&!t.startsWith("collection")&&!t.startsWith("draftCollection")?o.replace("collection","draftCollection"):o}function CF(e,t,o){let r=e[t];if(!r){if(o.length===0)return;r=yF(e,t)}let i=new Set(r.dependencies);for(let n of o){let a=S0(n,t);if(!a)continue;r.dependencies.add(a);let l=e[a];l||(l=yF(e,a)),l.dependents.add(t),r.dependencies.add(a),i.delete(a)}for(let n of i){let a=e[n];a&&(a.dependents.delete(t),Qp(a)&&delete e[n])}Qp(r)&&delete e[t]}function Qp(e){return e.dependents.size===0&&e.dependencies.size===0}function yF(e,t){let o={dependents:new Set,dependencies:new Set};return e[t]=o,o}function v0(e){return e.length>0}var T0=1;function b0(e){return e==="screen"||e==="canvasComponent"}function I0(e){let t=e.metadata.compatibleCmsVersion;return K(t)?t:0}function N0(e){let t=Mv(e);return e.imports.relative.some(o=>{let r=Vc(o,t);return R(r)&&r.startsWith("collection")})}function x0(e){return b0(e.type)&&N0(e)}function wNe(e){return x0(e)&&I0(e)<T0}export{LV as a,dG as b,GF as c,$s as d,_F as e,yG as f,zr as g,ej as h,Tf as i,bf as j,tj as k,eP as l,FV as m,ZG as n,Bs as o,KG as p,eE as q,YG as r,qG as s,QG as t,e$ as u,t$ as v,dj as w,tP as x,mr as y,pj as z,uj as A,mj as B,fj as C,hj as D,wE as E,gj as F,iP as G,If as H,Ln as I,wj as J,kj as K,RE as L,vd as M,Wj as N,Bj as O,Hj as P,Nf as Q,Gj as R,xf as S,Td as T,iU as U,ME as V,nU as W,aU as X,Da as Y,sP as Z,fU as _,a$ as $,OV as aa,lP as ba,zV as ca,pP as da,WV as ea,P$ as fa,mf as ga,pf as ha,Hs as ia,T$ as ja,b$ as ka,uf as la,hd as ma,I$ as na,BV as oa,ff as pa,oE as qa,Gs as ra,F$ as sa,HV as ta,$$ as ua,GV as va,_$ as wa,j$ as xa,U$ as ya,J$ as za,X$ as Aa,Z$ as Ba,Q$ as Ca,WE as Da,BE as Ea,mP as Fa,Id as Ga,$U as Ha,q as Ia,Nd as Ja,hP as Ka,gP as La,HE as Ma,vP as Na,Pf as Oa,k1 as Pa,xd as Qa,X1 as Ra,Vd as Sa,Z1 as Ta,K1 as Ua,Y1 as Va,q1 as Wa,NP as Xa,t_ as Ya,o_ as Za,_V as _a,cE as $a,gd as ab,QE as bb,CX as cb,SX as db,vX as eb,TX as fb,kP as gb,kf as hb,wd as ib,Fn as jb,kd as kb,EP as lb,wZ as mb,kZ as nb,RZ as ob,fA as pb,hA as qb,Rf as rb,Dd as sb,DZ as tb,LZ as ub,FZ as vb,EZ as wb,AZ as xb,yA as yb,MZ as zb,OZ as Ab,zZ as Bb,WZ as Cb,BZ as Db,HZ as Eb,OP as Fb,zP as Gb,jV as Hb,HP as Ib,dK as Jb,pK as Kb,uK as Lb,mK as Mb,MK as Nb,OK as Ob,UP as Pb,Ed as Qb,Ad as Rb,eY as Sb,XP as Tb,tY as Ub,PA as Vb,AY as Wb,En as Xb,Hd as Yb,UV as Zb,d_ as _b,yd as $b,rw as ac,iw as bc,nw as cc,tq as dc,oq as ec,rq as fc,iq as gc,aw as hc,gE as ic,B_ as jc,H_ as kc,wo as lc,Us as mc,dw as nc,p2 as oc,Js as pc,YA as qc,b2 as rc,I2 as sc,N2 as tc,x2 as uc,V2 as vc,E2 as wc,uw as xc,oM as yc,A2 as zc,Jd as Ac,T4 as Bc,b4 as Cc,xw as Dc,eoe as Ec,dp as Fc,zn as Gc,Bn as Hc,yp as Ic,Cp as Jc,vp as Kc,jk as Lc,Uk as Mc,qk as Nc,XR as Oc,rde as Pc,Np as Qc,jn as Rc,wde as Sc,YR as Tc,qR as Uc,eD as Vc,tD as Wc,Jde as Xc,cpe as Yc,oD as Zc,iD as _c,Ch as $c,wp as ad,aD as bd,Iz as cd,lD as dd,cD as ed,Pz as fd,dD as gd,TD as hd,Vh as id,Kn as jd,ihe as kd,NB as ld,Nhe as md,xhe as nd,mL as od,fL as pd,yL as qd,Bhe as rd,Hhe as sd,Ghe as td,$he as ud,_he as vd,CL as wd,xge as xd,VB as yd,Vge as zd,vL as Ad,Wge as Bd,Bge as Cd,TL as Dd,Hge as Ed,bL as Fd,NL as Gd,Sye as Hd,gg as Id,OB as Jd,vye as Kd,Tye as Ld,bye as Md,gl as Nd,xL as Od,yl as Pd,hg as Qd,Iye as Rd,Nye as Sd,xye as Td,Vye as Ud,WB as Vd,Pye as Wd,wye as Xd,PL as Yd,wL as Zd,Zye as _d,Kye as $d,RL as ae,LL as be,FL as ce,mH as de,$L as ee,gH as fe,jL as ge,Ng as he,dTe as ie,JL as je,jTe as ke,UTe as le,JTe as me,XTe as ne,ZTe as oe,Xp as pe,NH as qe,KL as re,abe as se,sbe as te,lbe as ue,xH as ve,YL as we,qL as xe,QL as ye,mbe as ze,fbe as Ae,hbe as Be,en as Ce,Sl as De,eTe as Ee,tF as Fe,uIe as Ge,mIe as He,fIe as Ie,hIe as Je,gIe as Ke,DH as Le,yIe as Me,CIe as Ne,SIe as Oe,vIe as Pe,LH as Qe,TIe as Re,MH as Se,Zp as Te,$H as Ue,vl as Ve,UH as We,JH as Xe,ZH as Ye,YH as Ze,e0 as _e,bIe as $e,IIe as af,NIe as bf,mNe as cf,CNe as df,SNe as ef,vNe as ff,TNe as gf,bNe as hf,T0 as if,b0 as jf,I0 as kf,x0 as lf,wNe as mf,pF as nf,m0 as of,C0 as pf,lNe as qf};
//# sourceMappingURL=https://app.framerstatic.com/chunk-EZ4K5BFN.mjs.map
